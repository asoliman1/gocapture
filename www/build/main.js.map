{"version":3,"sources":["../../src/views/login/index.ts","../../src/model/protocol/index.ts","../../src/services/db/utils.ts","../../src/views/main/index.ts","../../src/components/ocr-selector/index.ts","../../src/model/index.ts","../../src/services/image-processor.ts","../../src/views/form-review/index.ts","../../src/services/log-client.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/model/form.ts","../../src/model/base-form.ts","../../src/services/push-client.ts","../../src/util/util.ts","../../src/views/forms/index.ts","../../src/components/form-view/index.ts","../../src/util/validator.ts","../../src/views/prospect-search/index.ts","../../src/pipes/form-control-pipe.ts","../../src/views/settings/index.ts","../../src/views/log/index.ts","../../src/components/ion-pullup/index.ts","../../src/views/login/url-choose.ts","../../src/views/form-summary/index.ts","../../src/components/form-view/elements/business-card/image-viewer.ts","../../src/components/form-view/elements/base-group-element.ts","../../src/components/form-view/elements/signature/signature.modal.ts","../../src/components/form-view/elements/signature/signature-pad.ts","../../src/services/business-service.ts","../../src/app/main.ts","../../locale-data/complete.js (ignored)","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/views/login/login.ts","../../src/config/index.ts","../../src/components/form-view/elements/base-element.ts","../../src/services/rest-client.ts","../../src/services/sync-client.ts","../../src/model/protocol/data-response.ts","../../src/model/protocol/records-response.ts","../../src/model/protocol/push-response.ts","../../src/model/protocol/auth-request.ts","../../src/model/protocol/submission-response.ts","../../src/model/protocol/file-upload-request.ts","../../src/model/protocol/file-upload-response.ts","../../src/model/protocol/form-submit-response.ts","../../src/model/user.ts","../../src/model/form-element.ts","../../src/model/form-submission.ts","../../src/model/dispatch.ts","../../src/model/dispatch-order.ts","../../src/model/membership.ts","../../src/model/sync-status.ts","../../src/model/barcode.ts","../../src/services/db/index.ts","../../src/services/db/manager.ts","../../src/services/db/migrator.ts","../../src/services/db/metadata.ts","../../src/views/main/main.ts","../../src/views/forms/forms.ts","../../src/views/form-capture/form-capture.ts","../../src/components/form-view/form-view.ts","../../src/components/ocr-selector/ocr-selector.ts","../../src/util/form.ts","../../src/components/form-view/selection-view.ts","../../src/views/prospect-search/prospect-search.ts","../../src/views/form-review/form-review.ts","../../src/views/settings/settings.ts","../../src/views/log/log.ts","../../src/components/ion-pullup/ion-pullup.ts","../../src/views/dashboard/index.ts","../../src/views/dashboard/dashboard.ts","../../src/views/dispatches/index.ts","../../src/views/dispatches/dispatches.ts","../../src/views/form-summary/form-summary.ts","../../src/components/form-view/elements/index.ts","../../src/components/form-view/elements/business-card/index.ts","../../src/components/form-view/elements/business-card/business-card.ts","../../src/components/form-view/elements/image/index.ts","../../src/components/form-view/elements/image/image.ts","../../src/components/form-view/elements/simple-name/index.ts","../../src/components/form-view/elements/simple-name/simple-name.ts","../../src/components/form-view/elements/signature/index.ts","../../src/components/form-view/elements/signature/signature.ts","../../src/model/protocol/response.ts","../../src/components/form-view/elements/gps/index.ts","../../src/components/form-view/elements/gps/gps.ts","../../src/components/form-view/elements/address/index.ts","../../src/components/form-view/elements/address/address.ts","../../src/components/form-view/elements/radios/index.ts","../../src/components/form-view/elements/radios/radios.ts","../../src/components/form-view/elements/dropdown/index.ts","../../src/components/form-view/elements/dropdown/dropdown.ts","../../src/components/form-view/elements/checkboxes/index.ts","../../src/components/form-view/elements/checkboxes/checkboxes.ts","../../src/services/db-client.ts","../../src/components/form-view/elements/barcoder/index.ts","../../src/components/form-view/elements/barcoder/barcoder.ts","../../src/pipes/filter-pipe.ts","../../src/util/http.ts","../../src/util/currency.ts","../../src/config/dev.ts","../../src/config/prod.ts","../../src/views/form-capture/index.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["export * from \"./login\";\r\nexport * from \"./url-choose\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/login/index.ts","export * from \"./data-response\";\r\nexport * from \"./records-response\";\r\nexport * from \"./response\";\r\nexport * from \"./push-response\";\r\nexport * from \"./auth-request\";\r\nexport * from \"./submission-response\";\r\nexport * from \"./file-upload-request\";\r\nexport * from \"./file-upload-response\";\r\nexport * from \"./form-submit-response\";\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/index.ts","export class Utils{\r\n\tpublic static makeCreateTableQuery(table) {\r\n\t\tvar columns = [];\r\n\t\ttable.columns.forEach((col) => {\r\n\t\t\tcolumns.push(col.name + ' ' + col.type);\r\n\t\t});\r\n\t\tlet query = 'CREATE TABLE IF NOT EXISTS ' + table.name + ' (' + columns.join(',') + ')';\r\n\t\treturn query;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/db/utils.ts","export * from \"./main\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/main/index.ts","export * from \"./ocr-selector\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/ocr-selector/index.ts","export * from \"./user\";\r\nexport * from \"./form\";\r\nexport * from \"./form-element\";\r\nexport * from \"./form-submission\";\r\nexport * from \"./dispatch\";\r\nexport * from \"./dispatch-order\";\r\nexport * from \"./membership\";\r\nexport * from \"./sync-status\";\r\nexport * from \"./barcode\";\n\n\n// WEBPACK FOOTER //\n// ./src/model/index.ts","import { Observable, Observer } from \"rxjs/Rx\";\r\nimport { Injectable } from \"@angular/core\";\r\n\r\n@Injectable()\r\nexport class ImageProcessor{\r\n\tprivate canvas: HTMLCanvasElement;\r\n\tprivate ctx: CanvasRenderingContext2D;\r\n\r\n\tpublic ensureLandscape(url: string, preserveCanvas: boolean): Observable<Info> {\r\n\t\treturn new Observable<Info>((obs: Observer<Info>) => {\r\n\t\t\tconsole.log(\"Ensure landscape started \");\r\n\t\t\tlet start = new Date().getTime();\r\n\t\t\tvar image: any = document.createElement(\"img\");\r\n\t\t\tlet t = this;\r\n\t\t\timage.onload = function (event: any) {\r\n\t\t\t\tif (image.naturalWidth >= image.naturalHeight) {\r\n\t\t\t\t\tobs.next({\r\n\t\t\t\t\t\twidth: image.naturalWidth,\r\n\t\t\t\t\t\theight: image.naturalHeight,\r\n\t\t\t\t\t\tdataUrl: url,\r\n\t\t\t\t\t\tdata: null,\r\n\t\t\t\t\t\tisDataUrl: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(\"Ensure landscape ended after \" + (new Date().getTime() - start) + \"ms\")\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tt.setupCanvas(image.naturalHeight, image.naturalWidth)\r\n\t\t\t\tt.ctx.translate(t.canvas.width / 2, t.canvas.height / 2);\r\n\t\t\t\tt.ctx.rotate(Math.PI / 2);\r\n\t\t\t\tt.ctx.drawImage(image, -image.naturalWidth / 2, -image.naturalHeight / 2);\r\n\t\t\t\tobs.next({\r\n\t\t\t\t\twidth: t.canvas.width,\r\n\t\t\t\t\theight: t.canvas.height,\r\n\t\t\t\t\tdataUrl:t.canvas.toDataURL(),\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t\tisDataUrl: true\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"Ensure landscape ended after \" + (new Date().getTime() - start) + \"ms\")\r\n\t\t\t\tobs.complete();\r\n\t\t\t\t//if(!preserveCanvas){\r\n\t\t\t\t\tt.ctx.clearRect(0, 0, t.canvas.width, t.canvas.height);\r\n\t\t\t\t//}\t\t\t\t\r\n\t\t\t};\r\n\t\t\timage.src = url;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic flip(url: string): Observable<Info> {\r\n\t\treturn new Observable<Info>((obs: Observer<Info>) => {\r\n\t\t\tvar image: any = document.createElement(\"img\");\r\n\t\t\tlet t = this;\r\n\t\t\timage.onload = function (event: any) {\r\n\t\t\t\tt.setupCanvas(image.naturalWidth, image.naturalHeight)\r\n\t\t\t\tt.ctx.translate(t.canvas.width / 2, t.canvas.height / 2);\r\n\t\t\t\tt.ctx.rotate(Math.PI);\r\n\t\t\t\tt.ctx.drawImage(image, -image.naturalWidth / 2, -image.naturalHeight / 2);\r\n\t\t\t\tobs.next({\r\n\t\t\t\t\twidth: t.canvas.width,\r\n\t\t\t\t\theight: t.canvas.height,\r\n\t\t\t\t\tdataUrl:t.canvas.toDataURL(),\r\n\t\t\t\t\tdata: null,\r\n\t\t\t\t\tisDataUrl: true\r\n\t\t\t\t});\r\n\t\t\t\tobs.complete();\r\n\t\t\t\tt.ctx.clearRect(0, 0, t.canvas.width, t.canvas.height);\r\n\t\t\t};\r\n\t\t\timage.src = url.replace(/\\?.*/, \"?\" + parseInt(((1 + Math.random())*1000) + \"\"));\r\n\t\t});\r\n\t}\r\n\r\n\tpublic dataURItoBlob(dataURI: string): Blob {\r\n\t\tvar arr = dataURI.split(',');\r\n\t\tvar byteString = atob(arr[1]);\r\n\t\tvar mimeString = arr[0].split(':')[1].split(';')[0]\r\n\r\n\t\tvar ab = new ArrayBuffer(byteString.length);\r\n\t\tvar ia = new Uint8Array(ab);\r\n\t\tfor (var i = 0; i < byteString.length; i++) {\r\n\t\t\tia[i] = byteString.charCodeAt(i);\r\n\t\t}\r\n\r\n\t\tvar blob = new Blob([ab], { type: mimeString });\r\n\t\treturn blob;\r\n\t}\r\n\r\n\tpublic recognize(data: string): Observable<RecognitionResult>{\r\n\t\treturn new Observable<RecognitionResult>((obs: Observer<RecognitionResult>) => {\r\n\t\t\tif (window[\"TesseractPlugin\"]) {\r\n\t\t\t\tconsole.log(\"Recognize started\");\r\n\t\t\t\tlet start = new Date().getTime();\r\n\t\t\t\t/*TesseractPlugin.recognizeWords(this.processCurrentImage().split(\"base64,\")[1], \"eng\", function (data) {\r\n\t\t\t\t\tobs.next(<RecognitionResult>JSON.parse(<any>data));\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}, function (reason) {\r\n\t\t\t\t\tobs.error(reason);\r\n\t\t\t\t});*/\r\n\t\t\t\tTesseractPlugin.recognizeWordsFromPath(data, \"eng\", function (data) {\r\n\t\t\t\t\tconsole.log(\"Recognize ended after \" + (new Date().getTime() - start) + \"ms\")\r\n\t\t\t\t\tobs.next(<RecognitionResult>JSON.parse(<any>data));\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}, function (reason) {\r\n\t\t\t\t\tconsole.log(\"Recognize ended in error after \" + (new Date().getTime() - start) + \"ms\")\r\n\t\t\t\t\tobs.error(reason);\r\n\t\t\t\t});\r\n\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tobs.next({\"recognizedText\":\"Kayla Egan  Q TAS\\n\\nBusiness Development Manager ENVIRONMENTAL\\n\\nkagan@taslp.com\\n\\n3929 California Parkway E\\n\\nFort Worth, TX 761 19\\n\\nO 817.535.7222 Emergency Response\\n7 F 817.535.8187 1.888.654.0111\\n\\nC 817.253.1855 www.taslp.com\",\"words\":[{\"word\":\"Kayla\",\"box\":\"122 467 211 69\",\"confidence\":80.52796173095703},{\"word\":\"Egan\",\"box\":\"351 465 189 68\",\"confidence\":68.43997955322266},{\"word\":\"\",\"box\":\"823 465 3 2\",\"confidence\":62.74388885498047},{\"word\":\"Q\",\"box\":\"929 351 316 253\",\"confidence\":62.69871139526367},{\"word\":\"TAS\",\"box\":\"1310 338 464 166\",\"confidence\":69.00736236572266},{\"word\":\"Business\",\"box\":\"122 555 189 39\",\"confidence\":87.80379486083984},{\"word\":\"Development\",\"box\":\"324 552 306 47\",\"confidence\":88.68340301513672},{\"word\":\"Manager\",\"box\":\"644 549 206 48\",\"confidence\":86.97967529296875},{\"word\":\"ENVIRONMENTAL\",\"box\":\"1209 547 648 60\",\"confidence\":73.26774597167969},{\"word\":\"kagan@taslp.com\",\"box\":\"122 616 403 52\",\"confidence\":86.98858642578125},{\"word\":\"3929\",\"box\":\"137 887 122 43\",\"confidence\":85.84361267089844},{\"word\":\"California\",\"box\":\"280 885 269 45\",\"confidence\":82.29283142089844},{\"word\":\"Parkway\",\"box\":\"566 883 241 55\",\"confidence\":83.30488586425781},{\"word\":\"E\",\"box\":\"824 881 35 43\",\"confidence\":89.27845764160156},{\"word\":\"Fort\",\"box\":\"136 967 106 43\",\"confidence\":86.860107421875},{\"word\":\"Worth,\",\"box\":\"258 967 183 50\",\"confidence\":89.03996276855469},{\"word\":\"TX\",\"box\":\"461 966 74 43\",\"confidence\":89.64755249023438},{\"word\":\"761\",\"box\":\"553 964 90 44\",\"confidence\":90.46473693847656},{\"word\":\"19\",\"box\":\"658 963 55 44\",\"confidence\":92.0013427734375},{\"word\":\"O\",\"box\":\"138 1047 42 43\",\"confidence\":92.50652313232422},{\"word\":\"817.535.7222\",\"box\":\"199 1046 354 44\",\"confidence\":84.44401550292969},{\"word\":\"Emergency\",\"box\":\"1227 1036 349 56\",\"confidence\":80.78169250488281},{\"word\":\"Response\",\"box\":\"1592 1033 284 54\",\"confidence\":87.1631851196289},{\"word\":\"7\",\"box\":\"19 1185 3 1\",\"confidence\":10.920455932617188},{\"word\":\"F\",\"box\":\"136 1127 32 43\",\"confidence\":88.34750366210938},{\"word\":\"817.535.8187\",\"box\":\"199 1127 354 44\",\"confidence\":92.27437591552734},{\"word\":\"1.888.654.0111\",\"box\":\"1450 1112 425 50\",\"confidence\":86.51805877685547},{\"word\":\"C\",\"box\":\"138 1207 40 43\",\"confidence\":93.28943634033203},{\"word\":\"817.253.1855\",\"box\":\"197 1207 356 45\",\"confidence\":84.16748046875},{\"word\":\"www.taslp.com\",\"box\":\"1351 1195 532 62\",\"confidence\":86.11317443847656}]});\r\n\t\t\t\t\tobs.complete();\t\t\t\t\t\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate processCurrentImage(): string{\r\n\t\tlet pix = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);\r\n\t\tfor (var i = 0; i < pix.data.length; i+= 4) {\r\n\t\t\tlet contrastF = 1.36;\r\n\t\t\tlet saturate = -1;\r\n\t\t\t//up the contrast\r\n\t\t\t//pix.data[i] = contrastF * (pix.data[i] - 128) + 128;\r\n\t\t\t//pix.data[i + 1] = contrastF * (pix.data[i + 1] - 128) + 128;\r\n\t\t\t//pix.data[i + 2] = contrastF * (pix.data[i + 2] - 128) + 128;\r\n\t\t\t//desaturate\r\n\t\t\tlet max = Math.max(pix.data[i], pix.data[i + 1], pix.data[i + 2]);\r\n\t\t\tpix.data[i] += max !== pix.data[i] ? (max - pix.data[i]) * saturate : 0;\r\n\t\t\tpix.data[i + 1] += max !== pix.data[i + 1] ? (max - pix.data[i + 1]) * saturate : 0;\r\n\t\t\tpix.data[i + 2] += max !== pix.data[i + 2] ? (max - pix.data[i + 2]) * saturate : 0;\r\n\t\t}\r\n\t\tthis.ctx.putImageData(pix, 0, 0);\r\n\t\tlet base64 = this.canvas.toDataURL();\r\n\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\t\treturn base64;\r\n\t}\r\n\r\n\tprivate setupCanvas(width: number, height: number){\r\n\t\tthis.canvas = null;\r\n\t\tif(!this.canvas){\r\n\t\t\tthis.canvas = document.createElement(\"canvas\");\r\n\t\t\tthis.ctx = this.canvas.getContext('2d');\r\n\t\t}\t\t\r\n\t\tthis.canvas.width = width;\r\n\t\tthis.canvas.height = height;\r\n\t\tthis.ctx.clearRect(0, 0, width, height);\r\n\t\tthis.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t}\r\n}\r\n\r\nexport class Info{\r\n\twidth:number;\r\n\theight:number;\r\n\tdataUrl:string;\r\n\tdata: ImageData;\r\n\tisDataUrl: boolean = false;\r\n}\r\n\r\nexport class RecognitionResult{\r\n\trecognizedText: string;\r\n\twords: RecognizedWord[];\r\n}\r\n\r\nexport class RecognizedWord{\r\n\tword: string;\r\n\tbox: string;\r\n\tconfidence: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/image-processor.ts","export * from \"./form-review\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/form-review/index.ts","import { Injectable } from \"@angular/core\";\r\nimport { Observable, BehaviorSubject } from \"rxjs/Rx\";\r\nimport { Util } from \"../util/util\";\r\n\r\n@Injectable()\r\nexport class LogClient{\r\n\r\n\tprivate logSource: BehaviorSubject<LogEntry>;\r\n    /**\r\n     * Error event\r\n     */\r\n\tlog: Observable<LogEntry>;\r\n\r\n\tprivate logs : LogEntry[] = [];\r\n\t\r\n\tprivate consoleHandler: any;\r\n\r\n\tconstructor(){\r\n\t\tthis.consoleHandler = window.console;\r\n\t\tvar c = \"console\";\r\n\t\twindow[c] = this.makeConsole();\r\n\r\n\t\tthis.logSource = new BehaviorSubject<LogEntry>(null);\r\n\t\tthis.log = this.logSource.asObservable();\t\t\r\n\t}\r\n\r\n\tpublic getLogs(): LogEntry[]{\r\n\t\treturn this.logs;\r\n\t}\r\n\r\n\tprivate makeConsole() : any{\r\n\t\treturn {\r\n\t\t\tlog: Util.proxy(function(message){\r\n\t\t\t\t\t\t\t\tthis.logEntry(arguments, LogSeverity.LOG)\r\n\t\t\t\t\t\t\t}, this),\r\n\t\t\terror: Util.proxy(function(message){\r\n\t\t\t\t\t\t\t\tthis.logEntry(arguments, LogSeverity.ERROR)\r\n\t\t\t\t\t\t\t}, this),\r\n\t\t\tinfo: Util.proxy(function(message){\r\n\t\t\t\t\t\t\t\tthis.logEntry(arguments, LogSeverity.INFO)\r\n\t\t\t\t\t\t\t}, this),\r\n\t\t\twarn: Util.proxy(function(message){\r\n\t\t\t\t\t\t\t\tthis.logEntry(arguments, LogSeverity.WARN)\r\n\t\t\t\t\t\t\t}, this)\r\n\t\t}\r\n\t}\r\n\r\n\tprivate logEntry(messages: any[], severity: LogSeverity){\r\n\t\tthis.consoleHandler[severity.name].apply(this.consoleHandler, messages);\r\n\t\tvar message = messages[0];\r\n\t\tif(typeof(message) == \"object\"){\r\n\t\t\tvar cache = [];\r\n\t\t\tmessage = JSON.stringify(message, function(key, value) {\r\n\t\t\t\tif(value instanceof Date){\r\n\t\t\t\t\tif(!value.toISOString){\r\n\t\t\t\t\t\treturn \"<DATE>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\treturn \"<CIRCULAR_REF>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcache.push(value);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t}, 2);\r\n\t\t\tcache = null; \r\n\t\t}\r\n\t\tthis.logs.push(new LogEntry(message, severity));\r\n\t\tthis.logSource.next(this.logs[this.logs.length - 1]);\r\n\t}\r\n}\r\n\r\nexport class LogEntry{\r\n\tdate: Date;\r\n\tseverity: LogSeverity;\r\n\tmessage: string;\r\n\r\n\tconstructor(message: string, severity: LogSeverity){\r\n\t\tthis.message = message;\r\n\t\tthis.severity = severity;\r\n\t\tthis.date =  new Date();\r\n\t}\r\n}\r\n\r\nexport class LogSeverity{\r\n\tpublic static WARN: LogSeverity = new LogSeverity(\"warn\");\r\n\tpublic static LOG: LogSeverity = new LogSeverity(\"log\");\r\n\tpublic static INFO: LogSeverity = new LogSeverity(\"info\");\r\n\tpublic static ERROR: LogSeverity = new LogSeverity(\"error\");\r\n\r\n\tpublic name: string;\r\n\r\n\tprivate constructor(name: string){\r\n\t\tthis.name = name;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/log-client.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 166;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 166\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 208;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 208\n// module chunks = 0","import {FormElement} from \"./form-element\";\r\nimport {BarcodeStatus} from \"./form-submission\";\r\nimport {BaseForm} from \"./base-form\";\r\n\r\nexport class Form extends BaseForm{\r\n\tcreated_at : string;\r\n\tupdated_at : string;\r\n\tarchive_date : string;\r\n\tlist_id : number;\r\n\ttitle : string;\r\n\tsuccess_message : string;\r\n\tsubmit_error_message : string;\r\n\ttotal_views : number;\r\n\tsubmit_button_text : string;\r\n\tis_mobile_kiosk_mode: boolean;\r\n\telements : FormElement[];\r\n\tbarcode_processed? : BarcodeStatus;\r\n\r\n\tpublic static getIdByUniqueFieldName(name : string, form: any) : string{\r\n\t\tlet element : FormElement = null;\r\n\t\tfor(let i = 0; i < form.elements.length; i++){\r\n\t\t\telement = form.elements[i];\r\n\t\t\tif(!element.mapping || element.mapping.length == 0){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(element.mapping.length == 1){\r\n\t\t\t\tif(element.mapping[0].ll_field_unique_identifier == name){\r\n\t\t\t\t\treturn element[\"identifier\"];\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tfor(let j = 0; j < element.mapping.length; j++){\r\n\t\t\t\tif(element.mapping[j].ll_field_unique_identifier == name){\r\n\t\t\t\t\treturn element.mapping[j][\"identifier\"];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic static getIdByFieldType(type : string, form: any) : string{\r\n\t\tlet element : FormElement = null;\r\n\t\tfor(let i = 0; i < form.elements.length; i++){\r\n\t\t\telement = form.elements[i];\r\n\t\t\tif(element.type == type){\r\n\t\t\t\treturn element[\"identifier\"];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getUrlFields() : string[]{\r\n\t\tlet res = [];\r\n\t\tlet types = [\"business_card\", \"image\", \"signature\"];\r\n\t\tlet element : FormElement = null;\r\n\t\tfor(let i = 0; i < this.elements.length; i++){\r\n\t\t\telement = this.elements[i];\r\n\t\t\tif(types.indexOf(element.type) > -1){\r\n\t\t\t\tres.push(element[\"identifier\"]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tpublic getIdByUniqueFieldName(name : string) : string{\r\n\t\treturn Form.getIdByUniqueFieldName(name, this);\r\n\t}\r\n\r\n\tpublic getIdByFieldType(type : string) : string{\r\n\t\treturn Form.getIdByFieldType(type, this);\r\n\t}\r\n\r\n\tpublic getFieldById(id: number) : FormElement{\r\n\t\tif(id > 0){\r\n\t\t\tfor(let i = 0; i < this.elements.length; i++){\r\n\t\t\t\tif(this.elements[i].id == id){\r\n\t\t\t\t\treturn this.elements[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getFieldByIdentifier(id: string) : FormElement{\r\n\t\tif(id){\r\n\t\t\tfor(let i = 0; i < this.elements.length; i++){\r\n\t\t\t\tif(this.elements[i].identifier == id){\r\n\t\t\t\t\treturn this.elements[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic computeIdentifiers(){\r\n\t\tthis.elements.forEach((element)=>{\r\n\t\t\tif(element[\"identifier\"]){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar identifier = \"element_\" + element.id;\r\n\t\t\telement[\"identifier\"] = identifier;\r\n\t\t\tif(element.mapping.length > 1){\r\n\t\t\t\telement.mapping.forEach((entry, index) =>{\r\n\t\t\t\t\tentry[\"identifier\"] = identifier + \"_\" + (index+1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/form.ts","export class BaseForm{\r\n\tid : string;\r\n\tform_id : number;\r\n\tname : string;\r\n\tdescription : string;\r\n\ttotal_submissions : number;\r\n\ttotal_hold: number;\r\n\ttotal_sent: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/base-form.ts","import { Push, PushObject, NotificationEventResponse } from '@ionic-native/push';\r\nimport { Observable, BehaviorSubject } from \"rxjs/Rx\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Config } from \"../config\";\r\nimport { PushResponse } from \"../model/protocol\";\r\nimport { Util } from \"../util/util\";\r\n\r\n@Injectable()\r\nexport class PushClient {\r\n\t\r\n\tprivate errorSource: BehaviorSubject<any>;\r\n    /**\r\n     * Error event\r\n     */\r\n\terror: Observable<any>;\r\n\r\n\tprivate notificationSource: BehaviorSubject<{id: number, action: number}>;\r\n    /**\r\n     * Error event\r\n     */\r\n\tnotification: Observable<{id: number, action: number}>;\r\n\r\n\tprivate registrationSource: BehaviorSubject<string>;\r\n    /**\r\n     * Error event\r\n     */\r\n\tregistration: Observable<string>;\r\n\r\n\tprivate pushObj: PushObject;\r\n\t\r\n\t/**{\r\n\t\ton: (event: \"registration\" | \"notification\" | \"error\", callback: (data: PushResponse) => void) => void,\r\n\t\toff: (event: \"registration\" | \"notification\" | \"error\", callback: (err: any) => void) => void,\r\n\t\tunregister: (successHandler: () => void, errorHandler: () => void, topics: any[]) => void,\r\n\t\tclearAllNotifications: (successHandler: () => void, errorHandler: () => void) => void\r\n\t};*/\r\n\r\n\tprivate refs: any = {};\r\n\r\n\tconstructor(private push: Push) {\t\t\r\n\t\tthis.errorSource = new BehaviorSubject<any>(null);\r\n\t\tthis.error = this.errorSource.asObservable();\r\n\t\t\r\n\t\tthis.registrationSource = new BehaviorSubject<string>(null);\r\n\t\tthis.registration = this.registrationSource.asObservable();\r\n\t\t\r\n\t\tthis.notificationSource = new BehaviorSubject<{id: number, action: number}>(null);\r\n\t\tthis.notification = this.notificationSource.asObservable();\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.pushObj = this.push.init({\r\n\t\t\tandroid: {\r\n\t\t\t\tsenderID: Config.androidGcmId,\r\n\t\t\t\ticon: \"icon_notif\",\r\n\t\t\t\ticonColor: \"orange\",\r\n\t\t\t\tsound: true\r\n\t\t\t},\r\n\t\t\tios: {\r\n\t\t\t\talert: true,\r\n\t\t\t\tbadge: true,\r\n\t\t\t\tsound: true\r\n\t\t\t},\r\n\t\t\twindows: {}\r\n\t\t});\r\n\t\tif(this.pushObj && this.pushObj['error']){\r\n\t\t\tthis.pushObj = null;\r\n\t\t}\r\n\t\tthis.startup();\r\n\t}\r\n\r\n\tstartup(){\r\n\t\tif(Util.isEmptyObject(this.refs)){\r\n\t\t\tthis.on(\"registration\", Util.proxy(this.onRegistration, this));\r\n\t\t\tthis.on(\"notification\", Util.proxy(this.onNotification, this));\r\n\t\t\tthis.on(\"error\", Util.proxy(this.onError, this));\r\n\t\t}\r\n\t}\r\n\r\n\tshutdown(){\r\n\t\tthis.pushObj.unregister();\r\n\t}\r\n\r\n\tprivate on(event: \"registration\" | \"notification\" | \"error\", cb: Function){\r\n\t\tlet func = Util.proxy(cb, this);\r\n\t\tthis.refs[event] = func;\r\n\t\tthis.pushObj && this.pushObj.on(event).subscribe((d) => {\r\n\t\t\tfunc(d);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate onRegistration(data : PushResponse){\r\n\t\tconsole.log(\"registration\", data);\r\n\t\tthis.registrationSource.next(data.registrationId);\r\n\t}\r\n\r\n\tprivate onNotification(data : NotificationEventResponse){\r\n\t\tlet action = data.additionalData[\"action\"];\r\n\t\tlet id = data.additionalData[\"id\"];\r\n\t\tthis.notificationSource.next({id: id, action: action});\r\n\t}\r\n\r\n\tprivate onError(err){\r\n\t\tthis.errorSource.next(err);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/push-client.ts","/**\r\n * Jquery clone  \r\n */\r\nexport class Util{\r\n    \r\n    private static arr : Array<string> = [];\r\n    private static slice: Function = Util.arr.slice;\r\n    private static class2type : any = {\r\n        \"[object Boolean]\" : \"boolean\",\r\n        \"[object Number]\" : \"number\",\r\n        \"[object String]\" : \"string\",\r\n        \"[object Function]\" : \"function\",\r\n        \"[object Array]\" : \"array\",\r\n        \"[object Date]\" : \"date\",\r\n        \"[object RegExp]\" : \"regexp\",\r\n        \"[object Object]\" : \"object\",\r\n        \"[object Error]\" : \"error\",\r\n        \"[object Symbol]\" : \"symbol\"\r\n        \r\n    };\r\n    //private static toString : Function = Util.class2type.toString;\r\n    private static hasOwn : Function = Util.class2type.hasOwnProperty;\r\n    \r\n    public static each( obj : any, callback: (element: any, index : number, context: any) => any) {\r\n\t\tvar length : number, i : any = 0;\r\n\r\n\t\tif ( Util.isArrayLike( obj ) ) {\r\n\t\t\tlength = obj.length;\r\n\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor ( i in obj ) {\r\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t}\r\n     \r\n    public static proxy(fn : Function, context : any ) {\r\n\t\tvar args, proxy, tmp;\r\n\r\n\t\tif ( typeof context === \"string\" ) {\r\n\t\t\ttmp = fn[ context ];\r\n\t\t\tcontext = fn;\r\n\t\t\tfn = tmp;\r\n\t\t}\r\n\r\n\t\t// Quick check to determine if target is callable, in the spec\r\n\t\t// this throws a TypeError, but we will just return undefined.\r\n\t\tif ( !Util.isFunction( fn ) ) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\t// Simulated bind\r\n\t\targs = Util.slice.call( arguments, 2 );\r\n\t\tproxy = function() {\r\n\t\t\treturn fn.apply( context || Util, args.concat( Util.slice.call( arguments ) ) );\r\n\t\t};\r\n\r\n\t\treturn proxy;\r\n\t}\r\n    \r\n    public static isFunction( obj :any ) : boolean {\r\n\t\treturn Util.type( obj ) === \"function\";\r\n\t}\r\n\r\n\tpublic static isArray( obj :any ) : boolean {\r\n\t\treturn Array.isArray(obj);\r\n\t}\r\n\r\n\tpublic static isWindow( obj :any ) : boolean {\r\n\t\treturn obj != null && obj == obj.window;\r\n\t}\r\n    \r\n\tpublic static isNumeric( obj : any ) : boolean {\r\n\t\tvar realStringObj = obj && obj.toString();\r\n\t\treturn !Util.isArray( obj ) && ( realStringObj - parseFloat( realStringObj ) + 1 ) >= 0;\r\n\t}\r\n\r\n\tpublic static isEmptyObject( obj : any ) : boolean {\r\n\t\tvar name;\r\n\t\tfor ( name in obj ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic static isPlainObject( obj :any ) : boolean {\r\n\t\tvar key;\r\n\r\n\t\t// Must be an Object.\r\n\t\t// Because of IE, we also have to check the presence of the constructor property.\r\n\t\t// Make sure that DOM nodes and window objects don't pass through, as well\r\n\t\tif ( !obj || Util.type( obj ) !== \"object\" || obj.nodeType || Util.isWindow( obj ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\r\n\t\t\t// Not own constructor property must be Object\r\n\t\t\tif ( obj.constructor &&\r\n\t\t\t\t!Util.hasOwn.call( obj, \"constructor\" ) &&\r\n\t\t\t\t!Util.hasOwn.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} catch ( e ) {\r\n\r\n\t\t\t// IE8,9 Will throw exceptions on certain host objects #9897\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Own properties are enumerated firstly, so to speed up,\r\n\t\t// if last one is own, then all properties are own.\r\n\t\tfor ( key in obj ) {}\r\n\r\n\t\treturn key === undefined || Util.hasOwn.call( obj, key );\r\n\t}\r\n\r\n\tpublic static type( obj  :any ) : string {\r\n        if ( obj == null ) {\r\n\t\t\treturn obj + \"\";\r\n\t\t}\r\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\r\n\t\t\tUtil.class2type[ toString.call( obj ) ] || \"object\" :\r\n\t\t\ttypeof obj;\r\n\t}\r\n    \r\n    \r\n    private static isArrayLike( obj : any ) : boolean {\r\n        var length = !!obj && \"length\" in obj && obj.length,\r\n            type = Util.type( obj );\r\n\r\n        if ( type === \"function\" || Util.isWindow( obj ) ) {\r\n            return false;\r\n        }\r\n\r\n        return type === \"array\" || length === 0 ||\r\n            typeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\r\n    }\r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/util.ts","export * from \"./forms\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/forms/index.ts","export * from \"./form-view\";\r\nexport * from \"./selection-view\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/index.ts","import { ValidatorFn, AbstractControl, Validators, FormGroup } from '@angular/forms';\r\n\r\nfunction isPresent(obj: any): boolean {\r\n  return obj !== undefined && obj !== null;\r\n}\r\n\r\nexport class CustomValidators {\r\n  /**\r\n   * Validator that requires controls to have a value of a range length.\r\n   */\r\n  static rangeLength(rangeLength: Array<number>): ValidatorFn {\r\n    return (control: AbstractControl): {[key: string]: any} => {\r\n      if (isPresent(Validators.required(control))) return null;\r\n\r\n      let v: string = control.value;\r\n      return v.length >= rangeLength[0] && v.length <= rangeLength[1] ? null : {'rangeLength': true};\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of a min value.\r\n   */\r\n  static min(min: number): ValidatorFn {\r\n    return (control: AbstractControl): {[key: string]: any} => {\r\n      if (isPresent(Validators.required(control))) return null;\r\n\r\n      let v: number = control.value;\r\n      return v >= min ? null : {'min': true};\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of a max value.\r\n   */\r\n  static max(max: number): ValidatorFn {\r\n    return (control: AbstractControl): {[key: string]: any} => {\r\n      if (isPresent(Validators.required(control))) return null;\r\n\r\n      let v: number = control.value;\r\n      return v <= max ? null : {'max': true};\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of a range value.\r\n   */\r\n  static range(range: Array<number>): ValidatorFn {\r\n    return (control: AbstractControl): {[key: string]: any} => {\r\n      if (isPresent(Validators.required(control))) return null;\r\n\r\n      let v: number = control.value;\r\n      return v >= range[0] && v <= range[1] ? null : {'range': true};\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of digits.\r\n   */\r\n  static digits(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n    return /^\\d+$/.test(v) ? null : {'digits': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of number.\r\n   */\r\n  static number(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n    return /^(?:-?\\d+|-?\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test(v) ? null : {'number': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of url.\r\n   */\r\n  static url(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n    return /^(https?:\\/\\/){0,1}([a-z0-9]([-a-z0-9]*[a-z0-9])?\\.)+((a[cdefgilmnoqrstuwxz]|aero|arpa)|(b[abdefghijmnorstvwyz]|biz)|(c[acdfghiklmnorsuvxyz]|cat|com|coop)|d[ejkmoz]|(e[ceghrstu]|edu)|f[ijkmor]|(g[abdefghilmnpqrstuwy]|gov)|h[kmnrtu]|(i[delmnoqrst]|info|int)|(j[emop]|jobs)|k[eghimnprwyz]|l[abcikrstuvy]|(m[acdghklmnopqrstuvwxyz]|mil|mobi|museum)|(n[acefgilopruz]|name|net)|(om|org)|(p[aefghklmnrstwy]|pro)|qa|r[eouw]|s[abcdeghijklmnortvyz]|(t[cdfghjklmnoprtvwz]|travel)|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw])(.*)$/i.test(v) ? null : {'url': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of email.\r\n   */\r\n  static email(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n    return /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(v) ? null : {'email': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of date.\r\n   */\r\n  static date(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n    return !/Invalid|NaN/.test(new Date(v).toString()) ? null : {'date': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of dateISO.\r\n   */\r\n  static dateISO(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n    return /^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])$/.test(v) ? null : {'dateISO': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of creditCard.\r\n   */\r\n  static creditCard(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n\r\n    let sanitized = v.replace(/[^0-9]+/g, '');\r\n\r\n    // problem with chrome\r\n    if (!(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11})$/.test(sanitized))) {\r\n      return {'creditCard': true};\r\n    }\r\n\r\n    let sum = 0;\r\n    let digit;\r\n    let tmpNum;\r\n    let shouldDouble;\r\n    for (let i = sanitized.length - 1; i >= 0; i--) {\r\n      digit = sanitized.substring(i, (i + 1));\r\n      tmpNum = parseInt(digit, 10);\r\n      if (shouldDouble) {\r\n        tmpNum *= 2;\r\n        if (tmpNum >= 10) {\r\n          sum += ((tmpNum % 10) + 1);\r\n        } else {\r\n          sum += tmpNum;\r\n        }\r\n      } else {\r\n        sum += tmpNum;\r\n      }\r\n      shouldDouble = !shouldDouble;\r\n    }\r\n\r\n    if (Boolean((sum % 10) === 0 ? sanitized : false)) {\r\n      return null;\r\n    }\r\n\r\n    return {'creditCard': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of JSON.\r\n   */\r\n  static json(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n\r\n    try {\r\n      let obj = JSON.parse(v);\r\n\r\n      if (Boolean(obj) && typeof obj === 'object') {\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n    }\r\n    return {'json': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of base64.\r\n   */\r\n  static base64(control: AbstractControl): {[key: string]: boolean} {\r\n    if (isPresent(Validators.required(control))) return null;\r\n\r\n    let v: string = control.value;\r\n    return /^(?:[A-Z0-9+\\/]{4})*(?:[A-Z0-9+\\/]{2}==|[A-Z0-9+\\/]{3}=|[A-Z0-9+\\/]{4})$/i.test(v) ? null : {'base64': true};\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of phone.\r\n   */\r\n  static phone(locale?: string): ValidatorFn {\r\n    const phones = {\r\n      'zh-CN': /^(\\+?0?86\\-?)?((13\\d|14[57]|15[^4,\\D]|17[678]|18\\d)\\d{8}|170[059]\\d{7})$/,\r\n      'zh-TW': /^(\\+?886\\-?|0)?9\\d{8}$/,\r\n      'en-ZA': /^(\\+?27|0)\\d{9}$/,\r\n      'en-AU': /^(\\+?61|0)4\\d{8}$/,\r\n      'en-HK': /^(\\+?852\\-?)?[569]\\d{3}\\-?\\d{4}$/,\r\n      'fr-FR': /^(\\+?33|0)[67]\\d{8}$/,\r\n      'de-DE': /^(\\+?49|0)[1-9]\\d{10}$/,\r\n      'pt-PT': /^(\\+351)?9[1236]\\d{7}$/,\r\n      'el-GR': /^(\\+?30)?(69\\d{8})$/,\r\n      'en-GB': /^(\\+?44|0)7\\d{9}$/,\r\n      'en-US': /^[1-9][0-9]{9}$/,\r\n      'en-ZM': /^(\\+26)?09[567]\\d{7}$/,\r\n      'ru-RU': /^(\\+?7|8)?9\\d{9}$/,\r\n      'nb-NO': /^(\\+?47)?[49]\\d{7}$/,\r\n      'nn-NO': /^(\\+?47)?[49]\\d{7}$/,\r\n      'vi-VN': /^(0|\\+?84)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,\r\n      'en-NZ': /^(\\+?64|0)2\\d{7,9}$/\r\n    };\r\n\r\n    return (control: AbstractControl): {[key: string]: any} => {\r\n      if (isPresent(Validators.required(control))) return null;\r\n\r\n      let v: string = control.value;\r\n      let pattern = phones[locale] || phones['en-US'];\r\n\r\n      return (new RegExp(pattern)).test(v) ? null : {'phone': true};\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value of uuid.\r\n   */\r\n  static uuid(version?: string): ValidatorFn {\r\n    const uuid = {\r\n      '3': /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\r\n      '4': /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\r\n      '5': /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\r\n      'all': /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i\r\n    };\r\n\r\n    return (control: AbstractControl): {[key: string]: any} => {\r\n      if (isPresent(Validators.required(control))) return null;\r\n\r\n      let v: string = control.value;\r\n      let pattern = uuid[version] || uuid.all;\r\n\r\n      return (new RegExp(pattern)).test(v) ? null : {'uuid': true};\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value to equal another value.\r\n   */\r\n  static equal(val: any): ValidatorFn {\r\n    return (control: AbstractControl): {[key: string]: any} => {\r\n      if (isPresent(Validators.required(control))) return null;\r\n\r\n      let v: any = control.value;\r\n\r\n      return val === v ? null : {equal: true};\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validator that requires controls to have a value to equal another control.\r\n   */\r\n  static equalTo(group: FormGroup): {[key: string]: boolean} {\r\n    let keys: string[] = Object.keys(group.controls);\r\n    let len: number = keys.length;\r\n\r\n    if (!len) return null;\r\n\r\n    let firstKey = keys[0];\r\n\r\n    for (let i = 1; i < len; i++) {\r\n      if (group.controls[firstKey].value !== group.controls[keys[i]].value) {\r\n        return {equalTo: true};\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/validator.ts","export * from \"./prospect-search\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/prospect-search/index.ts","import { Pipe } from \"@angular/core\";\r\nimport { Form } from \"../model\";\r\n\r\n@Pipe({\r\n\tname: \"formControl\"\r\n})\r\nexport class FormControlPipe {\r\n\ttransform(array: Array<Form>, args: string): Array<Form> {\r\n\t\tlet arr = array.filter(value => {\r\n\t\t\treturn !value.archive_date || new Date(value.archive_date) > new Date();\r\n\t\t}).sort((a, b) => {\r\n\t\t\tlet dateA = new Date(a.updated_at);\r\n\t\t\tlet dateB = new Date(b.updated_at);\r\n\t\t\tif (dateA < dateB) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else if (dateA > dateB) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn arr;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/form-control-pipe.ts","export * from \"./settings\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/settings/index.ts","export * from \"./log\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/log/index.ts","export * from \"./ion-pullup\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/ion-pullup/index.ts","import { Component } from '@angular/core';\r\nimport { LoadingController, ViewController, NavParams, PopoverController, ToastController } from 'ionic-angular';\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { User } from \"../../model\";\r\nimport { Main } from \"../main\";\r\n\r\n@Component({\r\n\tselector: 'url-choose',\r\n\ttemplateUrl: 'url-choose.html'\r\n})\r\nexport class UrlChoose {\r\n\r\n\tdoAuth: boolean = null;\r\n\tauthCode: string;\r\n\tuser: User = <any>{};\r\n\r\n\tisProd: boolean = true;\r\n\r\n\tconstructor(private viewCtrl: ViewController,\r\n\t\t\t\tprivate navParams: NavParams) {\r\n\t\tthis.isProd = this.navParams.get(\"isProd\");\r\n\t}\r\n\r\n\tionViewWillEnter(){\r\n\t\tthis.isProd = this.navParams.get(\"isProd\");\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\t\r\n\t}\r\n\r\n\tonClick(prod: boolean) {\r\n\t\tthis.isProd = prod;\r\n\t\tthis.viewCtrl.dismiss({prod: prod});\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/login/url-choose.ts","export * from \"./form-summary\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/form-summary/index.ts","import { Component, Input, forwardRef, NgZone, ViewChild } from '@angular/core';\r\nimport { ViewController, NavParams } from \"ionic-angular\";\r\n\r\ndeclare var cordova: any;\r\ndeclare var screen;\r\n\r\n@Component({\r\n\tselector: 'image-viewer',\r\n\ttemplateUrl: 'image-viewer.html',\r\n})\r\nexport class ImageViewer {\r\n\r\n\timage: string;\r\n\r\n\tconstructor(private viewCtrl: ViewController,\r\n\t\t\t\tprivate navParams: NavParams) {\r\n\t\t\r\n\t}\r\n\r\n\tionViewWillEnter(){\r\n\t\tthis.image = this.navParams.get(\"image\");\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tthis.viewCtrl.dismiss(null);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/business-card/image-viewer.ts","import { SimpleChange } from '@angular/core';\r\nimport { FormElement } from \"../../../model\";\r\nimport { FormGroup } from \"@angular/forms\";\r\n\r\nexport class BaseGroupElement {\r\n\r\n\telement: FormElement;\r\n\t\r\n\trootGroup: FormGroup;\r\n\r\n\tmapping: {id: number, identifier: string, label: string}[] = [];\r\n\r\n\tgroup: FormGroup = new FormGroup({});\r\n\r\n\treadonly: boolean = false;\r\n\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tngOnChanges(changes: { [propertyName: string]: SimpleChange }) {\r\n\t\t//console.log(\"group\", this.element, this.group, this.rootGroup);\r\n\t\tif (changes['element'] || changes['rootGroup']){\r\n\t\t\tthis.config();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected config(){\r\n\t\tif(this.element && this.element.mapping && this.rootGroup){\r\n\t\t\tlet elemIdentifier = \"element_\" + this.element.id;\r\n\t\t\tthis.group = <FormGroup> this.rootGroup.get(elemIdentifier);\r\n\t\t\tthis.element.mapping.forEach((map, index)=>{\r\n\t\t\t\tthis.mapping.push({\r\n\t\t\t\t\tid: index+1,\r\n\t\t\t\t\tidentifier: elemIdentifier + \"_\" + (index+1),\r\n\t\t\t\t\tlabel: map.ll_field_unique_identifier\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/base-group-element.ts","import { Component, NgZone, ViewChild, HostListener } from '@angular/core';\r\nimport { SignaturePad } from \"./signature-pad\";\r\nimport { ViewController, Content } from \"ionic-angular\";\r\n\r\n@Component({\r\n\tselector: 'signature-modal',\r\n\ttemplateUrl: 'signature.modal.html'\r\n})\r\nexport class SignatureModal {\r\n\r\n\t@ViewChild(SignaturePad) signaturePad: SignaturePad;\r\n\r\n\t@ViewChild(\"content\") content: Content;\r\n\r\n\tsignaturePadOptions: Object = {\r\n\t\t'minWidth': 5,\r\n\t\t'canvasWidth': 500,\r\n\t\t'canvasHeight': 300\r\n\t};\r\n\r\n\thasSignature: boolean = false;\r\n\r\n\tconstructor(private zone: NgZone, private viewCtrl: ViewController) {\r\n\r\n\t}\r\n\r\n\tionViewDidEnter(){\r\n\t\tsetTimeout(()=>{\r\n\t\t\tlet dim = this.content.getContentDimensions();\r\n\t\t\tlet width = dim.contentWidth - 32;\r\n\t\t\tlet height = dim.contentHeight - /*this.content.contentBottom - this.content.contentTop -*/ 32;\r\n\t\t\tthis.signaturePad.set(\"canvasWidth\", width);\r\n\t\t\tthis.signaturePad.set(\"canvasHeight\", height);\r\n\t\t}, 800);\r\n\t}\r\n\r\n\tngAfterViewInit() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\t@HostListener(\"window:resize\", [\"$event\"])\r\n\tonResize(event){\r\n\t\tlet dim = this.content.getContentDimensions();\r\n\t\tlet width = dim.contentWidth - 32;\r\n\t\tlet height = dim.contentHeight - /*this.content.contentBottom - this.content.contentTop -*/ 32;\r\n\t\tthis.signaturePad.set(\"canvasWidth\", width);\r\n\t\tthis.signaturePad.set(\"canvasHeight\", height);\r\n\t}\r\n\r\n\tdrawComplete() {\r\n\t\tthis.zone.run(()=>{\r\n\t\t\tthis.hasSignature = true;\r\n\t\t});\r\n\t\t//console.log(\"Done\");\r\n\t}\r\n\r\n\tdrawStart() {\r\n\t\t//console.log('begin drawing');\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.signaturePad.clear(); \r\n\t}\r\n\r\n\tcancel() {\r\n\t\tthis.viewCtrl.dismiss(null);\r\n\t}\r\n\r\n\tdone() {\r\n\t\tif(this.hasSignature){\r\n\t\t\tlet canvas = this.signaturePad[\"signaturePad\"]._canvas;\r\n\t\t\tlet img = this.cropSignatureCanvas(canvas);\r\n\t\t\tthis.viewCtrl.dismiss(img);\r\n\t\t}\r\n\t}\r\n\r\n     cropSignatureCanvas(canvas) {\r\n\r\n            // First duplicate the canvas to not alter the original\r\n            var croppedCanvas: any = document.createElement('canvas'),\r\n                croppedCtx    = croppedCanvas.getContext('2d');\r\n\r\n                croppedCanvas.width  = canvas.width;\r\n                croppedCanvas.height = canvas.height;\r\n                croppedCtx.drawImage(canvas, 0, 0);\r\n\r\n            // Next do the actual cropping\r\n\t\t\t\r\n            var w         = croppedCanvas.width,\r\n                h         = croppedCanvas.height,\r\n                pix       = {x:[], y:[]},\r\n                imageData = croppedCtx.getImageData(0,0,croppedCanvas.width,croppedCanvas.height),\r\n                x, y, index;\r\n\r\n            for (y = 0; y < h; y++) {\r\n                for (x = 0; x < w; x++) {\r\n                    index = (y * w + x) * 4;\r\n                    if (imageData.data[index+3] > 0) {\r\n                        pix.x.push(x);\r\n                        pix.y.push(y);\r\n\r\n                    }\r\n                }\r\n            }\r\n            pix.x.sort(function(a,b){return a-b});\r\n            pix.y.sort(function(a,b){return a-b});\r\n            var n = pix.x.length-1;\r\n\r\n            w = pix.x[n] - pix.x[0];\r\n            h = pix.y[n] - pix.y[0];\r\n            var cut = croppedCtx.getImageData(pix.x[0], pix.y[0], w, h);\r\n\r\n            croppedCanvas.width = w;\r\n            croppedCanvas.height = h;\r\n            croppedCtx.putImageData(cut, 0, 0);\r\n\r\n            return croppedCanvas.toDataURL();\r\n        }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/signature/signature.modal.ts","'use strict';\r\n\r\nimport { Component, ElementRef, EventEmitter, Input, Output } from '@angular/core';\r\n\r\ndeclare var require: any;\r\n\r\n@Component({\r\n  template: '<canvas></canvas>',\r\n  selector: 'signature-pad',\r\n})\r\n\r\nexport class SignaturePad {\r\n\r\n  @Input() public options: Object;\r\n  @Output() public onBeginEvent: EventEmitter<boolean>;\r\n  @Output() public onEndEvent: EventEmitter<boolean>;\r\n\r\n  private signaturePad: any;\r\n  private elementRef: ElementRef;\r\n\r\n  constructor(elementRef: ElementRef) {\r\n    // no op\r\n    this.elementRef = elementRef;\r\n    this.options = this.options || {};\r\n    this.onBeginEvent = new EventEmitter();\r\n    this.onEndEvent = new EventEmitter();\r\n  }\r\n\r\n  public ngAfterViewInit(): void {\r\n    let sp: any = require('signature_pad').default;\r\n    let canvas: any = this.elementRef.nativeElement.querySelector('canvas');\r\n\r\n    if ((<any>this.options)['canvasHeight']) {\r\n      canvas.height = (<any>this.options)['canvasHeight'];\r\n    }\r\n\r\n    if ((<any>this.options)['canvasWidth']) {\r\n      canvas.width = (<any>this.options)['canvasWidth'];\r\n    }\r\n\r\n    this.signaturePad = new sp(canvas, this.options);\r\n    this.signaturePad.onBegin = this.onBegin.bind(this);\r\n    this.signaturePad.onEnd = this.onEnd.bind(this);\r\n  }\r\n\r\n  public resizeCanvas(): void {\r\n    // When zoomed out to less than 100%, for some very strange reason,\r\n    // some browsers report devicePixelRatio as less than 1\r\n    // and only part of the canvas is cleared then.\r\n    const ratio: number = Math.max(window.devicePixelRatio || 1, 1);\r\n    const canvas: any = this.signaturePad._canvas;\r\n    canvas.width = canvas.offsetWidth * ratio;\r\n    canvas.height = canvas.offsetHeight * ratio;\r\n    canvas.getContext('2d').scale(ratio, ratio);\r\n    this.signaturePad.clear(); // otherwise isEmpty() might return incorrect value\r\n  }\r\n\r\n  // Returns signature image as data URL (see https://mdn.io/todataurl for the list of possible paramters)\r\n  public toDataURL(imageType?: string, quality?: number): string {\r\n    return this.signaturePad.toDataURL(imageType, quality); // save image as data URL\r\n  }\r\n\r\n  // Draws signature image from data URL\r\n  public fromDataURL(dataURL: string): void {\r\n    this.signaturePad.fromDataURL(dataURL);\r\n  }\r\n\r\n  // Clears the canvas\r\n  public clear(): void {\r\n    this.signaturePad.clear();\r\n  }\r\n\r\n  // Returns true if canvas is empty, otherwise returns false\r\n  public isEmpty(): boolean {\r\n    return this.signaturePad.isEmpty();\r\n  }\r\n\r\n  // Unbinds all event handlers\r\n  public off(): void {\r\n    this.signaturePad.off();\r\n  }\r\n\r\n  // Rebinds all event handlers\r\n  public on(): void {\r\n    this.signaturePad.on();\r\n  }\r\n\r\n  // set an option on the signaturePad - e.g. set('minWidth', 50);\r\n  public set(option: string, value: any): void {\r\n\r\n    switch (option) {\r\n      case 'canvasHeight':\r\n        this.signaturePad._canvas.height = value;\r\n        break;\r\n      case 'canvasWidth':\r\n        this.signaturePad._canvas.width = value;\r\n        break;\r\n      default:\r\n        this.signaturePad[option] = value;\r\n    }\r\n  }\r\n\r\n  // notify subscribers on signature begin\r\n  public onBegin(): void {\r\n    this.onBeginEvent.emit(true);\r\n  }\r\n\r\n  // notify subscribers on signature end\r\n  public onEnd(): void {\r\n    this.onEndEvent.emit(true);\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/signature/signature-pad.ts","import { Injectable } from \"@angular/core\";\r\nimport { Observable, Observer, BehaviorSubject, Subscription } from \"rxjs/Rx\";\r\nimport { Config } from '../config';\r\nimport { DeviceFormMembership, DispatchOrder, Form, FormSubmission, User } from '../model';\r\nimport { AuthenticationRequest } from '../model/protocol';\r\nimport { DBClient } from './db-client';\r\nimport { RESTClient } from './rest-client';\r\nimport { SyncClient } from './sync-client';\r\nimport { PushClient } from \"./push-client\";\r\nimport { Transfer } from '@ionic-native/transfer';\r\nimport { Network } from '@ionic-native/network';\r\ndeclare var cordova: any;\r\n\r\n@Injectable()\r\n/**\r\n * The client to rule them all. The BussinessClient connects all the separate cients and creates\r\n * usable action flows. For example, authentication is a complex flow consisting of the actual auth\r\n * profile photos download, saving the registration response to the local database and starting up \r\n * the initial sync. \r\n * \r\n */\r\nexport class BussinessClient {\r\n\r\n\tprotected networkSource: BehaviorSubject<\"ON\" | \"OFF\">;\r\n    /**\r\n     * Error event\r\n     */\r\n\tnetwork: Observable<\"ON\" | \"OFF\">;\r\n\r\n\tprivate networkOn: Subscription;\r\n\tprivate networkOff: Subscription;\r\n\r\n\tprivate online: boolean = true;\r\n\r\n\tprivate registration: User;\r\n\r\n\tprivate setup: boolean = false;\r\n\r\n\tprivate errorSource: BehaviorSubject<any>;\r\n    /**\r\n     * Error event\r\n     */\r\n\terror: Observable<any>;\r\n\r\n\tconstructor(private db: DBClient, \r\n\t\t\t\tprivate rest: RESTClient, \r\n\t\t\t\tprivate sync: SyncClient, \r\n\t\t\t\tprivate push: PushClient,\r\n\t\t\t\tprivate net: Network,\r\n\t\t\t\tprivate fileTransfer: Transfer) {\r\n\r\n\t\tthis.networkSource = new BehaviorSubject<\"ON\" | \"OFF\">(null);\r\n\t\tthis.network = this.networkSource.asObservable();\r\n\r\n\t\tthis.networkOff = this.net.onDisconnect().subscribe(() => {\r\n\t\t\tconsole.log(\"network was disconnected :-(\");\r\n\t\t\tthis.setOnline(false);\r\n\t\t});\r\n\r\n\t\tthis.networkOn = this.net.onConnect().subscribe(() => {\r\n\t\t\tconsole.log(\"network was connected\");\r\n\t\t\tthis.setOnline(true);\r\n\t\t});\r\n\r\n\t\tthis.errorSource = new BehaviorSubject<any>(null);\r\n\t\tthis.error = this.errorSource.asObservable();\r\n\t}\r\n\r\n\tpublic isOnline(): boolean {\r\n\t\treturn this.online;\r\n\t}\r\n\r\n\tprivate setOnline(val: boolean) {\r\n\t\tthis.online = val;\r\n\t\tthis.networkSource.next(val ? \"ON\" : \"OFF\");\r\n\t\tthis.rest.setOnline(val);\r\n\t\tthis.doAutoSync();\r\n\t}\r\n\r\n\tpublic doAutoSync(){\r\n\t\tif(this.isOnline()){\r\n\t\t\tthis.db.getConfig(\"autoUpload\").subscribe((val) => {\r\n\t\t\t\tif (val+\"\" == \"true\") {\r\n\t\t\t\t\tthis.doSync().subscribe(()=>{\r\n\t\t\t\t\t\tconsole.log(\"Sync up done\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setupNotifications() {\r\n\t\tif (!this.setup) {\r\n\t\t\tthis.setup = true;\r\n\t\t\tthis.push.error.subscribe((err) => {\r\n\t\t\t\tconsole.error(\"notification\", err);\r\n\t\t\t\tconsole.error(JSON.stringify(err));\r\n\t\t\t});\r\n\t\t\tthis.push.notification.subscribe((note) => {\r\n\t\t\t\tif(!note){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.db.getConfig(\"lastSyncDate\").subscribe(time => {\r\n\t\t\t\t\tlet d = new Date();\r\n\t\t\t\t\tif (time) {\r\n\t\t\t\t\t\td.setTime(parseInt(time));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sync.download(time ? d : null,).subscribe(data => {\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t(err) => {\r\n\t\t\t\t\t\t\t//obs.error(err);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tconsole.log(\"sync-ed\");\r\n\t\t\t\t\t\t\tthis.db.saveConfig(\"lastSyncDate\", d.getTime() + \"\").subscribe(() => {\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.push.registration.subscribe((regId)=>{\r\n\t\t\t\tif(!regId){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.db.updateRegistration(regId).subscribe((ok)=>{\r\n\t\t\t\t\tthis.rest.registerDeviceToPush(regId, true).subscribe((done) => {\r\n\t\t\t\t\t\tif (done) {\r\n\t\t\t\t\t\t\tthis.registration.pushRegistered = 1;\r\n\t\t\t\t\t\t\tthis.db.saveRegistration(this.registration).subscribe(() => {\r\n\t\t\t\t\t\t\t\t//done\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.push.initialize();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getRegistration(registerForPush?: boolean): Observable<User> {\r\n\t\treturn new Observable<User>((obs: Observer<User>) => {\r\n\t\t\tthis.db.getRegistration().subscribe((user) => {\r\n\t\t\t\tif (user) {\r\n\t\t\t\t\tthis.registration = user;\r\n\t\t\t\t\tthis.db.setupWorkDb(user.db);\r\n\t\t\t\t\tthis.rest.token = user.access_token;\r\n\t\t\t\t\tobs.next(user);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobs.next(user);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tpublic validateKioskPassword(password: string): Observable<boolean>{\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tthis.db.getConfig(\"kioskModePassword\").subscribe((pwd) => {\r\n\t\t\t\tobs.next(pwd && password && password == pwd);\r\n\t\t\t\tobs.complete();\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tpublic setKioskPassword(password: string): Observable<boolean>{\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tthis.db.saveConfig(\"kioskModePassword\", password).subscribe((done) => {\r\n\t\t\t\tobs.next(done);\r\n\t\t\t\tobs.complete();\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic hasKioskPassword(): Observable<boolean>{\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tthis.db.getConfig(\"kioskModePassword\").subscribe((pwd) => {\r\n\t\t\t\tobs.next(pwd != null && pwd.length > 0);\r\n\t\t\t\tobs.complete();\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic authenticate(authCode): Observable<{ user: User, message: string }> {\r\n\t\treturn new Observable<{ user: User, message: string }>((obs: Observer<{ user: User, message: string }>) => {\r\n\t\t\tlet req = new AuthenticationRequest();\r\n\t\t\treq.invitation_code = authCode;\r\n\t\t\treq.device_name = authCode;\r\n\t\t\tthis.rest.authenticate(req).subscribe(reply => {\r\n\t\t\t\tlet fileTransfer = new Transfer();\r\n\t\t\t\tlet ext = reply.user_profile_picture.split('.').pop();\r\n\t\t\t\tlet target = cordova.file.dataDirectory + 'leadliaison/profile/current.' + ext;\r\n\t\t\t\tthis.fileTransfer.create().download(reply.user_profile_picture, target, true, {})\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\treply.user_profile_picture = result.nativeURL;\r\n\t\t\t\t\t\text = reply.customer_logo.split('.').pop();\r\n\t\t\t\t\t\ttarget = cordova.file.dataDirectory + 'leadliaison/profile/logo.' + ext;\r\n\t\t\t\t\t\tthis.fileTransfer.create().download(reply.user_profile_picture, target, true, {})\r\n\t\t\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\t\t\treply.customer_logo = result.nativeURL;\r\n\t\t\t\t\t\t\t\tthis.registration = reply;\r\n\t\t\t\t\t\t\t\treply.pushRegistered = 1;\r\n\t\t\t\t\t\t\t\treply.is_production = Config.isProd? 1 : 0;\r\n\t\t\t\t\t\t\t\tthis.db.makeAllAccountsInactive().subscribe((done) => {\r\n\t\t\t\t\t\t\t\t\tthis.db.saveRegistration(reply).subscribe((done) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.db.setupWorkDb(reply.db);\r\n\t\t\t\t\t\t\t\t\t\tobs.next({ user: reply, message: \"Done\" });\r\n\t\t\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t\t\t\tlet d = new Date();\r\n\t\t\t\t\t\t\t\t\t\tthis.sync.download(null).subscribe(downloadData => {\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t(err) => {\r\n\t\t\t\t\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.db.saveConfig(\"lastSyncDate\", d.getTime() + \"\").subscribe(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tobs.next({ user: reply, message: \"Done\" });\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tobs.error(\"There was an error retrieving the profile picture\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tobs.error(\"There was an error retrieving the logo picture\")\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}, err =>{\r\n\t\t\t\tobs.error(\"Invalid authentication code\");\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic unregister(user: User): Observable<User> {\r\n\t\treturn new Observable<User>((obs: Observer<User>) => {\r\n\t\t\tthis.rest.unauthenticate(user.access_token).subscribe((done) => {\r\n\t\t\t\tif (done) {\r\n\t\t\t\t\tthis.db.deleteRegistration(user.id + \"\").subscribe(() => {\r\n\t\t\t\t\t\tthis.push.shutdown();\r\n\t\t\t\t\t\tobs.next(user);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobs.error(\"Could not unauthenticate\");\r\n\t\t\t\t}\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getUpdates(): Observable<boolean> {\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tthis.db.getConfig(\"lastSyncDate\").subscribe(time => {\r\n\t\t\t\tthis.db.getConfig(\"getAllContacts\").subscribe( getAllContacts => {\r\n\t\t\t\t\tlet d = new Date();\r\n\t\t\t\t\tif (time) {\r\n\t\t\t\t\t\td.setTime(parseInt(time));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet newD = new Date();\r\n\t\t\t\t\tthis.sync.download(time ? d : null, getAllContacts != \"true\").subscribe(downloadData => {\r\n\t\t\t\t\t\t//console.log(downloadData);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t(err) => {\r\n\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.db.saveConfig(\"lastSyncDate\", newD.getTime() + \"\").subscribe(() => {\r\n\t\t\t\t\t\t\t\tthis.db.saveConfig(\"getAllContacts\", \"true\").subscribe(() => {\r\n\t\t\t\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getForms(): Observable<Form[]> {\r\n\t\treturn this.db.getForms();\r\n\t}\r\n\r\n\tpublic getDispatches(): Observable<DispatchOrder[]> {\r\n\t\treturn this.db.getDispatches();\r\n\t}\r\n\r\n\tpublic getContacts(form: Form): Observable<DeviceFormMembership[]> {\r\n\t\treturn this.db.getMemberships(form.form_id);\r\n\t}\r\n\r\n\tpublic getContact(form: Form, prospectId: number): Observable<DeviceFormMembership> {\r\n\t\treturn this.db.getMembership(form.form_id, prospectId);\r\n\t}\r\n\r\n\tpublic getSubmissions(form: Form, isDispatch): Observable<FormSubmission[]> {\r\n\t\treturn this.db.getSubmissions(form.form_id, isDispatch);\r\n\t}\r\n\r\n\tpublic saveSubmission(sub: FormSubmission, form: Form): Observable<boolean> {\r\n\t\tsub.updateFields(form);\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tthis.db.saveSubmission(sub).subscribe((done)=>{\r\n\t\t\t\tthis.doAutoSync();\r\n\t\t\t\tobs.next(done);\r\n\t\t\t\tobs.complete();\r\n\t\t\t}, (err)=>{\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic doSync(formId?: number): Observable<any> {\r\n\t\treturn new Observable<any>((obs: Observer<any>) => {\r\n\t\t\tif (!this.online) {\r\n\t\t\t\tobs.complete();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.db.getSubmissionsToSend().subscribe((submissions) => {\r\n\t\t\t\tif (submissions.length == 0) {\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet formIds = [];\r\n\r\n\t\t\t\tif (formId > 0) {\r\n\t\t\t\t\tformIds.push(formId);\r\n\t\t\t\t\tvar tmp = [];\r\n\t\t\t\t\tsubmissions.forEach(sub => {\r\n\t\t\t\t\t\tif (sub.form_id + \"\" == formId + \"\") {\r\n\t\t\t\t\t\t\ttmp.push(sub);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsubmissions = tmp;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubmissions.forEach(sub => {\r\n\t\t\t\t\t\tif (formIds.indexOf(sub.form_id) == -1) {\r\n\t\t\t\t\t\t\tformIds.push(sub.form_id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.db.getFormsByIds(formIds).subscribe(forms => {\r\n\t\t\t\t\tthis.sync.sync(submissions, forms).subscribe(submitted => {\r\n\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\tthis.errorSource.next(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}, (err) => {\r\n\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\tthis.errorSource.next(err);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/business-service.ts","import 'intl'\r\nimport 'intl/locale-data/jsonp/en.js'\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app.module';\r\nimport { isDevMode, enableProdMode } from '@angular/core';\r\n\r\n\r\nimport * as dev from \"../config/dev\";\r\nimport * as prod from \"../config/prod\";\r\n//enableProdMode();\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\r\nisDevMode() ? dev.setupConfig() : prod.setupConfig();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./locale-data/complete.js (ignored)\n// module id = 313\n// module chunks = 0","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { IonicApp, IonicModule } from 'ionic-angular';\r\nimport { MyApp } from './app.component';\r\nimport { Login, UrlChoose } from \"../views/login\";\r\nimport { Main } from \"../views/main\";\r\nimport { Dashboard } from \"../views/dashboard\";\r\nimport { Forms } from \"../views/forms\";\r\nimport { Dispatches } from \"../views/dispatches\";\r\nimport { Settings } from \"../views/settings\";\r\nimport { LogView } from \"../views/log\";\r\nimport { FormSummary } from \"../views/form-summary\";\r\nimport { FormReview } from \"../views/form-review\";\r\nimport { FormCapture } from \"../views/form-capture\";\r\nimport { RESTClient} from \"../services/rest-client\";\r\nimport { DBClient } from \"../services/db-client\";\r\nimport { PushClient } from \"../services/push-client\";\r\nimport { SyncClient } from \"../services/sync-client\";\r\nimport { LogClient } from \"../services/log-client\";\r\nimport { BussinessClient } from \"../services/business-service\";\r\nimport { ImageProcessor } from \"../services/image-processor\";\r\nimport { IonPullUpComponent } from '../components/ion-pullup';\r\nimport { OcrSelector } from \"../components/ocr-selector\";\r\nimport { FormView, FormSelectionView } from '../components/form-view';\r\nimport { BusinessCard, Image, SimpleName, Signature, SignatureModal, SignaturePad, Gps, Address, Checkboxes, Radios, Dropdown, Barcoder, ImageViewer} from \"../components/form-view/elements\";\r\nimport { ArrayFilterPipe } from '../pipes/filter-pipe';\r\nimport { FormControlPipe } from '../pipes/form-control-pipe';\r\nimport {ProspectSearch} from \"../views/prospect-search\";\r\nimport { TextMaskModule } from 'angular2-text-mask';\r\n//import { CustomFormsModule } from 'ng2-validation';\r\nimport { Http, HttpModule, RequestOptions, XHRBackend } from '@angular/http';\r\nimport { HttpService } from '../util/http';\r\nimport { MyCurrencyDirective } from \"../util/currency\";\r\nimport { Transfer } from '@ionic-native/transfer';\r\nimport { File } from '@ionic-native/file';\r\nimport { Device } from \"@ionic-native/device\";\r\nimport { Push } from '@ionic-native/push';\r\nimport { Network } from '@ionic-native/network';\r\nimport { Camera } from '@ionic-native/camera';\r\nimport { ImagePicker } from '@ionic-native/image-picker';\r\nimport { SQLite } from '@ionic-native/sqlite';\r\nimport { Clipboard } from '@ionic-native/clipboard';\r\nimport { AppVersion } from '@ionic-native/app-version';\r\nimport { Geolocation } from \"@ionic-native/geolocation\";\r\nimport { BarcodeScanner } from \"@ionic-native/barcode-scanner\";\r\nimport { ScreenOrientation } from '@ionic-native/screen-orientation';\r\n\r\nimport { IonicImageViewerModule } from 'ionic-img-viewer';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n    Login,\r\n    Main,\r\n    Dashboard,\r\n    Forms,\r\n    Dispatches,\r\n    Settings,\r\n    IonPullUpComponent,\r\n    FormSummary,\r\n    FormReview,\r\n    FormCapture,\r\n    ArrayFilterPipe,\r\n\tFormControlPipe,\r\n\tFormView,\r\n\tLogView,\r\n\tSignaturePad,\r\n\tFormSelectionView,\r\n\tBusinessCard, Image, SimpleName, Signature, SignatureModal, Gps, Address, Checkboxes, Radios, Dropdown, Barcoder, ImageViewer, UrlChoose,\r\n\tProspectSearch,\r\n\tOcrSelector,\r\n\tMyCurrencyDirective\r\n  ],\r\n  imports: [\r\n\tBrowserModule,\r\n\tHttpModule,\r\n\tBrowserAnimationsModule,\r\n    IonicModule.forRoot(MyApp),\r\n\tIonicImageViewerModule,\r\n\tTextMaskModule\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n    Login,\r\n    Main,\r\n    Dashboard,\r\n    Forms,\r\n    Dispatches,\r\n    Settings,\r\n    IonPullUpComponent,\r\n    FormSummary,\r\n    FormReview,\r\n    FormCapture,\r\n\tFormView,\t\r\n\tLogView,\r\n\tSignaturePad,\r\n\tFormSelectionView,\r\n\tBusinessCard, Image, SimpleName, Signature, SignatureModal, Gps, Address, Checkboxes, Radios, Dropdown, Barcoder, ImageViewer, UrlChoose,\r\n\tProspectSearch,\r\n\tOcrSelector\r\n  ],\r\n  providers: [\r\n    DBClient,\r\n    RESTClient,\r\n    PushClient,\r\n    SyncClient,\r\n\tLogClient,\r\n\tBussinessClient,\r\n\tImageProcessor,\r\n\tTransfer,\r\n\tFile,\r\n\tDevice,\r\n\tPush,\r\n\tNetwork,\r\n\tCamera,\r\n\tImagePicker,\r\n\tSQLite,\r\n\tClipboard,\r\n\tAppVersion,\r\n\tGeolocation,\r\n\tBarcodeScanner,\r\n\tScreenOrientation,\r\n\t{ provide: Http,\r\n      useFactory: httpFactory,\r\n      deps: [XHRBackend, RequestOptions]\r\n    }\r\n  ]\r\n})\r\nexport class AppModule { }\r\n\r\nexport function httpFactory(backend: XHRBackend, options: RequestOptions) {\r\n\treturn new HttpService(backend, options);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\r\nimport { ViewChild } from '@angular/core';\r\nimport { Nav } from 'ionic-angular';\r\nimport { Platform } from 'ionic-angular';\r\nimport { File } from \"@ionic-native/file\";\r\n\r\nimport { Login } from '../views/login';\r\nimport { Main } from '../views/main';\r\n\r\nimport { DBClient } from \"../services/db-client\";\r\nimport { LogClient } from \"../services/log-client\";\r\nimport { RESTClient } from \"../services/rest-client\";\r\nimport { SyncClient } from \"../services/sync-client\";\r\nimport { BussinessClient } from \"../services/business-service\";\r\nimport { ToastController }  from \"ionic-angular\";\r\nimport { Config } from \"../config\";\r\ndeclare var cordova;\r\n\r\n@Component({\r\n\ttemplate: '<ion-nav #nav></ion-nav>'\r\n})\r\nexport class MyApp {\r\n\r\n\trootPage: any;\r\n\r\n\t@ViewChild(Nav) nav: Nav;\r\n\r\n\tconstructor(\r\n\t\t\tpublic platform: Platform, \r\n\t\t\tprivate db: DBClient, \r\n\t\t\tprivate rest: RESTClient, \r\n\t\t\tprivate client: BussinessClient,\r\n\t\t\tprivate sync: SyncClient,\r\n\t\t\tprivate logClient: LogClient,\r\n\t\t\tprivate file: File,\r\n\t\t\tprivate toast: ToastController) {\r\n\t\tthis.initializeApp();\r\n\t}\r\n\r\n\tinitializeApp() {\r\n\t\tthis.platform.ready().then(() => {\r\n\t\t\tconsole.log(\"ready!\");\t\r\n\t\t\tthis.client.getRegistration(true).subscribe((user) => {\r\n\t\t\t\tif(user){\r\n\t\t\t\t\tConfig.isProd = user.is_production == 1;\r\n\t\t\t\t\tthis.nav.setRoot(Main);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.nav.setRoot(Login);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.hideSplashScreen();\r\n\t\t\t//StatusBar.hide();\r\n\t\t\tif(!window[\"cordova\"]){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//ensure folders exist\r\n\t\t\tthis.file.checkDir(cordova.file.dataDirectory, \"leadliaison\")\r\n\t\t\t.then((exists)=>{\r\n\t\t\t\tthis.file.checkDir(cordova.file.dataDirectory + \"leadliaison/\", \"images\")\r\n\t\t\t\t.then((exists)=>{\r\n\t\t\t\t\tconsole.log(\"Images folder present\");\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tthis.file.createDir(cordova.file.dataDirectory + \"leadliaison/\", \"images\", true)\r\n\t\t\t\t\t.then(ok => {\r\n\t\t\t\t\t\tconsole.log(\"Created images folder\");\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tconsole.error(\"Can't create \" + cordova.file.dataDirectory + \"leadliaison\" + \":\\n\" + JSON.stringify(err, null, 2));\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}).catch(err=>{\r\n\t\t\t\tthis.file.createDir(cordova.file.dataDirectory, \"leadliaison\", true)\r\n\t\t\t\t.then(ok => {\r\n\t\t\t\t\tthis.file.createDir(cordova.file.dataDirectory + \"leadliaison/\", \"images\", true)\r\n\t\t\t\t\t.then(ok => {\r\n\t\t\t\t\t\tconsole.log(\"Created images folder\");\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tconsole.error(\"Can't create \" + cordova.file.dataDirectory + \"leadliaison\" + \":\\n\" + JSON.stringify(err, null, 2));\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.error(\"Can't create \" + cordova.file.dataDirectory + \"leadliaison\" + \":\\n\" + JSON.stringify(err, null, 2));\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tthis.rest.error.subscribe((resp)=>{\r\n\t\t\tif(resp && resp.status == 401){\r\n\t\t\t\tthis.nav.setRoot(Login, {\"unauthorized\": true});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.client.error.subscribe((resp)=>{\r\n\t\t\tlet toaster = this.toast.create({\r\n\t\t\t\tmessage: resp,\r\n\t\t\t\tduration: 5000,\r\n\t\t\t\tposition: \"top\",\r\n\t\t\t\tcssClass: \"error\"\r\n\t\t\t});\r\n\t\t\ttoaster.present();\r\n\t\t});\r\n\r\n\t\tthis.sync.error.subscribe((resp)=>{\r\n\t\t\tlet toaster = this.toast.create({\r\n\t\t\t\tmessage: resp,\r\n\t\t\t\tduration: 5000,\r\n\t\t\t\tposition: \"top\",\r\n\t\t\t\tcssClass: \"error\"\r\n\t\t\t});\r\n\t\t\ttoaster.present();\r\n\t\t});\r\n\t}\r\n\r\n\r\n\thideSplashScreen() {\r\n\t\tif (navigator && navigator[\"splashscreen\"]) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tnavigator[\"splashscreen\"].hide();\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Component } from '@angular/core';\r\nimport { LoadingController, NavController, NavParams, PopoverController, ToastController } from 'ionic-angular';\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { User } from \"../../model\";\r\nimport { Main } from \"../main\";\r\nimport { UrlChoose } from \"./url-choose\";\r\nimport { Config } from \"../../config\";\r\n\r\n@Component({\r\n\tselector: 'login',\r\n\ttemplateUrl: 'login.html'\r\n})\r\nexport class Login {\r\n\r\n\tdoAuth: boolean = null;\r\n\tauthCode: string;\r\n\tuser: User = <any>{};\r\n\r\n\tuseProd: boolean = true;\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate loading: LoadingController,\r\n\t\tprivate toast: ToastController,\r\n\t\tprivate popoverCtrl: PopoverController) {\r\n\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tif(this.navParams.data.unauthorized == true){\r\n\t\t\tthis.doAuth = true;\r\n\t\t\tlet toaster = this.toast.create({\r\n\t\t\t\tmessage: \"Authorization failed. Please obtain a new Authentication Code\",\r\n\t\t\t\tduration: 5000,\r\n\t\t\t\tposition: \"top\",\r\n\t\t\t\tcssClass: \"error\"\r\n\t\t\t});\r\n\t\t\ttoaster.present();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.client.getRegistration()\r\n\t\t\t.subscribe((user) => {\r\n\t\t\t\tif (!user) {\r\n\t\t\t\t\tthis.doAuth = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.doAuth = false;\r\n\t\t\t\t\tthis.user = user;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tonClick() {\r\n\t\tif (this.doAuth) {\r\n\t\t\tif (!this.authCode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet loader = this.loading.create({\r\n\t\t\t\tcontent: \"Authenticating...\"\r\n\t\t\t});\r\n\t\t\tloader.present();\r\n\t\t\tConfig[\"isProd\"] = this.useProd;\r\n\t\t\tthis.client.authenticate(this.authCode).subscribe(\r\n\t\t\t\tdata => {\r\n\t\t\t\t\tloader.setContent(data.message);\r\n\t\t\t\t},\r\n\t\t\t\terr => {\r\n\t\t\t\t\tloader.dismiss();\r\n\t\t\t\t\tlet toaster = this.toast.create({\r\n\t\t\t\t\t\tmessage: err,\r\n\t\t\t\t\t\tduration: 5000,\r\n\t\t\t\t\t\tposition: \"top\",\r\n\t\t\t\t\t\tcssClass: \"error\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttoaster.present();\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tloader.dismiss();\r\n\t\t\t\t\tthis.navCtrl.setRoot(Main);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.navCtrl.setRoot(Main);\r\n\t\t}\r\n\t}\r\n\r\n\tpresentPopover(event){\r\n\t\tlet popover = this.popoverCtrl.create(UrlChoose, {isProd: this.useProd});\r\n\t\tpopover.onDidDismiss((data)=> {\r\n\t\t\tif(data){\r\n\t\t\t\tthis.useProd = data.prod;\r\n\t\t\t}\r\n\t\t});\r\n\t\tpopover.present({\r\n\t\t\tev: event\r\n\t\t});\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/login/login.ts","export const Config: {\r\n\tdevServerUrl: string,\r\n\tserverUrl: string,\r\n\tandroidGcmId: string,\r\n\tisProd: boolean,\r\n\tgetServerUrl(): string\r\n} = {\r\n\tdevServerUrl: \"\",\r\n\tserverUrl: \"\",\r\n\tandroidGcmId: \"\",\r\n\tisProd: true,\r\n\tgetServerUrl: function(){\r\n\t\tlet url =  this.isProd ? this.serverUrl : this.devServerUrl;\r\n\t\treturn url;\r\n\t}\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config/index.ts","import { OnChanges, SimpleChanges } from '@angular/core';\r\nimport { FormElement } from \"../../../model\";\r\nimport { ControlValueAccessor } from \"@angular/forms\";\r\nimport { Observable, Observer } from \"rxjs\";\r\nimport { File } from '@ionic-native/file';\r\n\r\nexport class BaseElement implements OnChanges, ControlValueAccessor {\r\n\r\n\telement: FormElement;\r\n\tname: string;\r\n\tformControlName: string;\r\n\r\n\treadonly: boolean = false;\r\n\r\n\tpropagateChange:any = () => {};\r\n    validateFn:any = () => {};\r\n\r\n\tcurrentVal: any = \"\";\r\n\r\n\tprotected file: File;\r\n\r\n\tconstructor() {\r\n\t\tthis.file = new File();\r\n\t}\r\n\r\n\tngOnChanges(changes: SimpleChanges){\r\n\t\tif(this.element){\r\n\t\t\tthis.name = this.element.id + \"\";\r\n\t\t\tthis.formControlName = this.element[\"identifier\"];\r\n\t\t}\r\n\t}\r\n\r\n\twriteValue(obj: any): void{\r\n\t\tthis.currentVal = obj;\r\n\t}\r\n\t\r\n    registerOnChange(fn: any): void{\r\n\t\tthis.propagateChange = fn;\r\n\t}\r\n\r\n    registerOnTouched(fn: any): void{\r\n\r\n\t}\r\n\t\r\n    setDisabledState?(isDisabled: boolean): void{\r\n\r\n\t}\r\n\r\n\tonChange(value){\r\n\t\tthis.currentVal = value;\r\n\t\tthis.propagateChange(value);\r\n\t}\r\n\r\n\tmoveFile(filePath: string, newFolder: string) : Observable<string>{\r\n\t\treturn new Observable<string>((obs: Observer<string>) => {\r\n\t\t\t\tlet name = filePath.substr(filePath.lastIndexOf(\"/\") + 1).split(\"?\")[0];\r\n\t\t\t\tlet ext = name.split(\".\").pop();\r\n\t\t\t\tlet oldFolder = filePath.substr(0, filePath.lastIndexOf(\"/\"));\r\n\t\t\t\tlet newName = new Date().getTime() + \".\" + ext;\r\n\t\t\t\tlet doMove = (d) =>{\r\n\t\t\t\t\tthis.file.moveFile(oldFolder, name, newFolder, newName)\r\n\t\t\t\t\t.then(entry => {\r\n\t\t\t\t\t\tobs.next(newFolder + \"/\" + newName);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(newFolder.substring(0, newFolder.lastIndexOf(\"/\")), newFolder.substr(newFolder.lastIndexOf(\"/\") + 1));\r\n\t\t\t\tthis.file.createDir(newFolder.substring(0, newFolder.lastIndexOf(\"/\")), newFolder.substr(newFolder.lastIndexOf(\"/\") + 1), false)\r\n\t\t\t\t.then(doMove)\r\n\t\t\t\t.catch(doMove);\r\n\t\t});\r\n\t}\r\n\r\n\twriteFile(newFolder: string, fileName: string, data: any) : Observable<string>{\r\n\t\treturn new Observable<string>((obs: Observer<string>) => {\r\n\t\t\t\tlet name = fileName.split(\"?\")[0];\r\n\t\t\t\tlet ext = name.split(\".\").pop();\r\n\t\t\t\tlet newName = new Date().getTime() + \".\" + ext;\r\n\t\t\t\tlet doWrite = (d) =>{\r\n\t\t\t\t\tthis.file.writeFile(newFolder, newName, data, {replace:true})\r\n\t\t\t\t\t.then(entry => {\r\n\t\t\t\t\t\tobs.next(newFolder + \"/\" + newName);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(newFolder.substring(0, newFolder.lastIndexOf(\"/\")), newFolder.substr(newFolder.lastIndexOf(\"/\") + 1));\r\n\t\t\t\tthis.file.createDir(newFolder.substring(0, newFolder.lastIndexOf(\"/\")), newFolder.substr(newFolder.lastIndexOf(\"/\") + 1), false)\r\n\t\t\t\t.then(doWrite)\r\n\t\t\t\t.catch(doWrite);\r\n\t\t});\r\n\t}\r\n\r\n\tcopyFile(filePath: string, newFolder: string) : Observable<string>{\r\n\t\treturn new Observable<string>((obs: Observer<string>) => {\r\n\t\t\t\tlet name = filePath.substr(filePath.lastIndexOf(\"/\") + 1).split(\"?\")[0];\r\n\t\t\t\tlet ext = name.split(\".\").pop();\r\n\t\t\t\tlet oldFolder = filePath.substr(0, filePath.lastIndexOf(\"/\"));\r\n\t\t\t\tlet newName = new Date().getTime() + \".\" + ext;\r\n\t\t\t\tlet doCopy = (d) =>{\r\n\t\t\t\t\tthis.file.copyFile(oldFolder, name, newFolder, newName)\r\n\t\t\t\t\t.then(entry => {\r\n\t\t\t\t\t\tobs.next(newFolder + \"/\" + newName);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(newFolder.substring(0, newFolder.lastIndexOf(\"/\")), newFolder.substr(newFolder.lastIndexOf(\"/\") + 1));\r\n\t\t\t\tthis.file.createDir(newFolder.substring(0, newFolder.lastIndexOf(\"/\")), newFolder.substr(newFolder.lastIndexOf(\"/\") + 1), false)\r\n\t\t\t\t.then(doCopy)\r\n\t\t\t\t.catch(doCopy);\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/base-element.ts","import { BarcodeResponse, ItemData } from '../model/barcode';\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Headers, Response, Http, URLSearchParams } from \"@angular/http\";\r\nimport { Config } from \"../config\";\r\nimport { Observable, Observer, BehaviorSubject } from \"rxjs/Rx\";\r\nimport { User, Form, Dispatch, DeviceFormMembership, FormSubmission, SubmissionStatus } from \"../model\";\r\nimport { AuthenticationRequest, DataResponse, RecordsResponse, BaseResponse, FormSubmitResponse, SubmissionResponse, FileUploadRequest, FileUploadResponse, FileResponse } from \"../model/protocol\";\r\nimport { Device } from \"@ionic-native/device\";\r\n\r\n@Injectable()\r\nexport class RESTClient {\r\n\r\n\tprotected errorSource: BehaviorSubject<any>;\r\n    /**\r\n     * Error event\r\n     */\r\n\terror: Observable<any>;\r\n\r\n\ttoken: string;\r\n\r\n\tprivate online = true;\r\n\tprivate device: Device;\r\n\r\n\tconstructor(private http: Http) {\r\n\t\tthis.errorSource = new BehaviorSubject<any>(null);\r\n\t\tthis.error = this.errorSource.asObservable();\r\n\t\tthis.device = new Device();\r\n\t}\r\n\r\n\tpublic setOnline(val : boolean){\r\n\t\tthis.online = val;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @returns Observable\r\n\t */\r\n\tpublic authenticate(req: AuthenticationRequest): Observable<User> {\r\n\t\treq.device_platform = <any>this.device.platform;\r\n\t\treq.device_model = this.device.model;\r\n\t\treq.device_manufacture = this.device.manufacturer;\r\n\t\treq.device_os_version = this.device.version;\r\n\t\treq.device_uuid = this.device.uuid;\r\n\t\treturn this.call<DataResponse<User>>(\"POST\", \"/authenticate.json\", req)\r\n\t\t.map(resp => {\r\n\t\t\tif (resp.status != \"200\") {\r\n\t\t\t\tthis.errorSource.next(resp);\r\n\t\t\t}\r\n\t\t\tthis.token = resp.data.access_token;\r\n\t\t\treturn resp.data;\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @returns Observable\r\n\t */\r\n\tpublic getForms(offset: number = 0, name?: string, updatedAt?: Date, createdAt?: Date): Observable<RecordsResponse<Form>> {\r\n\t\tvar opts: any = {\r\n\t\t\tform_type: \"device\"\r\n\t\t};\r\n\t\tif (name) {\r\n\t\t\topts.name = name;\r\n\t\t}\r\n\t\tif (updatedAt) {\r\n\t\t\topts.updated_at = updatedAt.toISOString().split(\".\")[0] + \"+00:00\";\r\n\t\t}\r\n\t\tif (createdAt) {\r\n\t\t\topts.created_at = createdAt.toISOString().split(\".\")[0] + \"+00:00\";\r\n\t\t}\r\n\t\tif(offset > 0){\r\n\t\t\topts.offset = offset;\r\n\t\t}\r\n\t\treturn this.call<RecordsResponse<Form>>(\"GET\", \"/forms.json\", opts).map(resp => {\r\n\t\t\tif (resp.status != \"200\") {\r\n\t\t\t\tthis.errorSource.next(resp);\r\n\t\t\t}\r\n\t\t\tlet result: Form[] = [];\r\n\t\t\tresp.records.forEach(record => {\r\n\t\t\t\tlet f = new Form();\r\n\t\t\t\tObject.keys(record).forEach(key=>{\r\n\t\t\t\t\tf[key] = record[key];\r\n\t\t\t\t});\r\n\t\t\t\tf.computeIdentifiers();\r\n\t\t\t\tresult.push(f);\r\n\t\t\t});\r\n\t\t\tresp.records = result;\r\n\t\t\treturn resp;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getAllForms(lastSyncDate: Date) : Observable<Form[]>{\r\n\t\tlet opts: any = {\r\n\t\t\tform_type: \"device\"\r\n\t\t};\r\n\t\tif(lastSyncDate){\r\n\t\t\topts.updated_at = lastSyncDate.toISOString().split(\".\")[0] + \"+00:00\";\r\n\t\t}\r\n\t\treturn this.getAll<Form>(\"/forms.json\", opts).map(resp => {\r\n\t\t\tlet result: Form[] = [];\r\n\t\t\tresp.forEach(record => {\r\n\t\t\t\tlet f = new Form();\r\n\t\t\t\tObject.keys(record).forEach(key=>{\r\n\t\t\t\t\tf[key] = record[key];\r\n\t\t\t\t});\r\n\t\t\t\tresult.push(f);\r\n\t\t\t\tf.computeIdentifiers();\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @returns Observable\r\n\t */\r\n\tpublic getDispatches(offset: number = 0, lastSync?: Date): Observable<RecordsResponse<Dispatch>> {\r\n\t\tvar opts: any = {\r\n\t\t};\r\n\r\n\t\tif (lastSync) {\r\n\t\t\topts.updated_at = lastSync.toISOString().split(\".\")[0] + \"+00:00\";;\r\n\t\t}\r\n\t\tif(offset > 0){\r\n\t\t\topts.offset = offset;\r\n\t\t}\r\n\t\treturn this.call<RecordsResponse<Dispatch>>(\"GET\", \"/dispatches.json\", opts)\r\n\t\t\t.map(resp => {\r\n\t\t\t\tif (resp.status != \"200\") {\r\n\t\t\t\t\tthis.errorSource.next(resp);\r\n\t\t\t\t}\r\n\t\t\t\treturn resp;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic getAllDispatches(lastSyncDate: Date) : Observable<Dispatch[]>{\r\n\t\tlet opts: any = {};\r\n\t\tif(lastSyncDate){\r\n\t\t\topts.updated_at = lastSyncDate.toISOString().split(\".\")[0] + \"+00:00\";;\r\n\t\t}\r\n\t\treturn this.getAll<Dispatch>(\"/dispatches.json\", opts)\r\n\t\t\t\t.map(resp => {\r\n\t\t\t\t\tresp.forEach((dispatch) => {\r\n\t\t\t\t\t\tdispatch.orders.forEach((order)=>{\r\n\t\t\t\t\t\t\tlet form: Form = null;\r\n\t\t\t\t\t\t\tdispatch.forms.forEach((f)=>{\r\n\t\t\t\t\t\t\t\tif(f.form_id == order.form_id){\r\n\t\t\t\t\t\t\t\t\torder.form = f;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\torder.form = form;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn resp;\r\n\t\t\t\t});\r\n\t}\r\n\r\n\tpublic fetchBarcodeData(barcodeId: string, providerId: string): Observable<ItemData[]>{\r\n\t\treturn this.call<BarcodeResponse>(\"GET\", \"/barcode/scan.json\", {barcode_id: barcodeId, provider_id: providerId})\r\n\t\t.map( resp => {\r\n\t\t\treturn resp.info;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getSubmissions(form: Form, lastSyncDate: Date) : Observable<FormSubmission[]>{\r\n\t\tlet opts: any = {\r\n\t\t\tform_id: form.id,\r\n\t\t\tform_type: \"device\"\r\n\t\t};\r\n\t\tif(lastSyncDate){\r\n\t\t\topts.date_from = lastSyncDate.toISOString().split(\".\")[0] + \"+00:00\";;\r\n\t\t}\r\n\t\tlet f = form;\r\n\t\treturn this.getAll<SubmissionResponse>(\"/forms/submissions.json\", opts)\r\n\t\t\t\t.map(resp => {\r\n\t\t\t\t\tlet data: FormSubmission[] = [];\r\n\t\t\t\t\tresp.forEach((item: SubmissionResponse) => {\r\n\t\t\t\t\t\tlet entry: FormSubmission = new FormSubmission();\r\n\t\t\t\t\t\tentry.id = item.activity_id;\r\n\t\t\t\t\t\tentry.activity_id = item.activity_id;\r\n\t\t\t\t\t\tentry.status = SubmissionStatus.Submitted;\r\n\t\t\t\t\t\tentry.prospect_id = parseInt(item.prospect_id+\"\");\r\n\t\t\t\t\t\tentry.hold_request_id = item.hold_request_id;\r\n\t\t\t\t\t\tentry.email = item.email;\r\n\t\t\t\t\t\tentry.form_id = parseInt(form.id);\r\n\t\t\t\t\t\titem.data.forEach((dataItem) => {\r\n\t\t\t\t\t\t\tif(!dataItem.value){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet fieldName = \"element_\" + dataItem.element_id;\r\n\t\t\t\t\t\t\tlet field = form.getFieldById(dataItem.element_id);\r\n\t\r\n\t\t\t\t\t\t\tswitch(field.type){\r\n\t\t\t\t\t\t\t\tcase \"simple_name\":\r\n\t\t\t\t\t\t\t\tcase \"address\":\r\n\t\t\t\t\t\t\t\t\tlet vals = dataItem.value.split(\" \");\r\n\t\t\t\t\t\t\t\t\tif(field.type == \"address\"){\r\n\t\t\t\t\t\t\t\t\t\tif(vals.length > 6){\r\n\t\t\t\t\t\t\t\t\t\t\tlet tmp = [];\r\n\t\t\t\t\t\t\t\t\t\t\tvals.forEach((val, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(index <= 6){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttmp.push(val);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttmp[tmp.length - 1] += \" \" + val;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tvals = tmp;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvals.forEach((value, index) => {\r\n\t\t\t\t\t\t\t\t\t\tentry.fields[fieldName + \"_\" + (index+1)] = value;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"image\":\r\n\t\t\t\t\t\t\t\tcase \"business_card\":\r\n\t\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\t\tlet obj = JSON.parse(dataItem.value);\r\n\t\t\t\t\t\t\t\t\t\tif(typeof(obj) == \"string\" ){\r\n\t\t\t\t\t\t\t\t\t\t\tobj = JSON.parse(obj);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tentry.fields[fieldName] = obj;\r\n\t\t\t\t\t\t\t\t\t\tfor(var key in <any>entry.fields[fieldName]){\r\n\t\t\t\t\t\t\t\t\t\t\tentry.fields[fieldName][key] = entry.fields[fieldName][key].replace(/\\\\/g, \"\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"Can't parse \" + field.type + \" for submission \" + entry.activity_id)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"checkbox\":\r\n\t\t\t\t\t\t\t\t\tentry.fields[fieldName] = dataItem.value.split(\";\");\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tentry.fields[fieldName] = dataItem.value;\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tentry.first_name = \"\";\r\n\t\t\t\t\t\tentry.last_name = \"\";\r\n\t\t\t\t\t\tentry.company = \"\";\r\n\t\t\t\t\t\tentry.phone = \"\";\r\n\t\t\t\t\t\tentry.updateFields(f);\r\n\t\t\t\t\t\tdata.push(entry);\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t});\r\n\t}\r\n\r\n\tpublic getAvailableFormIds(): Observable<number[]>{\r\n\t\treturn this.getAll<number>(\"/device/available_forms.json\", {})\r\n\t\t.map(response => {\r\n\t\t\tlet d: number[] = [];\r\n\t\t\tif(Array.isArray(response)){\r\n\t\t\t\tif(response.length > 0){\r\n\t\t\t\t\tif(Number.isInteger(response[0])){\r\n\t\t\t\t\t\td = response;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tObject.keys(response[0]).forEach(key => {\r\n\t\t\t\t\t\t\td.push(response[0][key]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tObject.keys(response).forEach(key => {\r\n\t\t\t\t\td.push(response[key]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn d;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getAllSubmissions(forms: Form[], lastSync?: Date, newFormIds?: number[]) : Observable<FormSubmission[]>{\r\n\t\treturn new Observable<FormSubmission[]>((obs: Observer<FormSubmission[]>) => {\r\n\t\t\tvar result: FormSubmission[] = [];\r\n\t\t\tif(!forms || forms.length == 0){\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar index = 0;\r\n\t\t\tlet syncDate =  newFormIds && newFormIds.length > 0 && newFormIds.indexOf(forms[index].form_id) > -1 ? null : lastSync;\r\n\t\t\tlet handler = (data: FormSubmission[])=>{\r\n\t\t\t\tresult.push.apply(result, data);\r\n\t\t\t\tindex++;\r\n\t\t\t\tif(index < forms.length){\r\n\t\t\t\t\tsyncDate =  newFormIds && newFormIds.length > 0 && newFormIds.indexOf(forms[index].form_id) > -1 ? null : lastSync;\r\n\t\t\t\t\tthis.getSubmissions(forms[index], syncDate).subscribe(handler);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tthis.getSubmissions(forms[index], syncDate).subscribe(handler);\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @returns Observable\r\n\t */\r\n\tpublic registerDeviceToPush(device_token: string, receiveNotifications: boolean = true): Observable<boolean> {\r\n\t\treturn this.call<BaseResponse>(\"POST\", '/devices/register_to_notifications.json', {\r\n\t\t\tdevice_token: device_token,\r\n\t\t\tis_allow_to_receive_notification: receiveNotifications\r\n\t\t})\r\n\t\t\t.map((resp: BaseResponse) => {\r\n\t\t\t\tif (resp.status == \"200\") {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.errorSource.next(resp);\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic unauthenticate(token: string): Observable<boolean>{\r\n\t\treturn this.call<BaseResponse>(\"POST\", '/devices/unauthorize.json', JSON.stringify(\"\"))\r\n\t\t.map((resp: BaseResponse) => {\r\n\t\t\t\tif (resp.status == \"200\") {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.errorSource.next(resp);\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @returns Observable\r\n\t */\r\n\tpublic getDeviceFormMemberships(form_id: number, lastSync?: Date): Observable<RecordsResponse<DeviceFormMembership>> {\r\n\t\tvar opts: any = {\r\n\t\t\tform_id: form_id\r\n\t\t};\r\n\t\tif (lastSync) {\r\n\t\t\topts.last_sync_date = lastSync.toISOString().split(\".\")[0] + \"+00:00\";;\r\n\t\t}\r\n\t\treturn this.call<RecordsResponse<DeviceFormMembership>>(\"GET\", \"/forms/memberships.json\", opts).map(resp => {\r\n\t\t\tif (resp.status != \"200\") {\r\n\t\t\t\tthis.errorSource.next(resp);\r\n\t\t\t}\r\n\t\t\treturn resp;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getAllDeviceFormMemberships(forms: Form[], lastSync?: Date, newFormIds?: number[]) : Observable<DeviceFormMembership[]>{\r\n\t\treturn new Observable<DeviceFormMembership[]>((obs: Observer<DeviceFormMembership[]>) => {\r\n\t\t\tvar result: DeviceFormMembership[] = [];\r\n\t\t\tconsole.log(forms);\r\n\t\t\tif(!forms || forms.length == 0){\r\n\t\t\t\tconsole.log(\"No contacts 1\");\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar index = 0;\r\n\t\t\tlet handler = (data: DeviceFormMembership[])=>{\r\n\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\titem.form_id = forms[index].form_id;\r\n\t\t\t\t});\r\n\t\t\t\tresult.push.apply(result, data);\r\n\t\t\t\tindex++;\r\n\t\t\t\tif(index < forms.length){\r\n\t\t\t\t\tdoTheCall();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet doTheCall = ()=>{\r\n\t\t\t\tlet params = <any>{\r\n\t\t\t\t\tform_id: forms[index].form_id\r\n\t\t\t\t}\r\n\t\t\t\tlet syncDate =  newFormIds && newFormIds.length > 0 && newFormIds.indexOf(forms[index].form_id) > -1 ? null : lastSync;\r\n\t\t\t\tif(syncDate){\r\n\t\t\t\t\tparams.last_sync_date = syncDate.toISOString().split(\".\")[0] + \"+00:00\";\r\n\t\t\t\t}\r\n\t\t\t\tthis.getAll<DeviceFormMembership>(\"/forms/memberships.json\", params).subscribe(handler);\r\n\t\t\t}\r\n\t\t\tdoTheCall();\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @returns Observable\r\n\t */\r\n\tpublic submitForm(data: FormSubmission): Observable<{id:number,message:string, hold_request_id:number}> {\r\n\t\treturn this.call<BaseResponse>(\"POST\", \"/forms/submit.json\", data)\r\n\t\t\t.map((resp: FormSubmitResponse) => {\r\n\t\t\t\tif (resp.status == \"200\") {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: resp.activity_id,\r\n\t\t\t\t\t\thold_request_id: resp.hold_request_id,\r\n\t\t\t\t\t\tmessage: \"\"\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tthis.errorSource.next(resp);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\tid: resp.activity_id,\r\n\t\t\t\t\t\tmessage: resp.message,\r\n\t\t\t\t\t\thold_request_id: null\r\n\t\t\t\t\t};\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic submitForms(data: FormSubmission[]) : Observable<FormSubmission[]> {\r\n\t\treturn new Observable<FormSubmission[]>( (obs : Observer<FormSubmission[]>) => {\r\n\t\t\tvar index = 0;\r\n\t\t\tlet result = [];\r\n\t\t\tif(!data || data.length == 0){\r\n\t\t\t\tobs.next(null);\r\n\t\t\t\tobs.complete();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet handler = (reply: {id : number, message: string}) =>{\r\n\t\t\t\tif(reply.id > 0){\r\n\t\t\t\t\tresult.push(data[index]);\r\n\t\t\t\t}\r\n\t\t\t\tindex++;\r\n\t\t\t\tif(index >= data.length){\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.submitForm(data[index]).subscribe(handler, handler);\r\n\t\t\t\t}, 150);\r\n\t\t\t}\r\n\t\t\tthis.submitForm(data[index]).subscribe(handler, handler);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic uploadFiles(req: FileUploadRequest) : Observable<FileResponse[]>{\r\n\t\treturn new Observable<FileResponse[]>((obs: Observer<FileResponse[]>) => {\r\n\t\t\tthis.call<FileUploadResponse>(\"POST\", \"/drive/upload.json\", req)\r\n\t\t\t.subscribe((data: FileUploadResponse) => {\r\n\t\t\t\tif (data.status == \"200\") {\r\n\t\t\t\t\tobs.next(data.files);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}\r\n\t\t\t\tif(data == null){\r\n\t\t\t\t\tobs.error(data.message);\r\n\t\t\t\t}\r\n\t\t\t}, (err) => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getAll<T>(relativeUrl: string, content: any) : Observable<T[]>{\r\n\t\tlet response = new Observable<T[]>((obs: Observer<T[]>) => {\r\n\t\t\tvar offset = 0;\r\n\t\t\tvar result: T[] = [];\r\n\t\t\tlet handler = (data: RecordsResponse<T>)=>{\r\n\t\t\t\tvar records = [];\r\n\t\t\t\tif(!data.records){\r\n\t\t\t\t\t\r\n\t\t\t\t}else if(Array.isArray(data.records)){\r\n\t\t\t\t\trecords = data.records;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trecords = [data.records];\r\n\t\t\t\t}\r\n\t\t\t\tresult.push.apply(result, records);\r\n\t\t\t\tif(data.count + offset < data.total_count){\r\n\t\t\t\t\toffset += data.count;\r\n\t\t\t\t\tdoTheCall();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet doTheCall = ()=>{\r\n\t\t\t\tlet params = Object.assign({}, content);\r\n\t\t\t\tif(offset > 0){\r\n\t\t\t\t\tparams.offset = offset;\r\n\t\t\t\t}\r\n\t\t\t\tthis.call<RecordsResponse<T>>(\"GET\", relativeUrl, params).subscribe(handler);\r\n\t\t\t}\r\n\t\t\tdoTheCall();\r\n\t\t\t\r\n\t\t});\r\n\t\treturn response;\r\n\t}\r\n\r\n\tprivate call<T>(method: String, relativeUrl: string, content: any): Observable<T> {\r\n\t\tlet response = new Observable<T>((responseObserver: Observer<T>) => {\r\n\t\t\tvar sub: Observable<Response> = null;\r\n\t\t\tlet url = Config.getServerUrl() + relativeUrl;\r\n\t\t\tlet params = new URLSearchParams();\r\n\t\t\tparams.set(\"access_token\", this.token);\r\n\t\t\tvar opts = {\r\n\t\t\t\theaders: this.getHeaders(),\r\n\t\t\t\tsearch: params\r\n\t\t\t};\r\n\t\t\tvar search = \"?access_token=\" + encodeURIComponent(this.token);\r\n\t\t\tfor(let field in content){\r\n\t\t\t\tsearch += \"&\" + encodeURIComponent(field) + \"=\" + encodeURIComponent(content[field]);\r\n\t\t\t}\r\n\t\t\tswitch (method) {\r\n\t\t\t\tcase \"GET\":\r\n\t\t\t\t\tfor(let field in content){\r\n\t\t\t\t\t\topts.search.set(field, content[field]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete opts.search;\r\n\t\t\t\t\tsub = this.http.get(url + search, opts);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"POST\":\r\n\t\t\t\t\tsub = this.http.post(url, JSON.stringify(content), opts);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"DELETE\":\t\t\t\t\t\r\n\t\t\t\t\tfor(let field in content){\r\n\t\t\t\t\t\topts.search.set(field, content[field]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete opts.search;\r\n\t\t\t\t\tsub = this.http.delete(url + search, opts);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"PATCH\":\r\n\t\t\t\t\tsub = this.http.patch(url, content, opts);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tsub\r\n\t\t\t\t.map((response: any) => {\r\n\t\t\t\t\tif (response._body) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\treturn response.json();\r\n\t\t\t\t\t\t} catch (e) { }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t})\r\n\t\t\t\t.subscribe(\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\tresponseObserver.next(response as T);\r\n\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t},\r\n\t\t\t\t(err) => {\r\n\t\t\t\t\tthis.errorSource.next(err);\r\n\t\t\t\t\tresponseObserver.error(err);\r\n\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t});\r\n\t\treturn response;\r\n\t}\r\n\r\n\tprivate getHeaders() {\r\n\t\tvar headers = new Headers();\r\n\t\theaders.append('Content-Type', 'application/json');\r\n\t\treturn headers;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/rest-client.ts","import { Injectable } from \"@angular/core\";\r\nimport { Observable, BehaviorSubject, Observer } from \"rxjs/Rx\";\r\nimport { DBClient } from './db-client';\r\nimport { RESTClient } from './rest-client';\r\nimport { Transfer } from '@ionic-native/transfer';\r\nimport { FileEntry, File } from '@ionic-native/file';\r\nimport { SyncStatus, BarcodeStatus, FormElementType, Form, Dispatch, DispatchOrder, DeviceFormMembership, FormSubmission, SubmissionStatus } from \"../model\";\r\nimport { FileUploadRequest, FileInfo } from \"../model/protocol\";\r\ndeclare var cordova: any;\r\n\r\n@Injectable()\r\nexport class SyncClient {\r\n\r\n\tprivate errorSource: BehaviorSubject<any>;\r\n    /**\r\n     * Error event\r\n     */\r\n\terror: Observable<any>;\r\n\r\n\tprivate syncSource: BehaviorSubject<SyncStatus[]>;\r\n    /**\r\n     * Sync update event\r\n     */\r\n\tonSync: Observable<SyncStatus[]>;\r\n\r\n\tprivate entitySyncedSource: BehaviorSubject<string>;\r\n    /**\r\n     * Sync update event\r\n     */\r\n\tentitySynced: Observable<string>;\r\n\r\n\tprivate _isSyncing: boolean = false;\r\n\r\n\tprivate lastSyncStatus: SyncStatus[];\r\n\r\n\tprivate dataUrlRegexp: RegExp = /^\\s*data:([a-z]+\\/[a-z]+(;[a-z\\-]+\\=[a-z\\-]+)?)?(;base64)?,[a-z0-9\\!\\$\\&\\'\\,\\(\\)\\*\\+\\,\\;\\=\\-\\.\\_\\~\\:\\@\\/\\?\\%\\s]*\\s*$/i;\r\n\r\n\tconstructor(private rest: RESTClient, private db: DBClient, private file: File, private transfer: Transfer) {\r\n\t\tthis.errorSource = new BehaviorSubject<any>(null);\r\n\t\tthis.error = this.errorSource.asObservable();\r\n\t\tthis.syncSource = new BehaviorSubject<SyncStatus[]>(null);\r\n\t\tthis.onSync = this.syncSource.asObservable();\r\n\t\tthis.entitySyncedSource = new BehaviorSubject<string>(null);\r\n\t\tthis.entitySynced = this.entitySyncedSource.asObservable();\r\n\r\n\t}\r\n\r\n\tpublic isSyncing(): boolean {\r\n\t\treturn this._isSyncing;\r\n\t}\r\n\r\n\tpublic getLastSync(): SyncStatus[] {\r\n\t\treturn this.lastSyncStatus;\r\n\t}\r\n\r\n\tpublic download(lastSyncDate: Date, shouldDownloadAllContacts?: boolean): Observable<DownloadData> {\r\n\t\treturn new Observable<DownloadData>((obs: Observer<DownloadData>) => {\r\n\t\t\tconsole.log(\"Should download all contacts \" + shouldDownloadAllContacts);\r\n\t\t\tlet result = new DownloadData();\r\n\t\t\tvar map: { [key: string]: SyncStatus } = {\r\n\t\t\t\tforms: new SyncStatus(true, false, 0, \"Forms\", 10),\r\n\t\t\t\tcontacts: new SyncStatus(false, false, 0, \"Contacts\", 0),\r\n\t\t\t\tdispatches: new SyncStatus(false, false, 0, \"Dispatches\", 0),\r\n\t\t\t\tsubmissions: new SyncStatus(false, false, 0, \"Submissions\", 0)\r\n\t\t\t}\r\n\t\t\tthis._isSyncing = true;\r\n\t\t\tthis.lastSyncStatus = [\r\n\t\t\t\tmap[\"forms\"],\r\n\t\t\t\tmap[\"contacts\"],\r\n\t\t\t\tmap[\"dispatches\"],\r\n\t\t\t\tmap[\"submissions\"]\r\n\t\t\t];\r\n\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\tthis.downloadForms(lastSyncDate, map, result).subscribe((forms) => {\r\n\t\t\t\tobs.next(result);\r\n\t\t\t\tthis.db.getForms().subscribe(forms => {\r\n\t\t\t\t\tlet filteredForms = [];\r\n\t\t\t\t\tlet current = new Date();\r\n\t\t\t\t\tforms.forEach(form => {\r\n\t\t\t\t\t\tif (new Date(form.archive_date) > current) {\r\n\t\t\t\t\t\t\tfilteredForms.push(form);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"Form \" + form.name + \"(\" + form.id + \") is past it's expiration date. Filtering it out\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.downloadSubmissions(filteredForms, lastSyncDate, map, result).subscribe(() => {\r\n\t\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\t\tthis.downloadDispatches(lastSyncDate, map, result).subscribe(() => {\r\n\t\t\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\t\t\tconsole.log(\"Downloading contacts 1\");\r\n\t\t\t\t\t\t\tthis.downloadContacts(filteredForms, shouldDownloadAllContacts ? null : lastSyncDate, map, result).subscribe(() => {\r\n\t\t\t\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t\tthis.syncCleanup();\r\n\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\t\tthis.syncCleanup();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\tthis.syncCleanup();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\tthis.syncCleanup();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}, (err) => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t\tthis.syncCleanup();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate syncCleanup(){\r\n\t\tthis._isSyncing = false;\r\n\t\tthis.syncSource.complete();\r\n\t\tthis.syncSource = new BehaviorSubject<SyncStatus[]>(null);\r\n\t\tthis.onSync = this.syncSource.asObservable();\r\n\t}\r\n\r\n\tpublic sync(submissions: FormSubmission[], forms: Form[]): Observable<FormSubmission[]> {\r\n\t\treturn new Observable<FormSubmission[]>(obs => {\r\n\t\t\tthis._isSyncing = true;\r\n\t\t\tvar result = [];\r\n\t\t\tvar map: { [key: number]: FormMapEntry } = {};\r\n\t\t\tthis.lastSyncStatus = [];\r\n\t\t\tforms.forEach(form => {\r\n\t\t\t\tmap[form.form_id + \"\"] = {\r\n\t\t\t\t\tform: form,\r\n\t\t\t\t\turlFields: form.getUrlFields(),\r\n\t\t\t\t\tsubmissions: [],\r\n\t\t\t\t\tstatus: new SyncStatus(false, false, form.form_id, form.name)\r\n\t\t\t\t};\r\n\t\t\t\tthis.lastSyncStatus.push(map[form.form_id].status);\r\n\t\t\t});\r\n\t\t\tsubmissions.forEach(sub => {\r\n\t\t\t\tmap[sub.form_id + \"\"].submissions.push(sub);\r\n\t\t\t});\r\n\r\n\t\t\tlet formIds = Object.keys(map);\r\n\t\t\tlet index = 0;\r\n\t\t\tmap[formIds[index]].status.loading = true;\r\n\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\tlet onError = (err) => {\r\n\t\t\t\tthis._isSyncing = false;\r\n\t\t\t\tthis.syncSource.complete();\r\n\t\t\t\tthis.syncSource = new BehaviorSubject<SyncStatus[]>(null);\r\n\t\t\t\tthis.onSync = this.syncSource.asObservable();\r\n\t\t\t\tobs.error(err);\r\n\t\t\t\tthis.errorSource.next(err);\r\n\t\t\t};\r\n\t\t\tlet handler = (submitted: FormSubmission[]) => {\r\n\t\t\t\tresult.push.apply(result, submitted);\r\n\t\t\t\tmap[formIds[index]].status.complete = true;\r\n\t\t\t\tmap[formIds[index]].status.loading = false;\r\n\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\tindex++;\r\n\t\t\t\tif (index >= formIds.length) {\r\n\t\t\t\t\tthis._isSyncing = false;\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t\tthis.syncSource.complete();\r\n\t\t\t\t\tthis.syncSource = new BehaviorSubject<SyncStatus[]>(null);\r\n\t\t\t\t\tthis.onSync = this.syncSource.asObservable();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.doSubmitAll(map[formIds[index]]).subscribe(handler, onError);\r\n\t\t\t\t}, 500);\r\n\t\t\t};\r\n\t\t\tthis.doSubmitAll(map[formIds[index]]).subscribe(handler, onError);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate doSubmitAll(data: FormMapEntry): Observable<FormSubmission[]> {\r\n\t\treturn new Observable<FormSubmission[]>((obs: Observer<FormSubmission[]>) => {\r\n\t\t\tlet result = [];\r\n\t\t\tvar index = 0;\r\n\t\t\tlet handler = () => {\r\n\t\t\t\tif (index == data.submissions.length) {\r\n\t\t\t\t\tobs.next(result);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.doSubmit(data, index).subscribe((submission) => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tresult.push(submission);\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\thandler();\r\n\t\t\t\t\t});\r\n\t\t\t\t}, (err) => {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\thandler();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thandler();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate buildUrlMap(submission: FormSubmission, urlFields: string[], urlMap: { [key: string]: string }): boolean {\r\n\t\tlet hasUrls = false;\r\n\t\tfor (var field in submission.fields) {\r\n\t\t\tif (urlFields.indexOf(field) > -1) {\r\n\t\t\t\tlet sub = submission.fields[field];\r\n\t\t\t\tif (sub) {\r\n\t\t\t\t\tvar val = [];\r\n\t\t\t\t\tif (typeof (sub) == \"object\") {\r\n\t\t\t\t\t\tObject.keys(sub).forEach((key) => {\r\n\t\t\t\t\t\t\tval.push(sub[key]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tval = val.concat(sub);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tval.forEach((url) => {\r\n\t\t\t\t\t\tif (url) {\r\n\t\t\t\t\t\t\turlMap[url] = \"\";\r\n\t\t\t\t\t\t\thasUrls = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn hasUrls;\r\n\t}\r\n\r\n\tprivate doSubmit(data: FormMapEntry, index: number): Observable<FormSubmission> {\r\n\t\treturn new Observable<FormSubmission>((obs: Observer<FormSubmission>) => {\r\n\t\t\tlet submission = data.submissions[index];\r\n\t\t\tlet urlMap: { [key: string]: string } = {};\r\n\t\t\tlet hasUrls = this.buildUrlMap(submission, data.urlFields, urlMap);\r\n\t\t\tthis.uploadImages(urlMap, hasUrls).subscribe((d) => {\r\n\t\t\t\tfor (var field in submission.fields) {\r\n\t\t\t\t\tif (data.urlFields.indexOf(field) > -1) {\r\n\t\t\t\t\t\tlet sub = submission.fields[field];\r\n\t\t\t\t\t\tif (sub) {\r\n\t\t\t\t\t\t\tif (typeof (sub) == \"object\") {\r\n\t\t\t\t\t\t\t\tObject.keys(sub).forEach((key) => {\r\n\t\t\t\t\t\t\t\t\tsub[key] = urlMap[sub[key]];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else if (Array.isArray(sub)) {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < sub.length; i++) {\r\n\t\t\t\t\t\t\t\t\tsub[i] = urlMap[sub[i]];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsubmission.fields[field] = urlMap[sub];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(submission.barcode_processed == BarcodeStatus.Queued){\r\n\t\t\t\t\tlet identifier = data.form.getIdByFieldType(FormElementType.barcode);\r\n\t\t\t\t\tlet form = data.form.getFieldByIdentifier(identifier);\r\n\t\t\t\t\tthis.rest.fetchBarcodeData(<any>submission.fields[identifier], form.barcode_provider_id).subscribe( barcodeData => {\r\n\t\t\t\t\t\tif(!barcodeData || barcodeData.length == 0){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsubmission.barcode_processed = BarcodeStatus.Processed;\t\t\t\t\t\t\r\n\t\t\t\t\t\tbarcodeData.forEach(entry => {\r\n\t\t\t\t\t\t\tlet id = data.form.getIdByUniqueFieldName(entry.ll_field_unique_identifier);\r\n\t\t\t\t\t\t\tif(!id){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsubmission.fields[id] = entry.value;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.db.updateSubmissionFields(submission).subscribe((done) => {\r\n\t\t\t\t\t\t\tthis.actuallySubmitForm(data.form.name, submission, obs);\r\n\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\tthis.errorSource.next(\"Could not save updated barcode info into teh submission for form \" + data.form.name);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\tlet msg = \"Could not process submission for form \" + data.form.name + \": barcode processing failed\";\r\n\t\t\t\t\t\tthis.errorSource.next(msg);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.actuallySubmitForm(data.form.name, submission, obs);\r\n\t\t\t\t}\r\n\t\t\t}, (err) => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t\tlet msg = \"Could not process submission for form \" + data.form.name;\r\n\t\t\t\tthis.errorSource.next(msg);\r\n\t\t\t});\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tprivate actuallySubmitForm(formName: string, submission: FormSubmission, obs: Observer<any>){\r\n\t\tthis.rest.submitForm(submission).subscribe((d) => {\r\n\t\t\tif ((!d.id || d.id < 0) && (!d.hold_request_id || d.hold_request_id < 0)) {\r\n\t\t\t\tlet msg = \"Could not process submission for form \\\"\" + formName + \"\\\": \" + d.message;\r\n\t\t\t\tsubmission.invalid_fields = 1;\r\n\t\t\t\tsubmission.activity_id = submission.id;\r\n\t\t\t\tsubmission.hold_request_id = 0;\r\n\t\t\t\tthis.db.updateSubmissionId(submission).subscribe((ok) => {\r\n\t\t\t\t\tobs.error(msg);\r\n\t\t\t\t\tthis.errorSource.next(msg);\r\n\t\t\t\t}, err => {\r\n\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\tlet msg = \"Could not process submission for form \" + formName;\r\n\t\t\t\t\tthis.errorSource.next(msg);\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(d.id > 0){\r\n\t\t\t\tsubmission.activity_id = d.id;\r\n\t\t\t\tsubmission.status = SubmissionStatus.Submitted;\r\n\t\t\t}else{\r\n\t\t\t\tsubmission.activity_id = submission.id;\r\n\t\t\t\tsubmission.hold_request_id = d.hold_request_id;\r\n\t\t\t\tsubmission.status = SubmissionStatus.OnHold;\r\n\t\t\t}\r\n\r\n\t\t\tthis.db.updateSubmissionId(submission).subscribe((ok) => {\r\n\t\t\t\tif(d.id > 0){\r\n\t\t\t\t\tsubmission.id = submission.activity_id;\r\n\t\t\t\t}\r\n\t\t\t\tobs.next(submission);\r\n\t\t\t\tobs.complete();\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t\tlet msg = \"Could not process submission for form \" + formName;\r\n\t\t\t\tthis.errorSource.next(msg);\r\n\t\t\t})\r\n\t\t}, err => {\r\n\t\t\tobs.error(err);\r\n\t\t\tlet msg = \"Could not process submission for form \" + formName;\r\n\t\t\tthis.errorSource.next(msg);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate uploadImages(urlMap: { [key: string]: string }, hasUrls: boolean): Observable<any> {\r\n\t\treturn new Observable<any>((obs: Observer<any>) => {\r\n\t\t\tif (!hasUrls) {\r\n\t\t\t\tobs.next(null);\r\n\t\t\t\tobs.complete();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet index = 0;\r\n\t\t\tlet urls = Object.keys(urlMap);\r\n\t\t\tlet transfer = new Transfer();\r\n\t\t\tlet request = new FileUploadRequest();\r\n\t\t\tlet handler = () => {\r\n\t\t\t\tif (index >= urls.length) {\r\n\t\t\t\t\tthis.rest.uploadFiles(request).subscribe((data) => {\r\n\t\t\t\t\t\turls.forEach((url, index) => {\r\n\t\t\t\t\t\t\turlMap[url] = data[index].url;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tobs.next(data);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.dataUrlRegexp.test(urls[index])) {\r\n\t\t\t\t\t\tlet data = urls[index];\r\n\t\t\t\t\t\tlet entry = new FileInfo();\r\n\t\t\t\t\t\tlet d = data.split(\";base64,\");\r\n\t\t\t\t\t\tentry.mime_type = d[0].substr(5);\r\n\t\t\t\t\t\tentry.data = d[1];\r\n\t\t\t\t\t\tentry.name = \"sig\" + new Date().getTime();\r\n\t\t\t\t\t\tentry.size = atob(entry.data).length;\r\n\t\t\t\t\t\trequest.files.push(entry);\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\thandler();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet folder = urls[index].substr(0, urls[index].lastIndexOf(\"/\"));\r\n\t\t\t\t\tlet file = urls[index].substr(urls[index].lastIndexOf(\"/\") + 1);\r\n\t\t\t\t\tthis.file.resolveDirectoryUrl(folder).then(dir => {\r\n\t\t\t\t\t\tthis.file.getFile(dir, file, { create: false }).then(fileEntry => {\r\n\t\t\t\t\t\t\tfileEntry.getMetadata((metadata) => {\r\n\t\t\t\t\t\t\t\t//data:[<mediatype>][;base64],<data>\r\n\t\t\t\t\t\t\t\tthis.file.readAsDataURL(folder, file).then((data: string) => {\r\n\t\t\t\t\t\t\t\t\tlet entry = new FileInfo();\r\n\t\t\t\t\t\t\t\t\tlet d = data.split(\";base64,\");\r\n\t\t\t\t\t\t\t\t\tentry.data = d[1];\r\n\t\t\t\t\t\t\t\t\tentry.name = file;\r\n\t\t\t\t\t\t\t\t\tentry.size = metadata.size;\r\n\t\t\t\t\t\t\t\t\tentry.mime_type = d[0].substr(5);\r\n\t\t\t\t\t\t\t\t\trequest.files.push(entry);\r\n\t\t\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t\t\t\thandler();\r\n\t\t\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thandler();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate downloadForms(lastSyncDate: Date, map: { [key: string]: SyncStatus }, result: DownloadData): Observable<Form[]> {\r\n\t\treturn new Observable<any>(obs => {\r\n\t\t\tlet mapEntry = map[\"forms\"];\r\n\t\t\tmapEntry.loading = true;\r\n\t\t\tmapEntry.percent = 10;\r\n\t\t\tthis.rest.getAvailableFormIds().subscribe(ids => {\r\n\t\t\t\tthis.db.getForms().subscribe(forms => {\r\n\t\t\t\t\tlet toDelete = [];\r\n\t\t\t\t\tlet newForms = [];\r\n\t\t\t\t\tforms.forEach(form => {\r\n\t\t\t\t\t\tif(ids.indexOf(form.form_id) == -1){\r\n\t\t\t\t\t\t\ttoDelete.push(form.form_id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tids.forEach((id) => {\r\n\t\t\t\t\t\tlet form = forms.find((f) => {\r\n\t\t\t\t\t\t\treturn f.form_id == id;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(!form){\r\n\t\t\t\t\t\t\tnewForms.push(id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresult.newFormIds = newForms;\r\n\t\t\t\t\tthis.db.deleteFormsInList(toDelete).subscribe(() => {\r\n\t\t\t\t\t\tthis.rest.getAllForms(lastSyncDate).subscribe(forms => {\r\n\t\t\t\t\t\t\tresult.forms = forms;\r\n\t\t\t\t\t\t\tforms.forEach((form) => {\r\n\t\t\t\t\t\t\t\tform.id = form.form_id + \"\";\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tmapEntry.percent = 50;\r\n\t\t\t\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\t\t\t\tthis.db.saveForms(forms).subscribe(reply => {\r\n\t\t\t\t\t\t\t\tmapEntry.complete = true;\r\n\t\t\t\t\t\t\t\tmapEntry.loading = false;\r\n\t\t\t\t\t\t\t\tmapEntry.percent = 100;\r\n\t\t\t\t\t\t\t\tthis.entitySyncedSource.next(mapEntry.formName);\r\n\t\t\t\t\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\t\t\t\t\tobs.next(forms);\r\n\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t});\r\n\t}\r\n\r\n\tprivate downloadContacts(forms: Form[], lastSyncDate: Date, map: { [key: string]: SyncStatus }, result: DownloadData): Observable<any> {\r\n\t\treturn new Observable<any>(obs => {\r\n\t\t\tlet mapEntry = map[\"contacts\"];\r\n\t\t\tmapEntry.loading = true;\r\n\t\t\tmapEntry.percent = 10;\r\n\t\t\tconsole.log(\"Downloading contacts 2\");\r\n\t\t\tthis.rest.getAllDeviceFormMemberships(forms, lastSyncDate, result.newFormIds).subscribe((contacts) => {\r\n\t\t\t\tconsole.log(\"Downloading contacts 3\");\r\n\t\t\t\tresult.memberships.push.apply(result.memberships, contacts);\r\n\t\t\t\tmapEntry.percent = 50;\r\n\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\tthis.db.saveMemberships(contacts).subscribe(res => {\r\n\t\t\t\t\tmapEntry.complete = true;\r\n\t\t\t\t\tmapEntry.loading = false;\r\n\t\t\t\t\tmapEntry.percent = 100;\r\n\t\t\t\t\tthis.entitySyncedSource.next(mapEntry.formName);\r\n\t\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\t\tobs.next(null);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}, err => {\r\n\t\t\t\t\tobs.error(err);\r\n\t\t\t\t});\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate downloadDispatches(lastSyncDate: Date, map: { [key: string]: SyncStatus }, result: DownloadData): Observable<any> {\r\n\t\treturn new Observable<any>(obs => {\r\n\t\t\tlet mapEntry = map[\"dispatches\"];\r\n\t\t\tmapEntry.loading = true;\r\n\t\t\tmapEntry.percent = 10;\r\n\t\t\tthis.rest.getAllDispatches(lastSyncDate).subscribe(dispatches => {\r\n\t\t\t\tmapEntry.percent = 50;\r\n\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\tresult.dispatches = dispatches;\r\n\t\t\t\tlet orders: DispatchOrder[] = [];\r\n\t\t\t\tlet forms: Form[] = [];\r\n\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\tdispatches.forEach(dispatch => {\r\n\t\t\t\t\torders.push.apply(orders, dispatch.orders);\r\n\t\t\t\t\tdispatch.forms.forEach(f => {\r\n\t\t\t\t\t\tif (forms.filter((form) => { return form.form_id == f.form_id }).length == 0) {\r\n\t\t\t\t\t\t\tforms.push(f);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\torders.forEach(order => {\r\n\t\t\t\t\torder.form = forms.filter(f => { return f.form_id == order.form_id })[0];\r\n\t\t\t\t\torder.id = order.id + \"\" + order.form_id;\r\n\t\t\t\t});\r\n\t\t\t\tmapEntry.percent = 100;\r\n\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\tthis.db.saveDispatches(orders).subscribe(reply => {\r\n\t\t\t\t\tmapEntry.complete = true;\r\n\t\t\t\t\tmapEntry.loading = false;\r\n\t\t\t\t\tmapEntry.percent = 100;\r\n\t\t\t\t\tthis.entitySyncedSource.next(mapEntry.formName);\r\n\t\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\t\tobs.next(null);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t});\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate downloadSubmissions(forms: Form[], lastSyncDate: Date, map: { [key: string]: SyncStatus }, result: DownloadData): Observable<any> {\r\n\t\treturn new Observable<any>(obs => {\r\n\t\t\tlet mapEntry = map[\"submissions\"];\r\n\t\t\tmapEntry.loading = true;\r\n\t\t\tmapEntry.percent = 10;\r\n\t\t\tthis.rest.getAllSubmissions(forms, lastSyncDate, result.newFormIds).subscribe(submissions => {\r\n\t\t\t\tmapEntry.percent = 50;\r\n\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\tresult.submissions = submissions;\r\n\t\t\t\t//let forms: Form[] = [];\r\n\t\t\t\tthis.downloadImages(forms, submissions).subscribe(subs => {\r\n\t\t\t\t\tthis.db.saveSubmisisons(subs).subscribe(reply => {\r\n\t\t\t\t\t\tmapEntry.complete = true;\r\n\t\t\t\t\t\tmapEntry.loading = false;\r\n\t\t\t\t\t\tmapEntry.percent = 100;\r\n\t\t\t\t\t\tthis.entitySyncedSource.next(mapEntry.formName);\r\n\t\t\t\t\t\tthis.syncSource.next(this.lastSyncStatus);\r\n\t\t\t\t\t\tobs.next(null);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}, err => {\r\n\t\t\t\t\tobs.error(err);\r\n\t\t\t\t});\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate downloadImages(forms: Form[], submissions: FormSubmission[]): Observable<FormSubmission[]> {\r\n\t\treturn new Observable<FormSubmission[]>((obs: Observer<FormSubmission[]>) => {\r\n\t\t\tif (!submissions || submissions.length == 0) {\r\n\t\t\t\tobs.next([]);\r\n\t\t\t\tobs.complete();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet map: { [key: string]: Form } = forms.reduce((previous, current, index, array) => {\r\n\t\t\t\tprevious[current.id] = current;\r\n\t\t\t\treturn previous;\r\n\t\t\t}, {});\r\n\r\n\t\t\tlet urlMap: { [key: string]: string } = {};\r\n\t\t\tlet hasUrls = false;\r\n\t\t\tsubmissions.forEach((submission) => {\r\n\t\t\t\tlet urlFields = map[submission.form_id].getUrlFields();\r\n\t\t\t\thasUrls = this.buildUrlMap(submission, urlFields, urlMap) || hasUrls;\r\n\t\t\t});\r\n\t\t\tif (!hasUrls) {\r\n\t\t\t\tobs.next(submissions);\r\n\t\t\t\tobs.complete();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar urls = Object.keys(urlMap);\r\n\t\t\tlet index = 0;\r\n\t\t\tlet fileTransfer = this.transfer.create();\r\n\t\t\tlet handler = () => {\r\n\t\t\t\tif (index == urls.length) {\r\n\t\t\t\t\tsubmissions.forEach(submission => {\r\n\t\t\t\t\t\tlet urlFields = map[submission.form_id].getUrlFields();\r\n\t\t\t\t\t\tfor (var field in submission.fields) {\r\n\t\t\t\t\t\t\tif (urlFields.indexOf(field) > -1) {\r\n\t\t\t\t\t\t\t\tlet sub = submission.fields[field];\r\n\t\t\t\t\t\t\t\tif (sub) {\r\n\t\t\t\t\t\t\t\t\tif (typeof (sub) == \"object\") {\r\n\t\t\t\t\t\t\t\t\t\tObject.keys(sub).forEach((key) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsub[key] = urlMap[sub[key]];\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t} else if (Array.isArray(sub)) {\r\n\t\t\t\t\t\t\t\t\t\tlet val = <string[]>submission.fields[field];\r\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < val.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tval[i] = urlMap[val[i]];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsubmission.fields[field] = urlMap[sub];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tobs.next(submissions);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet ext = urls[index].substr(urls[index].lastIndexOf(\".\"));\r\n\t\t\t\t\tfileTransfer.download(urls[index], cordova.file.dataDirectory + \"leadliaison/images/dwn_\" + new Date().getTime() + ext)\r\n\t\t\t\t\t\t.then((value: FileEntry) => {\r\n\t\t\t\t\t\t\t//console.log(value);\r\n\t\t\t\t\t\t\turlMap[urls[index]] = \"/\" + value.nativeURL.split(\"///\")[1];\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\thandler();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\thandler();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thandler();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate isExternalUrl(url: string) {\r\n\t\treturn url.indexOf(\"http\") == 0;\r\n\t}\r\n}\r\n\r\n\r\nexport class DownloadData {\r\n\tforms: Form[] = [];\r\n\tdispatches: Dispatch[] = [];\r\n\tmemberships: DeviceFormMembership[] = [];\r\n\tsubmissions: FormSubmission[] = [];\r\n\tnewFormIds: number[] = [];\r\n}\r\n\r\nclass FormMapEntry {\r\n\tform: Form;\r\n\turlFields: string[];\r\n\tstatus: SyncStatus;\r\n\tsubmissions: FormSubmission[];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/sync-client.ts","import {BaseResponse} from \"./response\";\r\nexport class DataResponse<T> extends BaseResponse{\r\n\tdata: T;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/data-response.ts","import {BaseResponse} from \"./response\";\r\nexport class RecordsResponse<T> extends BaseResponse{\r\n\tcount: number;\r\n\ttotal_count: number;\r\n\trecords: T[];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/records-response.ts","export class PushResponse{\r\n\tregistrationId: string;\r\n\tmessage : string;\r\n\ttitle : string;\r\n\tcount : string;\r\n\tsound : string;\r\n\timage : string;\r\n\tlaunchArgs : string;\r\n\tadditionalData: {foreground : boolean, coldstart: boolean, [key: string]: any};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/push-response.ts","export class AuthenticationRequest{\r\n\tauth_type: string = \"device_form\";\r\n\tinvitation_code: string;\r\n\tdevice_name: string;\r\n\tdevice_model: string;\r\n\tdevice_platform: \"IOS\" | \"ANDROID\" | \"WINDOWS\";\r\n\tdevice_uuid: string;\r\n\tdevice_os_version: string;\r\n\tdevice_manufacture: string;\r\n\tcordova: number = 1;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/auth-request.ts","export class SubmissionResponse{\r\n\tactivity_id: number;\r\n\tprospect_id: number;\r\n\temail: string;\r\n\tsubmission_date: string;\r\n\thold_request_id: number;\r\n\tdata: [SubmissionDataResponse];\r\n}\r\n\r\nexport class SubmissionDataResponse{\r\n\telement_id: number;\r\n\telement_title: string;\r\n\tvalue: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/submission-response.ts","export class FileUploadRequest{\r\n\tfiles: FileInfo[] = [];\r\n}\r\n\r\nexport class FileInfo{\r\n\tsize: number;\r\n\tdata: string;\r\n\tname: string;\r\n\tmime_type: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/file-upload-request.ts","import {BaseResponse} from \"./response\";\r\n\r\nexport class FileUploadResponse extends BaseResponse{\r\n\tfiles: FileResponse[] = [];\r\n}\r\n\r\nexport class FileResponse{\r\n\turl: string;\r\n\ttoken: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/file-upload-response.ts","import { BaseResponse } from \"./response\";\r\n\r\nexport class FormSubmitResponse extends BaseResponse{\r\n\tpublic activity_id: number;\r\n\tpublic hold_request_id: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/form-submit-response.ts","export class User{\r\n\tid : number;\r\n\tcustomerID : number;\r\n\tcustomer_account_name : string;\r\n\tcustomer_name : string;\r\n\tcustomer_logo : string;\r\n\taccess_token : string;\r\n\tfirst_name : string;\r\n\tlast_name : string;\r\n\tuser_name : string;\r\n\temail : string;\r\n\ttitle : string;\r\n\tuser_profile_picture : string;\r\n\tis_active : 0 | 1;\r\n\tdb: string;\r\n\tpushRegistered: 0 | 1 = 0;\r\n\tdevice_token: string;\r\n\tis_production: 0 | 1 = 1;\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/user.ts","export class FormElement{\r\n\tid : number;\r\n\ttitle : string;\r\n\tguidelines : string;\r\n\tfield_error_message : string;\r\n\tsize : string;\r\n\tis_required : boolean;\r\n\tis_always_display : boolean;\r\n\tis_conditional : boolean;\r\n\tis_not_prefilled : boolean;\r\n\tis_scan_cards_and_prefill_form: 0 | 1;\r\n\tis_hidden : boolean;\r\n\tis_readonly : boolean;\r\n\tis_filled_from_barcode: boolean;\r\n\ttype : string;\r\n\tposition : number;\r\n\tdefault_value : string;\r\n\ttotal_child : number;\r\n\toptions : any[];\r\n\tmapping : ElementMapping[];\r\n\tbarcode_provider_id: string;\r\n\tbarcode_provider_name: string;\r\n\tidentifier?: string;\r\n\tplaceholder: string = \"\";\r\n}\r\n\r\nexport class ElementMapping{\r\n\tll_field_id: string;\r\n\tll_field_unique_identifier: string;\r\n\tll_field_type: string;\r\n\tll_field_data_type: string;\r\n}\r\n\r\nexport const FormElementType = {\r\n\temail: \"email\",\r\n\tpage_break: \"page_break\",\r\n\tsection: \"section\",\r\n\turl: \"url\",\r\n\ttext: \"text\",\t\t\t\r\n\tselect: \"select\",\r\n\tradio: \"radio\",\r\n\tsimple_name: \"simple_name\",\r\n\ttextarea: \"textarea\",\r\n\ttime: \"time\",\r\n\taddress: \"address\",\r\n\tmoney: \"money\",\r\n\tnumber: \"number\",\r\n\tdate: \"date\",\r\n\tphone: \"phone\",\r\n\tcheckbox: \"checkbox\",\r\n\timage: \"image\",\r\n\tbusiness_card: \"business_card\",\r\n\tsignature: \"signature\",\r\n\tbarcode: \"barcode\"\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/form-element.ts","import { Form } from \"./form\";\r\n\r\nexport class FormSubmission{\r\n\tid: number = null;\r\n\tform_id: number = null;\r\n\tstatus: SubmissionStatus = null;\r\n\tprospect_id: number = null;\r\n\temail: string = \"\";\r\n\tcompany: string = \"\";\r\n\tphone: string = \"\";\r\n\tfirst_name: string = \"\";\r\n\tlast_name: string = \"\";\r\n\tactivity_id: number = null;\r\n\thold_request_id: number = null;\r\n\tinvalid_fields: number = 0;\r\n\tfields : {[key: string]: string | string[]} = {};\r\n\r\n\tbarcode_processed: BarcodeStatus = 0;\r\n\r\n\tpublic isSubmitted(): boolean{\r\n\t\treturn this.status == SubmissionStatus.Submitted;\r\n\t}\r\n\r\n\tpublic updateFields(form: Form){\r\n\t\tform.elements.forEach(element => {\r\n\t\t\tswitch(element.type){\r\n\t\t\t\tcase \"simple_name\":\r\n\t\t\t\t\tthis.first_name = <any>this.fields[element[\"identifier\"] + \"_1\"] || \"\";\r\n\t\t\t\t\tthis.last_name = <any>this.fields[element[\"identifier\"] + \"_2\"] || \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"email\":\r\n\t\t\t\t\tthis.email = <any>this.fields[element[\"identifier\"]] || \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar id = form instanceof Form ? form.getIdByUniqueFieldName(\"WorkPhone\") :  Form.getIdByUniqueFieldName(\"WorkPhone\", form);\r\n\t\tif(id){\r\n\t\t\tthis.phone = <any>this.fields[id] || \"\";\r\n\t\t}\r\n\t\tid = form instanceof Form ? form.getIdByUniqueFieldName(\"Company\") :  Form.getIdByUniqueFieldName(\"Company\", form);\r\n\t\tif(id){\r\n\t\t\tthis.company = <any>this.fields[id] || \"\";\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport enum BarcodeStatus{\r\n\tNone = 0,\r\n\tProcessed = 1,\r\n\tQueued = 2\r\n}\r\n\r\nexport enum SubmissionStatus{\r\n\tSubmitted = 1,\r\n\tOnHold = 2,\r\n\tBlocked = 3,\r\n\tToSubmit = 4,\r\n\tSubmitting = 5,\r\n\tInvalidFields = 6,\r\n\tError = 7\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/form-submission.ts","import { Form } from \"./form\";\r\nimport { DispatchOrder } from \"./dispatch-order\";\r\n\r\nexport class Dispatch{\r\n\torders: DispatchOrder[];\r\n\tforms: Form[];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/dispatch.ts","import {BaseForm} from \"./base-form\";\r\nimport {Form} from \"./form\";\r\n\r\nexport class DispatchOrder extends BaseForm{\r\n\tdevice_id : number;\r\n\tprospect_id : number;\r\n\tfields_values : {[key: string]: string};\r\n\tdate_created : string;\r\n\tdate_last_modified : string;\r\n\tstatus : string;\r\n\tform: Form;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/dispatch-order.ts","export class DeviceFormMembership{\r\n\tid: number;\r\n\tform_id: number;\r\n\tmembership_id : number;\r\n\tprospect_id : number;\r\n\tadded_date : string;\r\n\tfields : any;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/membership.ts","export class SyncStatus{\r\n\tloading: boolean;\r\n\tcomplete?: boolean = false;\r\n\tformId: number;\r\n\tformName: string;\r\n\tpercent: number = 0;\r\n\r\n\tconstructor(loading?: boolean, complete?: boolean, formId?: number, formName?: string, percent?: number){\r\n\t\tthis.loading = loading;\r\n\t\tthis.complete = complete;\r\n\t\tthis.formId = formId;\r\n\t\tthis.formName = formName;\r\n\t\tthis.percent = percent > 0 ? percent : 0;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/sync-status.ts","import { BaseResponse } from './protocol';\r\nexport class ItemData{\r\n\tll_field_id: string;\r\n\tll_field_unique_identifier: string;\r\n\tvalue: string;\r\n}\r\n\r\nexport class BarcodeResponse extends BaseResponse{\r\n\tpublic info: ItemData[];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/barcode.ts","export * from \"./manager\";\r\nexport * from \"./migrator\";\r\nexport * from \"./utils\";\r\nexport * from \"./metadata\";\n\n\n// WEBPACK FOOTER //\n// ./src/services/db/index.ts","import { SQLite, SQLiteObject } from '@ionic-native/sqlite';\r\nimport { Platform } from 'ionic-angular';\r\nimport { Observable, Observer } from \"rxjs/Rx\";\r\nimport { Utils } from \"./utils\";\r\nimport { Migrator } from \"./migrator\";\r\nimport { Table } from \"./metadata\";\r\n\r\nexport class Manager{\r\n\tprivate map: {[key:string]: {obs: Observable<SQLiteObject>, db: SQLiteObject, dbName: string, master: boolean}} = {};\r\n\r\n\tconstructor(private platform: Platform, private migrator: Migrator, private tables: Table[]){\r\n\r\n\t}\r\n\r\n\tpublic registerDb(name: string, type: string, master: boolean){\r\n\t\tif(!this.map[type]){\r\n\t\t\tthis.map[type] = {\r\n\t\t\t\tobs: null,\r\n\t\t\t\tdb: null,\r\n\t\t\t\tdbName: name,\r\n\t\t\t\tmaster: master\r\n\t\t\t};\r\n\t\t}else if(!this.map[type].dbName){\r\n\t\t\tthis.map[type].dbName = name;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic db(type: string): Observable<SQLiteObject> {\r\n\t\treturn new Observable<SQLiteObject>((obs: Observer<SQLiteObject>) => {\r\n\t\t\tif (this.map[type] && this.map[type].db) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tobs.next(this.map[type].db);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t})\r\n\t\t\t\treturn;\r\n\t\t\t} \t\t\t\r\n\t\t\tif(this.map[type] && this.map[type].obs){\r\n\t\t\t\tthis.doSubscribe(type, this.map[type].obs, obs);\r\n\t\t\t}else if(this.map[type]){\r\n\t\t\t\tthis.map[type].obs = this.initializeDb(this.platform, type).share();\r\n\t\t\t\tthis.doSubscribe(type, this.map[type].obs, obs);\r\n\t\t\t}else{\r\n\t\t\t\tobs.error(\"Unregistered Db: \" + type);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate doSubscribe(type: string, o: Observable<SQLiteObject>, obs: Observer<SQLiteObject>){\r\n\t\to.subscribe((db) => {\r\n\t\t\tif(!obs.closed){\r\n\t\t\t\tthis.map[type].db = db;\r\n\t\t\t\tobs.next(this.map[type].db);\r\n\t\t\t\tobs.complete();\r\n\t\t\t\tobs.closed = true;\r\n\t\t\t}else{\r\n\t\t\t\tobs.next(this.map[type].db);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic isDbInited(type: string): boolean {\r\n\t\treturn this.map[type] && this.map[type].obs != null;\r\n\t}\r\n\r\n\tprivate initializeDb(platform: Platform, type: string): Observable<SQLiteObject> {\r\n\t\tconsole.log(\"Initialize \" + type);\r\n\t\treturn new Observable<SQLiteObject>((obs: Observer<SQLiteObject>) => {\r\n\t\t\tlet db: SQLite = null;\r\n\t\t\tif (platform.is(\"cordova\")) {\r\n\t\t\t\tdb = new SQLite();\r\n\t\t\t} else {\r\n\t\t\t\tdb = new LocalSql();\r\n\t\t\t}\r\n\t\t\tconsole.log(\"OPen db \" + this.map[type].dbName);\r\n\t\t\tlet settings = {\r\n\t\t\t\tname: this.map[type].dbName,\r\n\t\t\t\tlocation: 'default', // the location field is required\r\n\t\t\t};\r\n\t\t\tsettings[\"version\"] = this.map[type].master ? '1.0' : '';\r\n\t\t\tdb.create(settings).then((theDb: SQLiteObject) => {\r\n\t\t\t\tthis.setup(theDb, type).subscribe(()=>{\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tobs.next(theDb);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t}, (err) =>{\r\n\t\t\t\t\tconsole.error('Unable to setup: ', err);\r\n\t\t\t\t\tobs.error(err);\r\n\t\t\t\t});\r\n\t\t\t}, (err) => {\r\n\t\t\t\tconsole.error('Unable to open database: ', err);\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate setup(db: SQLiteObject, type: string) : Observable<any> {\r\n\t\treturn new Observable<any>((obs: Observer<any>) => {\r\n\t\t\tlet index = 0;\r\n\t\t\tlet handler = (data) => {\r\n\t\t\t\tif (index >= this.tables.length) {\r\n\t\t\t\t\tthis.migrator.runMigrations(db, type).subscribe(() => {\r\n\t\t\t\t\t\tobs.next({});\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\twhile (this.tables[index].master != this.map[type].master) {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tif (index >= this.tables.length) {\r\n\t\t\t\t\t\tthis.migrator.runMigrations(db, type).subscribe(() => {\r\n\t\t\t\t\t\t\tobs.next({});\r\n\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet query = Utils.makeCreateTableQuery(this.tables[index]);\r\n\t\t\t\tindex++;\r\n\t\t\t\tdb.executeSql(query, {}).then(handler, (err) => {\r\n\t\t\t\t\tif (err.hasOwnProperty(\"rows\")) {\r\n\t\t\t\t\t\thandler(err);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.error('Unable to execute sql: ', err);\r\n\t\t\t\t\tobs.error(err);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\thandler({});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nclass LocalSql {\r\n\tprivate db: any;\r\n\r\n\techoTest(): Promise<any>{\r\n\t\treturn null;\r\n\t}\r\n\r\n    deleteDatabase(config): Promise<any>{\r\n\t\treturn null;\r\n\t}\r\n\r\n\tcreate(opts: { name: string, location: string, version: string }): Promise<any> {\r\n\t\tlet name = opts.name;\r\n\t\tlet description = opts.name;\r\n\t\tlet size = 2 * 1024 * 1024;\r\n\t\tlet version = opts.version;\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\ttry{\r\n\t\t\t\tthis.db = window[\"openDatabase\"](name, version, description, size, (db) => {\r\n\t\t\t\t\tresolve(this);\r\n\t\t\t\t});\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tresolve(this);\r\n\t\t\t}, 1);\r\n\t\t});\r\n\t}\r\n\r\n\texecuteSql(query, args): Promise<any> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.db.transaction(function (t) {\r\n\t\t\t\tlet params = args || {};\r\n\t\t\t\tif (Object.keys(params).length == 0) {\r\n\t\t\t\t\tparams = [];\r\n\t\t\t\t}\r\n\t\t\t\tt.executeSql(query, params,\r\n\t\t\t\t\t(t, r) => {\r\n\t\t\t\t\t\tresolve(r);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t(tx, err) => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/db/manager.ts","import { SQLiteObject } from '@ionic-native/sqlite';\r\nimport { Observable, Observer } from \"rxjs/Rx\";\r\nimport { Utils } from \"./utils\";\r\n\r\nexport class Migrator{\r\n\r\n\tprivate migrations;\r\n\r\n\tpublic setMigrations(migrations){\r\n\t\tthis.migrations = migrations;\r\n\t}\r\n\r\n\tpublic runMigrations(db: SQLiteObject, type: string): Observable<any>{\r\n\t\treturn new Observable<any>((responseObserver: Observer<any>) => {\r\n\t\t\tthis.migrateForType(db, type).subscribe(() => {\r\n\t\t\t\tresponseObserver.next({});\r\n\t\t\t\tresponseObserver.complete();\r\n\t\t\t}, (err) => {\r\n\t\t\t\tresponseObserver.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate migrateForType(db: SQLiteObject, type: string): Observable<any>{\r\n\t\treturn new Observable<any>((responseObserver: Observer<any>) => {\r\n\t\t\tthis.getDbMigrationVersion(db, type).subscribe((version) => {\r\n\t\t\t\tlet promise: Promise<any> = Promise.resolve();\r\n\t\t\t\tlet hasMigrations = false;\r\n\t\t\t\tObject.keys(this.migrations[type]).forEach((key) => {\r\n\t\t\t\t\tlet k = parseInt(key);\r\n\t\t\t\t\tif(k > version){\r\n\t\t\t\t\t\tpromise = promise.then(() => this.executeMigration(db, type, this.migrations[type][key], k));\r\n\t\t\t\t\t\thasMigrations = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t/*if(!hasMigrations){\r\n\t\t\t\t\tresponseObserver.next({});\r\n\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}*/\r\n\t\t\t\tpromise.then(() => {\r\n\t\t\t\t\tresponseObserver.next({});\r\n\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tprivate executeMigration(db: SQLiteObject, type: string, migration, migrationNo: number) : Promise<any>{\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\tvar toExecute = [];\r\n\t\t\tmigration.tables && migration.tables.forEach(table => {\r\n\t\t\t\ttoExecute.push(Utils.makeCreateTableQuery(table));\r\n\t\t\t});\r\n\t\t\ttoExecute = toExecute.concat(migration.queries);\r\n\t\t\tif(toExecute.length == 0){\r\n\t\t\t\tthis.finishMigration(migration, migrationNo, db, resolve);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar index = 0;\r\n\t\t\tvar handler = () => {\r\n\t\t\t\tconsole.log(\"Exec \" + toExecute[index]);\r\n\t\t\t\tdb.executeSql(toExecute[index], {}).then(result => {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tif(index < toExecute.length){\r\n\t\t\t\t\t\thandler();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.finishMigration(migration, migrationNo, db, resolve);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\thandler();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate finishMigration(migration, index, db, resolve){\r\n\t\tlet statement = \"INSERT INTO versions(version, updated_at) values (\" + index + \", strftime('%Y-%m-%d %H:%M:%S', 'now'))\"\r\n\t\tif(migration.custom){\r\n\t\t\tmigration.custom(db, ()=>{\r\n\t\t\t\tconsole.log(\"Done 1\");\r\n\t\t\t\tdb.executeSql(statement, {}).then(result => {\r\n\t\t\t\t\tconsole.log(\"Done\");\r\n\t\t\t\t\tresolve({});\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tdb.executeSql(statement, {}).then(result => {\r\n\t\t\t\tconsole.log(\"Done\");\r\n\t\t\t\tresolve({});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getDbMigrationVersion(db: SQLiteObject, type: string): Observable<number>{\r\n\t\treturn new Observable<number>((responseObserver: Observer<number>) => {\r\n\t\t\tdb.executeSql(this.migrations.queries.getVersion, {})\r\n\t\t\t.then((data) => {\r\n\t\t\t\tvar entry = data.rows.item(0);\r\n\t\t\t\tvar v = entry.version;\r\n\t\t\t\tresponseObserver.next(v);\r\n\t\t\t\tresponseObserver.complete();\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tresponseObserver.next(-1);\r\n\t\t\t\tresponseObserver.complete();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/db/migrator.ts","export class Table{\r\n\tname: string;\r\n\tmaster: boolean;\r\n\tcolumns: Column[];\r\n\tqueries: {[key: string]: string};\r\n}\r\n\r\nexport class Column{\r\n\tname: string;\r\n\ttype: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/db/metadata.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { NavController, NavParams, Nav } from 'ionic-angular';\r\nimport { Forms } from \"../forms\";\r\nimport { Dispatches } from \"../dispatches\";\r\nimport { Settings } from \"../settings\";\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { User, SyncStatus } from \"../../model\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { SyncClient } from \"../../services/sync-client\";\r\nimport { IonPullUpComponent, IonPullUpFooterState } from \"../../components/ion-pullup\";\r\n\r\n@Component({\r\n\tselector: 'main',\r\n\ttemplateUrl: 'main.html'\r\n})\r\nexport class Main {\r\n\r\n\t@ViewChild(Nav) nav: Nav;\r\n\r\n\trootPage: any = Forms;\r\n\r\n\tuser: User = new User();\t\r\n\r\n\tuploading: boolean = true;\t\r\n\r\n\tloadingTrigger = false;\r\n\r\n\tsub: Subscription;\r\n\r\n\tcurrentSyncForm: string;\r\n\r\n\tstatuses: SyncStatus[] = [];\r\n\r\n\tpages: Array<{ title: string, component: any, icon: string }>;\r\n\r\n\t@ViewChild('pullup') pullup: IonPullUpComponent;\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate syncClient: SyncClient) {\r\n\t\tthis.pages = [\r\n\t\t\t/*{ title: 'Home', component: Dashboard, icon: \"home\" },*/\r\n\t\t\t{ title: 'Forms', component: Forms, icon: \"document\" },\r\n\t\t\t//{ title: 'Dispatches', component: Dispatches, icon: \"megaphone\" },\r\n\t\t\t{ title: 'Settings', component: Settings, icon: \"cog\" }\r\n\t\t]\r\n\t}\r\n\r\n\topenPage(page) {\r\n\t\tthis.nav.setRoot(page.component);\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tthis.client.getRegistration().subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.client.setupNotifications();\r\n\t\t});\r\n\t}\r\n\r\n\tfooterExpanded() {\r\n\r\n\t}\r\n\r\n\tfooterCollapsed() {\r\n\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tif (this.syncClient.isSyncing) {\r\n\t\t\tthis.pullup.collapse();\r\n\t\t\tthis.statuses = this.syncClient.getLastSync();\r\n\t\t\tthis.currentSyncForm = this.getCurrentUploadingForm();\r\n\t\t}\r\n\t\tthis.sub = this.handleSync();\r\n\t\twindow[\"TesseractPlugin\"] && TesseractPlugin.loadLanguage(\"eng\", function(response) {\r\n\t\t\tconsole.log(response);\r\n\t\t}, function(reason) {\r\n\t\t\tconsole.error(reason);\r\n\t\t});\r\n\t\tthis.client.getUpdates().subscribe(done => {\t\t\t\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.client.doAutoSync();\r\n\t\t\t}, 350);\r\n\t\t}, (err) =>{\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.client.doAutoSync();\r\n\t\t\t}, 350);\r\n\t\t});\r\n\t}\r\n\r\n\thandleSync() : Subscription{\r\n\t\tlet timer = null;\r\n\t\tlet hidePullup = false;\r\n\t\treturn this.syncClient.onSync.subscribe(stats => {\r\n\t\t\tif (stats == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.statuses = stats;\r\n\t\t\t//console.log(stats);\r\n\t\t\tthis.currentSyncForm = this.getCurrentUploadingForm();\r\n\t\t\tif (this.pullup.state == IonPullUpFooterState.Minimized && !hidePullup) {\r\n\t\t\t\tthis.pullup.collapse();\r\n\t\t\t}\r\n\t\t\ttimer = setTimeout(()=> {\r\n\t\t\t\thidePullup = true;\r\n\t\t\t\tthis.pullup.minimize();\r\n\t\t\t}, 12500);\r\n\t\t},\r\n\t\t(err) => {\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.pullup.minimize();\r\n\t\t\t\tthis.sub.unsubscribe();\r\n\t\t\t\tthis.sub = this.handleSync();\r\n\t\t\t}, 200);\r\n\t\t},\r\n\t\t() => {\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.pullup.minimize();\r\n\t\t\t\tthis.sub.unsubscribe();\r\n\t\t\t\tthis.sub = this.handleSync();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\t}\r\n\r\n\tionViewDidLeave() {\r\n\t\tthis.sub.unsubscribe();\r\n\t\tthis.sub = null;\r\n\t}\r\n\r\n\tgetCurrentUploadingForm() {\r\n\t\tif (this.statuses) {\r\n\t\t\tfor (let i = 0; i < this.statuses.length; i++) {\r\n\t\t\t\tif (this.statuses[i].loading) {\r\n\t\t\t\t\treturn this.statuses[i].formName;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tgetIcon(loading, complete): string {\r\n\t\tif (loading) {\r\n\t\t\treturn \"refresh\";\r\n\t\t}\r\n\t\tif (complete) {\r\n\t\t\treturn \"checkmark\";\r\n\t\t}\r\n\t\treturn \"flag\";\r\n\t}\r\n\r\n\tgetColor(loading, complete): string {\r\n\t\tif (loading) {\r\n\t\t\treturn \"primary\";\r\n\t\t}\r\n\t\tif (complete) {\r\n\t\t\treturn \"secondary\";\r\n\t\t}\r\n\t\treturn \"orange\";\r\n\t}\r\n\r\n\tgetStateLabel(loading, complete, formName): string {\r\n\t\tif (loading) {\r\n\t\t\treturn \"Syncing \" + formName;\r\n\t\t}\r\n\t\tif (complete) {\r\n\t\t\treturn \"Sync-ed \" + formName;\r\n\t\t}\r\n\t\treturn formName;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/main/main.ts","import {\r\n\tComponent, ViewChild, NgZone\r\n} from '@angular/core';\r\n\r\nimport {\r\n\ttrigger,\r\n\tstate,\r\n\tstyle,\r\n\ttransition,\r\n\tanimate\r\n} from '@angular/animations';\r\n\r\nimport { Subscription } from \"rxjs\";\r\n\r\nimport { NavController, NavParams, InfiniteScroll, ActionSheetController, Searchbar } from 'ionic-angular';\r\nimport { SyncClient } from \"../../services/sync-client\";\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { Form } from \"../../model\";\r\nimport { FormCapture } from \"../form-capture\";\r\nimport { FormSummary } from \"../form-summary\";\r\nimport { FormReview } from \"../form-review\";\r\nimport { FormControlPipe } from \"../../pipes/form-control-pipe\";\r\n\r\n\r\n@Component({\r\n\tselector: 'forms',\r\n\ttemplateUrl: 'forms.html',\r\n\tanimations: [\r\n\t\t// Define an animation that adjusts the opactiy when a new item is created\r\n\t\t//  in the DOM. We use the 'visible' string as the hard-coded value in the \r\n\t\t//  trigger.\r\n\t\t//\r\n\t\t// When an item is added we wait for 300ms, and then increase the opacity to 1\r\n\t\t//  over a 200ms time interval. When the item is removed we don't delay anything\r\n\t\t//  and use a 200ms interval.\r\n\t\t//\r\n\t\ttrigger('visibleTrigger', [\r\n\t\t\tstate('visible', style({ opacity: '1', height: '5.8rem' })),\r\n\t\t\tstate('hidden', style({ opacity: '0', height: '0' })),\r\n\t\t\ttransition('visible => hidden', [animate('300ms 200ms')]),\r\n\t\t\ttransition('hidden => visible', [animate('300ms 100ms')])\r\n\t\t]),\r\n\t\ttrigger('loadingTrigger', [\r\n\t\t\tstate('visible', style({ transform: 'translateY(256px)' })),\r\n\t\t\tstate('hidden', style({ transform: 'translateY(300px)' })),\r\n\t\t\ttransition('visible => hidden', [animate('300ms 200ms')]),\r\n\t\t\ttransition('hidden => visible', [animate('300ms 100ms')])\r\n\t\t])\r\n\t]\r\n})\r\nexport class Forms {\r\n\r\n\tsearchMode = false;\r\n\r\n\tsearchTrigger = \"hidden\";\r\n\r\n\t@ViewChild(\"search\") searchbar: Searchbar;\r\n\r\n\tforms: Form[] = [];\r\n\tfilteredForms: Form[] = [];\r\n\r\n\tprivate sub : Subscription;\r\n\r\n\tprivate filterPipe: FormControlPipe = new FormControlPipe();\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate zone: NgZone,\r\n\t\tprivate actionCtrl: ActionSheetController,\r\n\t\tprivate syncClient: SyncClient) {\r\n\t}\r\n\r\n\tdoRefresh(refresher?) {\r\n\t\tthis.client.getForms().subscribe(forms => {\r\n\t\t\tthis.zone.run(()=>{\r\n\t\t\t\tthis.forms = this.filterPipe.transform(forms, \"\");\r\n\t\t\t\tthis.getItems({target: {value: \"\"}});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleSearch() {\r\n\t\tthis.searchMode = !this.searchMode;\r\n\t\tthis.searchTrigger = this.searchMode ? \"visible\" : \"hidden\";\r\n\t\tif(this.searchMode){\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.searchbar.setFocus();\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t}\r\n\r\n\tdoInfinite(infiniteScroll?: InfiniteScroll) {\r\n\t\tthis.client.getForms().subscribe(forms => {\r\n\t\t\tthis.forms = this.forms.concat(forms);\r\n\t\t\tif (infiniteScroll) {\r\n\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsync() {\r\n\t\tthis.client.getUpdates().subscribe(()=> {});\r\n\t}\r\n\r\n\tgetItems(event) {\r\n\t\tlet val = event.target.value;\r\n\t\tlet regexp = new RegExp(val, \"i\");\r\n\t\tthis.filteredForms = [].concat(this.forms.filter(form => {\r\n\t\t\treturn !val || regexp.test(form.name);\r\n\t\t}));\r\n\t}\r\n\r\n\tpresentActionSheet(form: Form) {\r\n\t\tlet actionSheet = this.actionCtrl.create({\r\n\t\t\ttitle: form.name,\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Capture',\r\n\t\t\t\t\ticon: \"magnet\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('capture clicked');\r\n\t\t\t\t\t\tthis.navCtrl.push(FormCapture, { form: form });\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: 'Review Submissions',\r\n\t\t\t\t\ticon: \"eye\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('review clicked');\r\n\t\t\t\t\t\tthis.navCtrl.push(FormReview, { form: form, isDispatch: false });\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('Cancel clicked');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tactionSheet.present();\r\n\t}\r\n\r\n\tionViewDidEnter() {\t\t\t\t\r\n\t\tthis.doRefresh();\r\n\t\tthis.sub = this.syncClient.entitySynced.subscribe((type)=>{\r\n\t\t\tif(type == \"Forms\" || type == \"Submissions\"){\r\n\t\t\t\tthis.doRefresh();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tionViewDidLeave() {\r\n\t\tthis.sub.unsubscribe();\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/forms/forms.ts","import { Component, ViewChild, NgZone } from '@angular/core';\r\nimport { NavController, NavParams, ModalController, MenuController, AlertController, Platform, Navbar } from 'ionic-angular';\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { Form, FormSubmission, SubmissionStatus, DeviceFormMembership, DispatchOrder } from \"../../model\";\r\nimport { FormView } from \"../../components/form-view\";\r\nimport { ProspectSearch } from \"../prospect-search\";\r\n\r\n@Component({\r\n\tselector: 'form-capture',\r\n\ttemplateUrl: 'form-capture.html'\r\n})\r\nexport class FormCapture {\r\n\r\n\tform: Form;\r\n\r\n\tsubmission: FormSubmission;\r\n\r\n\tdispatch: DispatchOrder;\r\n\r\n\t@ViewChild(\"formView\") formView: FormView;\r\n\t@ViewChild(\"navbar\") navbar: Navbar;\r\n\r\n\tvalid: boolean;\r\n\r\n\tprospect: DeviceFormMembership;\r\n\r\n\tprivate backUnregister;\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate zone: NgZone,\r\n\t\tprivate modal: ModalController,\r\n\t\tprivate menuCtrl: MenuController,\r\n\t\tprivate alertCtrl: AlertController,\r\n\t\tprivate platform: Platform) {\r\n\t\tconsole.log(\"FormCapture\");\r\n\t}\r\n\r\n\tionViewWillEnter() {\r\n\t\tthis.form = this.navParams.get(\"form\");\r\n\t\tthis.submission = this.navParams.get(\"submission\");\r\n\t\tthis.dispatch = this.navParams.get(\"dispatch\");\r\n\t\tif (this.dispatch) {\r\n\t\t\tthis.form = this.dispatch.form;\r\n\t\t}\r\n\t\tif (!this.submission) {\r\n\t\t\tthis.submission = new FormSubmission();\r\n\t\t\tthis.submission.form_id = this.dispatch ? this.dispatch.form_id : this.form.form_id;\r\n\t\t} else {\r\n\t\t\tthis.client.getContact(this.form, this.submission.prospect_id).subscribe(contact => {\r\n\t\t\t\tthis.prospect = contact;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.menuCtrl.enable(false);\r\n\t}\r\n\r\n\tisReadOnly(submission: FormSubmission): boolean {\r\n\t\treturn submission && submission.status == SubmissionStatus.Submitted;\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tthis.backUnregister = this.platform.registerBackButtonAction(() => {\r\n\t\t\tthis.doBack();\r\n\t\t}, Number.MAX_VALUE);\r\n\t\tthis[\"oldClick\"] = this.navbar.backButtonClick;\r\n\t\tthis.navbar.backButtonClick = () => {\r\n\t\t\tthis.doBack();\r\n\t\t};\r\n\t\tif (this.form.is_mobile_kiosk_mode) {\r\n\t\t\tthis.client.hasKioskPassword().subscribe(hasPwd => {\r\n\t\t\t\tif (!hasPwd) {\r\n\t\t\t\t\tthis.alertCtrl.create({\r\n\t\t\t\t\t\ttitle: 'Set kiosk mode pass code',\r\n\t\t\t\t\t\tinputs: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: 'passcode',\r\n\t\t\t\t\t\t\t\tplaceholder: 'Kiosk Mode Pass Code',\r\n\t\t\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tbuttons: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: 'Ok',\r\n\t\t\t\t\t\t\t\thandler: (data) => {\r\n\t\t\t\t\t\t\t\t\tlet password = data.passcode;\r\n\t\t\t\t\t\t\t\t\tthis.client.setKioskPassword(password).subscribe((valid) => {\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}).present();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tionViewWillLeave() {\r\n\t\tif (this.backUnregister) {\r\n\t\t\tthis.backUnregister();\r\n\t\t}\r\n\t\tthis.navbar.backButtonClick = this[\"oldClick\"];\r\n\t}\r\n\r\n\tionViewDidLeave(){\t\t\r\n\t\tthis.menuCtrl.enable(true);\r\n\t}\r\n\r\n\tdoRefresh(refresher) {\r\n\r\n\t}\r\n\r\n\r\n\tdoBack() {\r\n\t\tif (this.form.is_mobile_kiosk_mode) {\r\n\t\t\tlet alert = this.alertCtrl.create({\r\n\t\t\t\ttitle: 'Enter pass code',\r\n\t\t\t\tinputs: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'passcode',\r\n\t\t\t\t\t\tplaceholder: 'Kiosk Mode Pass Code',\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tbuttons: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'Ok',\r\n\t\t\t\t\t\thandler: (data) => {\r\n\t\t\t\t\t\t\tlet password = data.passcode;\r\n\t\t\t\t\t\t\tthis.client.validateKioskPassword(password).subscribe((valid) => {\r\n\t\t\t\t\t\t\t\tif(valid){\r\n\t\t\t\t\t\t\t\t\tthis.internalBack();\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\talert.present();\r\n\t\t}else{\r\n\t\t\tthis.internalBack();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate internalBack(){\r\n\t\tif (!this.formView.hasChanges()) {\r\n\t\t\tthis.navCtrl.pop();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet alert = this.alertCtrl.create({\r\n\t\t\ttitle: 'Confirm exit',\r\n\t\t\tmessage: 'You have unsaved changes. Are you sure you want to go back?',\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('Cancel clicked');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Go back',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.navCtrl.pop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\talert.present();\r\n\t}\r\n\r\n\tdoSave() {\r\n\t\tif (!this.valid) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.submission.fields = this.formView.getValues();\r\n\t\tif (!this.submission.id) {\r\n\t\t\tthis.submission.id = new Date().getTime();\r\n\t\t}\r\n\t\tvar valid = true;\r\n\t\tthis.form.elements.forEach((element: any) => {\r\n\t\t\tif (element.is_required && !this.submission.fields[element.identifier]) {\r\n\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!valid) {\r\n\t\t\tthis.submission.status = SubmissionStatus.InvalidFields;\r\n\t\t} else if (this.submission.status != SubmissionStatus.Blocked) {\r\n\t\t\tthis.submission.status = SubmissionStatus.ToSubmit;\r\n\t\t}\r\n\t\tthis.client.saveSubmission(this.submission, this.form).subscribe(sub => {\r\n\t\t\tif(this.form.is_mobile_kiosk_mode){\r\n\t\t\t\tthis.submission = null;\r\n\t\t\t\tthis.form = null;\r\n\t\t\t\tthis.dispatch = null;\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.zone.run(()=>{\r\n\t\t\t\t\t\tthis.ionViewWillEnter();\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 10);\r\n\t\t\t}else{\r\n\t\t\t\tthis.navCtrl.pop();\r\n\t\t\t}\r\n\t\t}, err => {\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tonValidationChange(valid: boolean) {\r\n\t\tthis.valid = valid;\r\n\t}\r\n\r\n\tsearchProspect() {\r\n\t\tlet search = this.modal.create(ProspectSearch, { form: this.form })\r\n\t\tsearch.onDidDismiss((data: DeviceFormMembership) => {\r\n\t\t\tif (data) {\r\n\t\t\t\tthis.prospect = data;\r\n\t\t\t\tthis.submission.prospect_id = data.prospect_id;\r\n\t\t\t\tthis.submission.email = data.fields[\"Email\"];\r\n\t\t\t\tthis.submission.first_name = data.fields[\"FirstName\"];\r\n\t\t\t\tthis.submission.last_name = data.fields[\"LastName\"];\r\n\t\t\t\tlet id = null;\r\n\t\t\t\tfor (let field in data.fields) {\r\n\t\t\t\t\tid = this.form.getIdByUniqueFieldName(field)\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.submission.fields[id] = data.fields[field];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tsearch.present();\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/form-capture/form-capture.ts","import { OcrSelector } from '../ocr-selector/index';\r\nimport { Component, NgZone, Input, SimpleChange, Output, EventEmitter, ViewChildren, QueryList } from '@angular/core';\r\nimport { Form, FormElement, DeviceFormMembership, FormSubmission, FormElementType, ElementMapping } from \"../../model\";\r\nimport { DateTime, ModalController } from \"ionic-angular\";\r\nimport { FormBuilder, AbstractControl, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { CustomValidators } from '../../util/validator';\r\nimport { Subscription } from \"rxjs\";\r\n\r\n@Component({\r\n\tselector: 'form-view',\r\n\ttemplateUrl: 'form-view.html'\r\n})\r\nexport class FormView {\r\n\r\n\t@Input() form: Form;\r\n\t@Input() submission: FormSubmission;\r\n\t@Input() prospect: DeviceFormMembership;\r\n\t@Output() onChange = new EventEmitter();\r\n\t@Output() onValidationChange = new EventEmitter();\r\n\r\n\t@Input() readOnly: boolean = false;\r\n\r\n\t@ViewChildren(DateTime) dateTimes: QueryList<DateTime>;\r\n\r\n\ttheForm: FormGroup = null;\r\n\r\n\tdisplayForm: Form = <any>{};\r\n\r\n\tprivate sub: Subscription;\r\n\r\n\tselectionMode: boolean = false;\r\n\r\n\tdata: any;\r\n\r\n\tbarcodeStatusMap = {\r\n\t\tundefined: \"\",\r\n\t\tnull: \"\",\r\n\t\t0 : \"\",\r\n\t\t1 : \"\",\r\n\t\t2 : \"queued\"\r\n\t}\r\n\r\n\tconstructor(private fb: FormBuilder, private zone: NgZone, private modalCtrl: ModalController) {\r\n\t}\r\n\r\n\tshowSelection(){\r\n\t\tlet modal = this.modalCtrl.create(OcrSelector, {imageInfo:\"\", form: this.form, submission: this.submission});\r\n\t\tmodal.present();\r\n\t}\r\n\r\n\tngAfterViewInit() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tvar tzoffset = (new Date()).getTimezoneOffset() * 60000; //offset in milliseconds\r\n\t\t\tvar localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0,-1);\r\n\t\t\tthis.dateTimes.changes.subscribe((dateTime) => {\r\n\t\t\t\tthis.dateTimes.forEach((dt) => {\r\n\t\t\t\t\tdt.setValue(localISOTime);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic hasChanges(): boolean {\r\n\t\treturn this.theForm.dirty;\r\n\t}\r\n\r\n\tpublic getValues(): { [key: string]: string } {\r\n\t\tvar data = {};\r\n\t\tlet parse = (form: FormGroup, data: any) => {\r\n\t\t\tfor (let id in form.controls) {\r\n\t\t\t\tlet control = form.controls[id];\r\n\t\t\t\tif (control instanceof FormGroup) {\r\n\t\t\t\t\tparse(control, data);\r\n\t\t\t\t} else{\r\n\t\t\t\t\tdata[id] = control.value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.theForm && parse(this.theForm, data);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tngOnChanges(changes: { [propertyName: string]: SimpleChange }) {\r\n\t\tif (changes['form'] || changes['submission']) {\r\n\t\t\tif (this.form && this.submission) {\r\n\t\t\t\tthis.readOnly = this.submission.isSubmitted();\r\n\t\t\t\tsetTimeout(()=> {\r\n\t\t\t\t\tthis.setupFormGroup();\r\n\t\t\t\t}, 1);\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tthis.theForm = new FormGroup({});\r\n\t\t\t\tthis.displayForm = <any>{};\r\n\t\t\t}\r\n\t\t} else if (changes['prospect'] && this.prospect) {\r\n\t\t\tvar foundEmail, foundName;\r\n\t\t\tfor (let i = 0; i < this.form.elements.length; i++) {\r\n\t\t\t\tif (this.form.elements[i].type == \"email\" && !foundEmail) {\r\n\t\t\t\t\tthis.theForm.get(\"element_\" + this.form.elements[i].id).setValue(this.prospect.fields[\"Email\"]);\r\n\t\t\t\t\tfoundEmail = true;\r\n\t\t\t\t} else if (this.form.elements[i].type == \"simple_name\" && !foundName) {\r\n\t\t\t\t\tvar id = \"element_\" + this.form.elements[i].id;\r\n\t\t\t\t\tthis.theForm.get(id).get(id + \"_1\").setValue(this.prospect.fields[\"FirstName\"]);\r\n\t\t\t\t\tthis.theForm.get(id).get(id + \"_2\").setValue(this.prospect.fields[\"LastName\"]);\r\n\t\t\t\t\tfoundName = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate setupFormGroup() {\r\n\t\tif (this.sub) {\r\n\t\t\tthis.sub.unsubscribe();\r\n\t\t}\r\n\t\tthis.data = this.getValues();\r\n\t\tif (this.submission && this.submission.fields) {\r\n\t\t\tthis.data = Object.assign(Object.assign({}, this.submission.fields), this.data);\r\n\t\t}\r\n\t\tlet f = this.fb.group({});\r\n\t\tthis.form.elements.forEach((element) => {\r\n\t\t\tvar identifier = \"element_\" + element.id;\r\n\t\t\telement[\"identifier\"] = identifier;\r\n\t\t\tvar control: AbstractControl = null;\r\n\t\t\tif (element.mapping.length > 1) {\r\n\t\t\t\tvar opts = {};\r\n\t\t\t\telement.mapping.forEach((entry, index) => {\r\n\t\t\t\t\tentry[\"identifier\"] = identifier + \"_\" + (index + 1);\r\n\t\t\t\t\topts[entry[\"identifier\"]] = new FormControl({ value: this.data[entry[\"identifier\"]] ? this.data[entry[\"identifier\"]] : this.getDefaultValue(element), disabled: element.is_readonly || this.readOnly }, this.makeValidators(element));\r\n\t\t\t\t})\r\n\t\t\t\tcontrol = this.fb.group(opts);\r\n\t\t\t} else {\r\n\t\t\t\tcontrol = this.fb.control({ value: this.data[identifier] || this.getDefaultValue(element), disabled: element.is_readonly || this.readOnly });\r\n\t\t\t\tcontrol.setValidators(this.makeValidators(element));\r\n\t\t\t}\r\n\t\t\tf.addControl(identifier, control);\r\n\t\t});\r\n\t\tthis.theForm = f;\r\n\t\t//console.log(this.form, f);\r\n\t\tthis.sub = this.theForm.statusChanges.subscribe(() => {\r\n\t\t\tthis.onValidationChange.emit(this.theForm.valid);\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.zone.run(() => {\r\n\t\t\t\tthis.displayForm = this.form;\r\n\t\t\t});\r\n\t\t}, 150);\r\n\t}\r\n\r\n\tprivate getDefaultValue(element: FormElement): any{\r\n\t\tswitch(element.type){\r\n\t\t\tcase FormElementType.checkbox:\r\n\t\t\t\tlet data = [];\r\n\t\t\t\telement.options.forEach((opt) => {\r\n\t\t\t\t\tif(opt.is_default == \"1\"){\r\n\t\t\t\t\t\tdata.push(opt.option);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn data;\r\n\t\t\tcase FormElementType.select:\r\n\t\t\tcase FormElementType.radio:\r\n\t\t\t\tlet d = \"\";\r\n\t\t\t\telement.options.forEach((opt) => {\r\n\t\t\t\t\tif(opt.is_default == \"1\"){\r\n\t\t\t\t\t\td = opt.option;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn d;\r\n\r\n\t\t}\r\n\t\treturn element.default_value;\r\n\t}\r\n\r\n\tprivate makeValidators(element: FormElement): any[] {\r\n\t\tvar validators = [];\r\n\t\tif (element.is_required) {\r\n\t\t\tvalidators.push(Validators.required);\r\n\t\t}\r\n\t\tswitch (element.type) {\r\n\t\t\tcase \"email\":\r\n\t\t\t\tvalidators.push(CustomValidators.email);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"url\":\r\n\t\t\t\tvalidators.push(CustomValidators.url);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"text\":\r\n\t\t\t\tvalidators.push(Validators.maxLength(255));\r\n\t\t\t\tbreak;\t\t\t\t\r\n\t\t\tcase \"phone\":\r\n\t\t\t\tvalidators.push(CustomValidators.phone());\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn validators;\r\n\t}\r\n\r\n\tonInputChange() {\r\n\r\n\t}\r\n\r\n\tsetHour(event) {\r\n\r\n\t}\r\n\r\n\tsetDate(event) {\r\n\t\t//console.log(event);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/form-view.ts","import { FormUtils } from '../../util/form';\r\nimport { FormElement, FormSubmission } from '../../../.tmp/model/index';\r\nimport { FormElementType } from '../../model/index';\r\nimport { Component, ElementRef, ViewChild, NgZone, HostListener } from '@angular/core';\r\nimport {\r\n  trigger,\r\n  state,\r\n  style,\r\n  animate,\r\n  transition\r\n} from '@angular/animations';\r\nimport { NavParams, ActionSheetController, AlertController, ViewController, Content } from \"ionic-angular\";\r\nimport { Form } from \"../../model\";\r\nimport { ImageProcessor, Info, RecognitionResult } from \"../../services/image-processor\";\r\nimport { File } from '@ionic-native/file';\r\n\r\n@Component({\r\n\tselector: 'ocr-selector',\r\n\ttemplateUrl: 'ocr-selector.html',\r\n\tanimations: [\r\n\t\ttrigger('isVisibleChanged', [\r\n\t\t\tstate('true', style({ opacity: 1, \"z-index\": 1})),\r\n\t\t\tstate('false', style({ opacity: 0, \"z-index\": -1 })),\r\n\t\t\ttransition('* => *', animate('350ms'))\r\n\t\t])\r\n\t]\r\n})\r\nexport class OcrSelector {\r\n\r\n\t@ViewChild(Content) \r\n\tcontent: Content;\r\n\r\n\tpublic form: Form;\r\n\r\n\tpublic submission: FormSubmission;\r\n\r\n\tpublic valuesToPropagate: any;\r\n\r\n\timage: string;\r\n\r\n\tprivate multiselect = false;\t\r\n\r\n\tprivate info: Info;\r\n\r\n\tprivate selectedWords = {};\r\n\r\n\t@ViewChild('card') elementView: ElementRef;\r\n\r\n\twordElements: Word[] = [];\r\n\tloading: boolean = true;\r\n\tisLoading = this.loading + \"\";\r\n\tchangedValues:any = {};\r\n\tprivate oldWidth = 0;\r\n\r\n\tprivate result: RecognitionResult;\r\n\r\n\tprivate restrictedTypes: string[] = [\r\n\t\t\"page_break\",\r\n\t\t\"section\",\r\n\t\t\"image\",\r\n\t\t\"business_card\",\r\n\t\t\"signature\"\r\n\t];\r\n\r\n\tprivate selectValueForElement: string;\r\n\r\n\tpublic title: string = \"Recognized text\";\r\n\r\n\tconstructor(private params: NavParams,\r\n\t\t\t\tprivate viewCtrl: ViewController,\r\n\t\t\t\tprivate zone: NgZone,\r\n\t\t\t\tprivate actionSheetCtrl: ActionSheetController,\r\n\t\t\t\tprivate alertCtrl: AlertController,\r\n\t\t\t\tprivate imageProc: ImageProcessor) {\r\n\t\tthis.info = params.get(\"imageInfo\");\r\n\t\tthis.submission = JSON.parse(JSON.stringify(params.get('submission') || {}));\r\n\t\tthis.form = params.get(\"form\") || { \"id\": 42, \"form_id\": 42, \"description\": \"This is your form description. Click here to edit.\", \"title\": \"Untitled Form\", \"list_id\": 0, \"name\": \"Device Form - Collector\", \"archive_date\": \"2017-05-22T12:41:00+00:00\", \"created_at\": \"2016-02-22T10:45:21+00:00\", \"updated_at\": \"2016-02-22T15:54:11+00:00\", \"success_message\": \"Success! Your submission has been saved!\", \"submit_error_message\": \"Form not submitted.\", \"submit_button_text\": \"Submit\", \"elements\": [{ \"id\": 1, \"title\": \"Name\", \"field_error_message\": \"\", \"size\": \"small\", \"is_required\": false, \"is_always_display\": false, \"is_conditional\": false, \"is_not_prefilled\": false, \"is_hidden\": false, \"is_readonly\": false, \"type\": \"simple_name\", \"position\": 0, \"default_value\": \"\", \"total_child\": 1, \"options\": [], \"mapping\": [{ \"ll_field_id\": \"17\", \"ll_field_unique_identifier\": \"LastName\", \"ll_field_type\": \"Standard\", \"ll_field_data_type\": \"string\", \"identifier\": \"element_1_1\" }, { \"ll_field_id\": \"16\", \"ll_field_unique_identifier\": \"FirstName\", \"ll_field_type\": \"Standard\", \"ll_field_data_type\": \"string\", \"identifier\": \"element_1_2\" }], \"identifier\": \"element_1\" }, { \"id\": 2, \"title\": \"Email\", \"field_error_message\": \"\", \"size\": \"medium\", \"is_required\": false, \"is_always_display\": false, \"is_conditional\": false, \"is_not_prefilled\": false, \"is_hidden\": false, \"is_readonly\": false, \"type\": \"email\", \"position\": 1, \"default_value\": \"\", \"total_child\": 0, \"options\": [], \"mapping\": [{ \"ll_field_id\": \"21\", \"ll_field_unique_identifier\": \"Email\", \"ll_field_type\": \"Standard\", \"ll_field_data_type\": \"string\" }], \"identifier\": \"element_2\" }, { \"id\": 3, \"title\": \"Company\", \"field_error_message\": \"\", \"size\": \"medium\", \"is_required\": false, \"is_always_display\": false, \"is_conditional\": false, \"is_not_prefilled\": false, \"is_hidden\": false, \"is_readonly\": false, \"type\": \"text\", \"position\": 2, \"default_value\": \"\", \"total_child\": 0, \"options\": [], \"mapping\": [{ \"ll_field_id\": \"22\", \"ll_field_unique_identifier\": \"Company\", \"ll_field_type\": \"Standard\", \"ll_field_data_type\": \"string\" }], \"identifier\": \"element_3\" }], \"total_submissions\": 1, \"total_hold\": 0 };\r\n\t\tthis.image = this.info.dataUrl;\r\n\t}\r\n\r\n\tonSelect(identifier: string){\r\n\t\tthis.content.scrollToTop(100);\r\n\t\tthis.selectValueForElement = identifier;\r\n\t\tthis.title = \"Choose for \" + FormUtils.getLabelByIdentifier(identifier, this.form);\r\n\t}\r\n\r\n\tpropagateDirectChanges(data){\r\n\t\tfor(let identifier in data){\r\n\t\t\tif(typeof data[identifier] == \"object\"){\r\n\t\t\t\tfor(let id in data[identifier]){\r\n\t\t\t\t\tthis.wordElements.forEach(word => {\r\n\t\t\t\t\t\tif(word.assigned && word.assigned.field == id && word.word != data[identifier][id]){\r\n\t\t\t\t\t\t\tword.word = data[identifier][id];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.wordElements.forEach(word => {\r\n\t\t\t\t\tif(word.assigned && word.assigned.field == identifier && word.word != data[identifier]){\r\n\t\t\t\t\t\tword.word = data[identifier];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tlet z = this.zone;\r\n\t\tlet t = this;\r\n\t\tthis.oldWidth = this.elementView.nativeElement.width;\r\n\t\tsetTimeout(() => {\r\n\t\t\tt.imageProc.recognize(t.info.dataUrl).subscribe((data) => {\r\n\t\t\t\tz.run(()=>{\r\n\t\t\t\t\tt.result = data;\r\n\t\t\t\t\tt.positionWords(data);\r\n\t\t\t\t\tt.loading = false;\r\n\t\t\t\t\tt.isLoading = t.loading + \"\";\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}, 1);\r\n\t}\r\n\r\n\tflip(){\r\n\t\tlet z = this.zone;\r\n\t\tlet t = this;\r\n\t\tlet image = this.info.dataUrl;\r\n\t\tthis.loading = true;\r\n\t\tthis.isLoading = this.loading + \"\";\r\n\t\tthis.imageProc.flip(this.info.dataUrl).subscribe( info => {\r\n\t\t\tlet name = image.substr(image.lastIndexOf(\"/\") + 1).replace(/\\?.*/, \"\");\r\n\t\t\tlet folder = image.substr(0, image.lastIndexOf(\"/\"));\r\n\t\t\tnew File().writeFile(folder, name, this.imageProc.dataURItoBlob(info.dataUrl), {replace: true}).then((entry)=>{\r\n\t\t\t\tz.run(() => {\r\n\t\t\t\t\tt.image = t.info.dataUrl.replace(/\\?.*/, \"\") + \"?\" + parseInt(((1 + Math.random())*1000) + \"\");\r\n\t\t\t\t\tt.info.dataUrl = t.image;\r\n\t\t\t\t\tt.ionViewDidEnter();\r\n\t\t\t\t});\r\n\t\t\t});\t\t\r\n\t\t});\r\n\t}\r\n\r\n\t@HostListener(\"window:resize\", [\"$event\"])\r\n\tonResize(event){\r\n\t\tif(this.elementView.nativeElement.width != this.oldWidth && this.result){\r\n\t\t\tthis.oldWidth = this.elementView.nativeElement.width;\r\n\t\t\tconsole.log(\"repositioning\");\r\n\t\t\tthis.positionWords(this.result);\r\n\t\t}\r\n\t}\r\n\r\n\tpositionWords(data: {\r\n\t\trecognizedText: string;\r\n\t\twords: {\r\n\t\t\tword: string;\r\n\t\t\tbox: string;\r\n\t\t\tconfidence: number;\r\n\t\t}[]\r\n\t}) {\r\n\t\tvar wRatio =1; 100/this.info.width; //this.elementView.nativeElement.width / this.info.width;\r\n\t\tvar hRatio =1; 100/this.info.height; //this.elementView.nativeElement.height / this.info.height;\r\n\t\tvar ratio = this.elementView.nativeElement.width / this.info.width;\r\n\t\tlet list: Word[] = [];\r\n\t\tlet w: Word;\r\n\t\tlet uom = \"px\";\r\n\t\tdata.words.forEach(element => {\r\n\t\t\tw = new Word();\r\n\t\t\tw.word = element.word;\r\n\t\t\tw.confidence = element.confidence;\r\n\t\t\tvar coords = element.box.split(\" \");\r\n\t\t\tw.nLeft = (parseFloat(coords[0]) * ratio - 2);\r\n\t\t\tw.nTop = (parseFloat(coords[1]) * ratio - 2);\r\n\t\t\tw.nWidth = (parseFloat(coords[2]) * ratio + 4);\r\n\t\t\tw.nHeight = (parseFloat(coords[3]) * ratio + 4);\r\n\t\t\tw.left = w.nLeft + uom;\r\n\t\t\tw.top = w.nTop + uom;\r\n\t\t\tw.width = w.nWidth + uom;\r\n\t\t\tw.height = w.nHeight + uom;\r\n\t\t\tlist.push(w);\r\n\t\t\tthis.attemptAutoAssignment(w);\r\n\t\t});\r\n\t\tlet v = {};\r\n\t\tlet hasAssignments = false;\r\n\t\tlist.forEach(w => {\r\n\t\t\tif(w.assigned){\r\n\t\t\t\tv[w.assigned.field] = w.word;\r\n\t\t\t\thasAssignments = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif(hasAssignments){\r\n\t\t\tthis.valuesToPropagate = v;\r\n\t\t}\r\n\t\tthis.wordElements = list;\r\n\t}\r\n\r\n\twordClicked(word: Word, cb?: Function) {\r\n\t\tif(this.selectValueForElement != null){\r\n\t\t\tword.assigned = new Assigned(this.selectValueForElement, FormUtils.getLabelByIdentifier(this.selectValueForElement, this.form));\r\n\t\t\tthis.selectValueForElement = null;\r\n\t\t\tlet v = {};\r\n\t\t\tv[word.assigned.field] = word.word;\r\n\t\t\tthis.valuesToPropagate = v;\r\n\t\t\tthis.title = \"Recognized text\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet actionSheet = this.actionSheetCtrl.create({\r\n\t\t\ttitle: word.word,\r\n\t\t\tcssClass: \"word-actions\",\r\n\t\t\tsubTitle: word.assigned ? \"Assigned to field \" + word.assigned.label : \"Not assigned to a field\",\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Edit',\r\n\t\t\t\t\ticon: \"create\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tlet alert = this.alertCtrl.create({\r\n\t\t\t\t\t\t\ttitle: '<i class=\"pull-left icon icon-md ion-md-create\"></i>  ' + word.word,\r\n\t\t\t\t\t\t\tcssClass: \"edit-word\",\r\n\t\t\t\t\t\t\tinputs: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: 'word',\r\n\t\t\t\t\t\t\t\t\tplaceholder: 'word',\r\n\t\t\t\t\t\t\t\t\tvalue: word.word\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tbuttons: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\t\t\t\t\thandler: data => {\r\n\t\t\t\t\t\t\t\t\t\tthis.wordElements.forEach((element)=>{\r\n\t\t\t\t\t\t\t\t\t\t\telement.selected = false;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttext: 'Update',\r\n\t\t\t\t\t\t\t\t\thandler: data => {\r\n\t\t\t\t\t\t\t\t\t\tword.word = data.word;\r\n\t\t\t\t\t\t\t\t\t\tactionSheet.setTitle(word.word);\r\n\t\t\t\t\t\t\t\t\t\tlet t = {};\r\n\t\t\t\t\t\t\t\t\t\tt[word.assigned.field] = word.word;\r\n\t\t\t\t\t\t\t\t\t\tthis.valuesToPropagate = t;\r\n\t\t\t\t\t\t\t\t\t\tcb && cb(word);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\talert.present();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: word.assigned ? 'Assign to another field' : 'Assign to field',\r\n\t\t\t\t\ticon: \"eye\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tlet inputs = [];\r\n\t\t\t\t\t\tlet nameMap = {\r\n\t\t\t\t\t\t\t\"FirstName\": \"First Name\",\r\n\t\t\t\t\t\t\t\"LastName\": \"Last Name\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.form.elements.forEach(element => {\r\n\t\t\t\t\t\t\tif(this.restrictedTypes.indexOf(element.type) > -1){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(element.mapping && element.mapping.length > 1){\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\telement.mapping.forEach(mapping => {\r\n\t\t\t\t\t\t\t\t\tinputs.push({\r\n\t\t\t\t\t\t\t\t\ttype: 'radio',\r\n\t\t\t\t\t\t\t\t\tlabel: nameMap[mapping.ll_field_unique_identifier] || mapping.ll_field_unique_identifier,\r\n\t\t\t\t\t\t\t\t\tvalue: mapping[\"identifier\"]\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tinputs.push({\r\n\t\t\t\t\t\t\t\t\ttype: 'radio',\r\n\t\t\t\t\t\t\t\t\tlabel: element.title,\r\n\t\t\t\t\t\t\t\t\tvalue: element[\"identifier\"]\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(inputs);\r\n\t\t\t\t\t\tinputs[0].checked = true;\r\n\t\t\t\t\t\tlet alert = this.alertCtrl.create({\r\n\t\t\t\t\t\t\ttitle: '<i class=\"pull-left icon icon-md ion-md-eye\"></i>  ' + word.word,\r\n\t\t\t\t\t\t\t//subTitle: \"Assign to field\",\r\n\t\t\t\t\t\t\tcssClass: \"assign-field\",\r\n\t\t\t\t\t\t\tinputs: inputs,\r\n\t\t\t\t\t\t\tbuttons: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\t\t\t\t\thandler: data => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('Cancel clicked');\r\n\t\t\t\t\t\t\t\t\t\tthis.wordElements.forEach((element)=>{\r\n\t\t\t\t\t\t\t\t\t\t\telement.selected = false;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttext: 'Update',\r\n\t\t\t\t\t\t\t\t\thandler: data => {\r\n\t\t\t\t\t\t\t\t\t\tcb && cb(word);\r\n\t\t\t\t\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < this.form.elements.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.form.elements[i][\"identifier\"] == data) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle = this.form.elements[i].title;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tword.assigned = new Assigned(data, title);\r\n\t\t\t\t\t\t\t\t\t\t\tlet v = {};\r\n\t\t\t\t\t\t\t\t\t\t\tv[word.assigned.field] = word.word;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.valuesToPropagate = v;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\talert.present();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.wordElements.forEach((element)=>{\r\n\t\t\t\t\t\t\telement.selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tactionSheet.present();\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tthis.viewCtrl.dismiss(null);\r\n\t}\r\n\r\n\tdone() {\r\n\t\tlet changedValues = {};\r\n\t\tthis.wordElements.forEach(word => {\r\n\t\t\tif(!!word.assigned){\r\n\t\t\t\tchangedValues[word.assigned.field] = word.word;\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.viewCtrl.dismiss(changedValues);\r\n\t}\r\n\r\n\tonPressStart(event){\r\n\t\tthis.zone.run(()=>{\r\n\t\t\tthis.multiselect = true;\r\n\t\t\tlet w = {};\r\n\t\t\tthis.wordElements.forEach((element, index)=>{\r\n\t\t\t\tw[index] = false;\r\n\t\t\t\telement.selected = false;\r\n\t\t\t});\r\n\t\t\tthis.selectedWords = w;\r\n\t\t});\r\n\t}\r\n\r\n\tonPressEnd(event){\r\n\t\tif(!this.multiselect){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.multiselect = false;\r\n\t\tlet words: Word[] = [];\r\n\t\tfor(let index in this.selectedWords){\r\n\t\t\tthis.selectedWords[index] && words.push(this.wordElements[index]);\r\n\t\t}\r\n\t\tlet word = this.buildWordGroup(words);\r\n\t\tthis.wordClicked(word, (word) => {\r\n\t\t\tlet words:Word[] = [];\r\n\t\t\tlet done = false;\r\n\t\t\tthis.wordElements.forEach((w, index)=>{\r\n\t\t\t\tif(!this.selectedWords[index]){\r\n\t\t\t\t\twords.push(w);\r\n\t\t\t\t}else if(!done){\r\n\t\t\t\t\twords.push(word);\r\n\t\t\t\t\tdone = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.wordElements = words;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate buildWordGroup(words: Word[]): Word{\r\n\t\tlet w = new Word();\r\n\t\tw.word = \"\";\r\n\t\tlet uom = \"px\";\r\n\t\tlet minx = Infinity, maxx = 0, miny = Infinity, maxy = 0;\r\n\t\twords.forEach((word) => {\r\n\t\t\tif(w.word){\r\n\t\t\t\tw.word += \" \";\r\n\t\t\t}\r\n\t\t\tw.word += word.word;\r\n\t\t\tminx = minx > word.nLeft ? word.nLeft: minx;\r\n\t\t\tminy = miny > word.nTop ? word.nTop: miny;\r\n\t\t\tmaxx = maxx < word.nLeft + word.nWidth ? word.nLeft + word.nWidth: maxx;\r\n\t\t\tmaxy = maxy < word.nTop + word.nHeight ? word.nTop + word.nHeight: maxy;\r\n\t\t});\r\n\t\tw.nTop = miny;\r\n\t\tw.nLeft = minx;\r\n\t\tw.nWidth = maxx - minx;\r\n\t\tw.nHeight = maxy - miny;\r\n\t\tw.left = w.nLeft + uom;\r\n\t\tw.top = w.nTop + uom;\r\n\t\tw.width = w.nWidth + uom;\r\n\t\tw.height = w.nHeight + uom;\r\n\t\treturn w;\r\n\t}\r\n\r\n\tonTouchMove(event:TouchEvent){\r\n\t\tif(this.multiselect && event.touches.length > 0){\r\n\t\t\tlet t = event.touches.item(0);\r\n\t\t\tlet elem = document.elementFromPoint(t.pageX, t.pageY);\r\n\t\t\tlet index = parseInt(elem.id);\r\n\t\t\tif(index > 0 && !this.selectedWords[index]){\r\n\t\t\t\tthis.zone.run(()=>{\r\n\t\t\t\t\tthis.selectedWords[index] = true;\r\n\t\t\t\t\tif(this.wordElements[index]){\r\n\t\t\t\t\t\tthis.wordElements[index].selected = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attemptAutoAssignment(word: Word){\r\n\t\t//test for email\r\n\t\tif(word.word.indexOf(\"@\") > 0 && word.word.endsWith(\".com\") || word.word.endsWith(\".net\") || word.word.endsWith(\".org\")){\r\n\t\t\t//we have an email, let's find an email field and if found set the word as assigned\r\n\t\t\tlet id = this.form.getIdByFieldType(FormElementType.email);\r\n\t\t\tif(id){\r\n\t\t\t\tfor (let i = 0; i < this.form.elements.length; i++) {\r\n\t\t\t\t\tif (this.form.elements[i][\"identifier\"] == id) {\r\n\t\t\t\t\t\tword.assigned = new Assigned(this.form.elements[i][\"identifier\"], this.form.elements[i].title);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass Word {\r\n\tword: string;\r\n\twidth: string|number;\r\n\theight: string|number;\r\n\ttop: string|number;\r\n\tleft: string|number;\r\n\tnWidth: number;\r\n\tnHeight: number;\r\n\tnTop: number;\r\n\tnLeft: number;\r\n\tconfidence: number;\r\n\tassigned: Assigned;\r\n\tselected: boolean = false;\r\n}\r\n\r\nclass Assigned {\r\n\tfield: string;\r\n\tlabel: string;\r\n\r\n\tconstructor(field: string, label: string) {\r\n\t\tthis.label = label;\r\n\t\tthis.field = field;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/ocr-selector/ocr-selector.ts","import { FormElement, Form } from '../model';\r\n\r\nexport class FormUtils{\r\n\r\n\tpublic static getLabelByIdentifier(identifier: string, form: Form): string{\r\n\t\tlet nameMap = {\r\n\t\t\t\"FirstName\": \"First Name\",\r\n\t\t\t\"LastName\": \"Last Name\"\r\n\t\t}\r\n\t\tfor(let index in form.elements){\r\n\t\t\tlet element = form.elements[index];\r\n\t\t\tif(element.mapping && element.mapping.length > 1){\t\t\r\n\t\t\t\tfor(let id in element.mapping){\t\t\r\n\t\t\t\t\tlet mapping = element.mapping[id];\t\r\n\t\t\t\t\tif(mapping[\"identifier\"] == identifier){\r\n\t\t\t\t\t\treturn nameMap[mapping.ll_field_unique_identifier] || mapping.ll_field_unique_identifier;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(element[\"identifier\"] == identifier){\r\n\t\t\t\t\treturn element.title;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/form.ts","import { Component, NgZone, Input, SimpleChange, Output, EventEmitter, ViewChildren, QueryList } from '@angular/core';\r\nimport { Form, FormElement, DeviceFormMembership, FormSubmission, FormElementType, ElementMapping } from \"../../model\";\r\nimport { DateTime } from \"ionic-angular\";\r\nimport { FormBuilder, AbstractControl, FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { CustomValidators } from '../../util/validator';\r\nimport { Subscription } from \"rxjs\";\r\n\r\n@Component({\r\n\tselector: 'selection-view',\r\n\ttemplateUrl: 'selection-view.html'\r\n})\r\nexport class FormSelectionView {\r\n\r\n\t@Input() form: Form;\r\n\t@Input() submission: FormSubmission;\r\n\t@Output() select: EventEmitter<string>;\r\n\t@Output() inputChange: EventEmitter<any>;\r\n\t@Input() outsideChanged: any;\r\n\r\n\tinputsDisabled: any;\r\n\r\n\ttheForm: FormGroup;\r\n\r\n\tdisplayForm: Form = <any>{};\r\n\r\n\tselectionMode: boolean = true;\r\n\r\n\tprivate sub: Subscription;\r\n\r\n\tdata: any;\r\n\r\n\tconstructor(private fb: FormBuilder, private zone: NgZone) {\r\n\t\tthis.theForm = fb.group({});\r\n\t\tthis.select = new EventEmitter<string>();\r\n\t\tthis.inputChange = new EventEmitter();\r\n\t}\r\n\r\n\tpublic hasChanges(): boolean {\r\n\t\treturn this.theForm.dirty;\r\n\t}\r\n\r\n\tngOnChanges(changes: { [propertyName: string]: SimpleChange }) {\r\n\t\tif (changes['form'] || changes['submission']) {\r\n\t\t\tif (this.form && this.submission) {\r\n\t\t\t\tthis.setupFormGroup();\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tthis.theForm = new FormGroup({});\r\n\t\t\t\tthis.displayForm = <any>{};\r\n\t\t\t}\r\n\t\t}else if(changes['outsideChanged']){\r\n\t\t\tfor(let identifier in this.outsideChanged){\r\n\t\t\t\tlet match = /(\\w+\\_\\d+)\\_\\d+/g.exec(identifier);\r\n\t\t\t\tlet ctrl: AbstractControl = null;\r\n\t\t\t\tif(match && match.length > 0){\r\n\t\t\t\t\tctrl = this.theForm.get(match[1]).get(identifier);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tctrl = this.theForm.get(identifier);\r\n\t\t\t\t}\r\n\t\t\t\tctrl.setValue(this.outsideChanged[identifier]);\r\n\t\t\t\tlet t = {};\r\n\t\t\t\tt[identifier] = false;\r\n\t\t\t\tthis.inputsDisabled = Object.assign({}, this.inputsDisabled, t);\r\n\t\t\t\tctrl.markAsTouched();\r\n\t\t\t\tctrl.enable();\r\n\t\t\t\tctrl.markAsDirty();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getValues(): { [key: string]: string } {\r\n\t\tvar data = {};\r\n\t\tlet parse = (form: FormGroup, data: any) => {\r\n\t\t\tfor (let id in form.controls) {\r\n\t\t\t\tlet control = form.controls[id];\r\n\t\t\t\tif (control instanceof FormGroup) {\r\n\t\t\t\t\tparse(control, data);\r\n\t\t\t\t} else{\r\n\t\t\t\t\tdata[id] = control.value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.theForm && parse(this.theForm, data);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tpublic selectEntry(identifier: string){\r\n\t\tthis.select.emit(identifier);\r\n\t}\r\n\t\r\n\tprivate setupFormGroup() {\r\n\t\tif (this.sub) {\r\n\t\t\tthis.sub.unsubscribe();\r\n\t\t}\r\n\t\tthis.data = this.getValues();\r\n\t\tif (this.submission && this.submission.fields) {\r\n\t\t\tthis.data = Object.assign(Object.assign({}, this.submission.fields), this.data);\r\n\t\t}\r\n\t\tlet f = this.fb.group({});\r\n\t\tthis.form.elements.forEach((element) => {\r\n\t\t\tvar identifier = element[\"identifier\"];\r\n\t\t\tvar control: AbstractControl = null;\r\n\t\t\tif (element.mapping.length > 1) {\r\n\t\t\t\tvar opts = {};\r\n\t\t\t\telement.mapping.forEach((entry, index) => {\r\n\t\t\t\t\topts[entry[\"identifier\"]] = new FormControl({ value: this.data[entry[\"identifier\"]] ? this.data[entry[\"identifier\"]] : this.getDefaultValue(element), disabled: true }, this.makeValidators(element));\r\n\t\t\t\t})\r\n\t\t\t\tcontrol = this.fb.group(opts);\r\n\t\t\t} else {\r\n\t\t\t\tcontrol = this.fb.control({ value: this.data[identifier] || this.getDefaultValue(element), disabled: true });\r\n\t\t\t\tcontrol.setValidators(this.makeValidators(element));\r\n\t\t\t}\r\n\t\t\tf.addControl(identifier, control);\r\n\t\t});\r\n\t\tthis.theForm = f;\r\n\t\tthis.sub = f.valueChanges.subscribe((data) => {\r\n\t\t\tthis.inputChange.emit(data);\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.zone.run(() => {\r\n\t\t\t\tthis.displayForm = this.form;\r\n\t\t\t});\r\n\t\t}, 150);\r\n\t}\r\n\r\n\tprivate getDefaultValue(element: FormElement): any{\r\n\t\tswitch(element.type){\r\n\t\t\tcase FormElementType.checkbox:\r\n\t\t\t\tlet data = [];\r\n\t\t\t\telement.options.forEach((opt) => {\r\n\t\t\t\t\tif(opt.is_default == \"1\"){\r\n\t\t\t\t\t\tdata.push(opt.option);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn data;\r\n\t\t\tcase FormElementType.select:\r\n\t\t\tcase FormElementType.radio:\r\n\t\t\t\tlet d = \"\";\r\n\t\t\t\telement.options.forEach((opt) => {\r\n\t\t\t\t\tif(opt.is_default == \"1\"){\r\n\t\t\t\t\t\td = opt.option;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn d;\r\n\r\n\t\t}\r\n\t\treturn element.default_value;\r\n\t}\r\n\r\n\tprivate makeValidators(element: FormElement): any[] {\r\n\t\tvar validators = [];\r\n\t\tif (element.is_required) {\r\n\t\t\tvalidators.push(Validators.required);\r\n\t\t}\r\n\t\tswitch (element.type) {\r\n\t\t\tcase \"email\":\r\n\t\t\t\tvalidators.push(CustomValidators.email);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"url\":\r\n\t\t\t\tvalidators.push(CustomValidators.url);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"text\":\r\n\t\t\t\tvalidators.push(Validators.maxLength(255));\r\n\t\t\t\tbreak;\t\t\t\t\r\n\t\t\tcase \"phone\":\r\n\t\t\t\tvalidators.push(CustomValidators.phone());\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn validators;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/selection-view.ts","import { Component, NgZone } from '@angular/core';\r\nimport { DeviceFormMembership, Form } from \"../../model\";\r\nimport { NavController, NavParams, ViewController } from 'ionic-angular';\r\nimport { BussinessClient } from \"../../services/business-service\";\r\n\r\n@Component({\r\n\tselector: 'prospect-search',\r\n\ttemplateUrl: 'prospect-search.html'\r\n})\r\nexport class ProspectSearch {\r\n\tstatic list = [];\r\n\tstatic formId = \"\";\r\n\r\n\tselectedContact: DeviceFormMembership = null;\r\n\tloading = true;\r\n\r\n\tform: Form;\r\n\r\n\tsearchFilter: string = \"\";\r\n\r\n\tcontacts: DeviceFormMembership[] = [];\r\n\r\n\tfilteredContacts: DeviceFormMembership[] = [];\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate viewCtrl: ViewController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate zone: NgZone) {\r\n\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tthis.viewCtrl.dismiss(null);\r\n\t}\r\n\r\n\tdone() {\r\n\t\tif(this.selectedContact){\r\n\t\t\tthis.viewCtrl.dismiss(this.selectedContact);\r\n\t\t}\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tthis.form = this.navParams.get(\"form\");\r\n\t\tthis.loading = true;\r\n\t\tthis.client.getContacts(this.form).subscribe(contacts => {\r\n\t\t\tthis.zone.run(()=>{\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tthis.contacts = contacts;\r\n\t\t\t\tProspectSearch.list = contacts;\r\n\t\t\t\tProspectSearch.formId = this.form.form_id+\"\";\r\n\t\t\t\tthis.onInput({target: {value: \"\"}})\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonInput(event){\r\n\t\tlet val = event.target.value;\r\n\t\tlet regexp = new RegExp(val, \"i\");\r\n\t\tthis.filteredContacts = this.contacts.filter(contact => {\t\t\t\r\n\t\t\treturn !val || regexp.test(contact[\"search\"]);\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/prospect-search/prospect-search.ts","import { Component, NgZone } from '@angular/core';\r\nimport { NavController, NavParams, ToastController } from 'ionic-angular';\r\nimport { SyncClient } from \"../../services/sync-client\";\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { Form, FormSubmission, SubmissionStatus, FormElementType } from \"../../model\";\r\nimport { FormCapture } from \"../form-capture\";\r\nimport { Subscription } from \"rxjs\";\r\n\r\n@Component({\r\n\tselector: 'form-review',\r\n\ttemplateUrl: 'form-review.html'\r\n})\r\nexport class FormReview {\r\n\r\n\tform: Form = new Form();\r\n\r\n\tfilter: string = \"\";\r\n\r\n\tsubmissions: FormSubmission[] = [];\r\n\r\n\tloading: boolean = true;\r\n\r\n\tsyncing: boolean = false;\r\n\r\n\tprivate sub: Subscription;\r\n\r\n\tprivate isDispatch;\r\n\r\n\tfilteredSubmissions: FormSubmission[] = [];\r\n\r\n\thasSubmissionsToSend: boolean = false;\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate zone: NgZone,\r\n\t\tprivate syncClient: SyncClient,\r\n\t\tprivate toast: ToastController) {\r\n\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tthis.form = this.navParams.get(\"form\");\r\n\t\tthis.isDispatch = this.navParams.get(\"isDispatch\");\r\n\t\tthis.loading = true;\r\n\t\tthis.doRefresh();\r\n\t\tthis.syncing = this.syncClient.isSyncing();\r\n\r\n\t\tthis.sub = this.syncClient.onSync.subscribe(stats => { },\r\n\t\t\t(err) => { },\r\n\t\t\t() => {\r\n\t\t\t\tthis.syncing = this.syncClient.isSyncing();\r\n\t\t\t\tthis.doRefresh();\r\n\t\t\t});\r\n\t}\r\n\r\n\tionViewDidLeave() {\r\n\t\tthis.sub.unsubscribe();\r\n\t\tthis.sub = null;\r\n\t}\r\n\r\n\tgetIcon(sub: FormSubmission){\r\n\t\tlet result = \"checkmark-circle\";\r\n\t\tswitch (sub.status) {\r\n\t\t\tcase SubmissionStatus.ToSubmit:\r\n\t\t\t\tresult = sub.invalid_fields == 1 ? \"warning\": \"checkmark-circle\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetColor(submission: FormSubmission) {\r\n\t\tlet result = \"\";\r\n\t\tswitch (submission.status) {\r\n\t\t\tcase SubmissionStatus.OnHold:\r\n\t\t\t\tresult = \"orange\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase SubmissionStatus.Blocked:\r\n\t\t\t\tresult = \"danger\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase SubmissionStatus.ToSubmit:\r\n\t\t\t\tresult = submission.invalid_fields == 1 ? \"danger\": \"primary\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase SubmissionStatus.Submitted:\r\n\t\t\t\tresult = \"secondary\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase SubmissionStatus.InvalidFields:\r\n\t\t\t\tresult = \"danger\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgoToEntry(submission) {\r\n\t\tthis.navCtrl.push(FormCapture, { form: this.form, submission: submission });\r\n\t}\r\n\r\n\thasOnlyBusinessCard(submission: FormSubmission){\r\n\t\tlet id = this.form.getIdByFieldType(FormElementType.business_card);\r\n\t\tlet emailId = this.form.getIdByFieldType(FormElementType.email);\r\n\t\tlet nameId = this.form.getIdByFieldType(FormElementType.simple_name);\r\n\t\tlet email = emailId ? submission.fields[emailId] : \"\";\r\n\t\tlet name = nameId && submission.fields[nameId] ? submission.fields[nameId][nameId + \"_1\"] || submission.fields[nameId][nameId + \"_2\"] : \"\";\r\n\t\treturn !email && !name && submission.fields[id];\r\n\t}\r\n\r\n\tgetBusinessCard(submission: FormSubmission){\r\n\t\tlet id = this.form.getIdByFieldType(FormElementType.business_card);\r\n\t\treturn submission.fields[id] ? submission.fields[id][\"front\"] + \"?\" + new Date().getTime() : \"\" ;\r\n\t}\r\n\r\n\tdoRefresh() {\r\n\t\tthis.client.getSubmissions(this.form, this.isDispatch).subscribe(submissions => {\r\n\t\t\tthis.submissions = submissions;\r\n\t\t\tthis.loading = false;\r\n\t\t\tthis.onFilterChanged();\r\n\t\t});\r\n\t}\r\n\r\n\tonFilterChanged() {\r\n\t\tthis.zone.run(() => {\r\n\t\t\tvar f = this.filter;\r\n\t\t\tthis.filteredSubmissions = this.submissions.filter((sub)=>{\r\n\t\t\t\tsub[\"hasOnlyBusinessCard\"] = this.hasOnlyBusinessCard(sub);\r\n\t\t\t\treturn !f || sub.status + \"\" == f + \"\";\r\n\t\t\t}).reverse();\r\n\t\t\tthis.hasSubmissionsToSend = this.submissions.filter((sub)=>{return sub.status == SubmissionStatus.ToSubmit}).length > 0;\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tsync() {\r\n\t\tthis.syncing = true;\r\n\t\tthis.client.doSync(this.form.form_id).subscribe((data)=>{\r\n\t\t\tthis.zone.run(() => {\r\n\t\t\t\tthis.syncing = false;\r\n\t\t\t\tthis.doRefresh();\r\n\t\t\t});\r\n\t\t}, (err) => {\r\n\t\t\tthis.zone.run(() => {\r\n\t\t\t\tthis.syncing = false;\r\n\t\t\t\tthis.doRefresh();\r\n\t\t\t\tlet toaster = this.toast.create({\r\n\t\t\t\t\tmessage: \"There was an error sync-ing the submissions\",\r\n\t\t\t\t\tduration: 5000,\r\n\t\t\t\t\tposition: \"top\",\r\n\t\t\t\t\tcssClass: \"error\"\r\n\t\t\t\t});\r\n\t\t\t\ttoaster.present();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tstatusClick(event: Event, submission: FormSubmission) {\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tevent.stopPropagation();\r\n\t\tevent.preventDefault();\r\n\t\tvar initialState = null;\r\n\t\tif(submission.status == SubmissionStatus.ToSubmit){\r\n\t\t\tinitialState = submission.status;\r\n\t\t\tsubmission.status = SubmissionStatus.Blocked;\r\n\t\t}else if(submission.status == SubmissionStatus.Blocked){\r\n\t\t\tinitialState = submission.status;\r\n\t\t\tsubmission.status = SubmissionStatus.ToSubmit;\r\n\t\t}\r\n\t\tif(initialState){\r\n\t\t\tthis.client.saveSubmission(submission, this.form).subscribe(()=>{\r\n\t\t\t\tthis.onFilterChanged();\r\n\t\t\t}, (err)=>{\r\n\t\t\t\tsubmission.status = initialState;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/form-review/form-review.ts","import { Component } from '@angular/core';\r\nimport { User } from \"../../model\";\r\nimport { NavController, NavParams, AlertController, ModalController } from 'ionic-angular';\r\nimport { DBClient } from \"../../services/db-client\";\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { AppVersion } from '@ionic-native/app-version';\r\nimport { Login } from \"../login\";\r\nimport { OcrSelector } from \"../../components/ocr-selector\";\r\nimport { LogView } from \"../log\";\r\n//import { OcrSelector } from \"../../components/ocr-selector\";\r\ndeclare var screen;\r\n\r\n@Component({\r\n\tselector: 'settings',\r\n\ttemplateUrl: 'settings.html'\r\n})\r\nexport class Settings {\r\n\r\n\tsettings: any = {};\r\n\tuser: User = <any>{};\r\n\tshouldSave: boolean = false;\r\n\tversion: string;\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate db: DBClient,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate alertCtrl: AlertController,\r\n\t\tprivate modalCtrl: ModalController,\r\n\t\tprivate appVersion: AppVersion) {\r\n\t\tthis.appVersion.getVersionNumber().then((version) => {\r\n\t\t\tthis.version = version;\r\n\t\t});\r\n\t}\r\n\r\n\tionViewWillEnter() {\r\n\t\tthis.db.getAllConfig().subscribe(settings => {\r\n\t\t\tthis.settings = settings;\r\n\t\t\tthis.db.getRegistration().subscribe(user => {\r\n\t\t\t\tthis.user = user;\r\n\t\t\t\tthis.shouldSave = false;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tshowLogs(){\r\n\t\tlet modal = this.modalCtrl.create(LogView);\r\n\t\tmodal.present();\r\n\t}\r\n\r\n\tonChange() {\r\n\t\tthis.shouldSave = true;\r\n\t\tsetTimeout(()=>{\r\n\t\t\tthis.saveSettings();\r\n\t\t},1)\r\n\t}\r\n\r\n\tsaveSettings() {\r\n\t\tthis.db.saveConfig(\"autoUpload\", this.settings.autoUpload).subscribe(() => {\r\n\t\t\tthis.db.saveConfig(\"enableLogging\", this.settings.enableLogging).subscribe(() => {\r\n\t\t\t\tthis.db.saveConfig(\"kioskModePassword\", this.settings.kioskModePassword).subscribe(() => {\r\n\t\t\t\t\tthis.shouldSave = false;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tsync() {\r\n\t\tthis.client.getUpdates().subscribe(()=> {});\r\n\t}\r\n\r\n\tunauthenticate() {\r\n\t\tlet confirm = this.alertCtrl.create({\r\n\t\t\ttitle: 'Unauthenticate?',\r\n\t\t\tmessage: 'Are you sure you want to unauthenticate this device?',\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Unauthenticate',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.client.unregister(this.user).subscribe(()=>{\r\n\t\t\t\t\t\t\tthis.user = <any>{};\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tthis.navCtrl.setRoot(Login);\r\n\t\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tconfirm.present();\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/settings/settings.ts","import { Component, NgZone } from '@angular/core';\r\nimport { ViewController } from 'ionic-angular';\r\nimport { LogClient, LogEntry, LogSeverity } from \"../../services/log-client\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { Clipboard } from '@ionic-native/clipboard';\r\n\r\n@Component({\r\n\tselector: 'log',\r\n\ttemplateUrl: 'log.html'\r\n})\r\nexport class LogView{\r\n\t\r\n\tprivate sub: Subscription;\r\n\r\n\tlogs: LogEntry[];\r\n\r\n\tconstructor(private logClient: LogClient, \r\n\t\t\t\tprivate zone: NgZone, \r\n\t\t\t\tprivate viewCtrl: ViewController,\r\n\t\t\t\tprivate clipboard: Clipboard) {\r\n\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tthis.sub = this.logClient.log.subscribe((logEntry) => {\r\n\t\t\tthis.logs = this.logClient.getLogs();\r\n\t\t});\r\n\t}\r\n\r\n\tionViewDidLeave() {\r\n\t\tthis.sub.unsubscribe();\r\n\t\tthis.sub = null;\r\n\t}\r\n\r\n\tgetColor(log: LogEntry): string{\r\n\t\tif(log.severity == LogSeverity.ERROR){\r\n\t\t\treturn \"danger\";\r\n\t\t}else if(log.severity == LogSeverity.INFO){\r\n\t\t\treturn \"primary\";\r\n\t\t}else if(log.severity == LogSeverity.LOG){\r\n\t\t\treturn \"primary\";\r\n\t\t}else if(log.severity == LogSeverity.WARN){\r\n\t\t\treturn \"orange\";\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tgetIcon(log: LogEntry): string{\r\n\t\tif(log.severity == LogSeverity.ERROR){\r\n\t\t\treturn \"bug\";\r\n\t\t}else if(log.severity == LogSeverity.INFO){\r\n\t\t\treturn \"information-circle\";\r\n\t\t}else if(log.severity == LogSeverity.LOG){\r\n\t\t\treturn \"information-circle\";\r\n\t\t}else if(log.severity == LogSeverity.WARN){\r\n\t\t\treturn \"warning\";\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tthis.viewCtrl.dismiss(null);\r\n\t}\r\n\r\n\tdone() {\r\n\t\tthis.viewCtrl.dismiss(null);\r\n\t}\r\n\r\n\tcopy(){\r\n\t\tlet result = \"\";\r\n\t\tthis.logs.forEach((log)=>{\r\n\t\t\tresult += \"[\" + log.severity.name + \"] - \" + log.message + \"\\n\\n\";\r\n\t\t});\r\n\t\tthis.clipboard.copy(result)\r\n\t\t\t.then((data) => {\r\n\r\n\t\t\t})\r\n\t\t\t.catch((err)=>{\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/log/log.ts","/*\r\nionic-pullup v2 for Ionic/Angular 2\r\n \r\nCopyright 2016 Ariel Faur (https://github.com/arielfaur)\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\r\n\r\nimport { ChangeDetectionStrategy, Component, SimpleChange, EventEmitter, ElementRef, Renderer, ViewChild, ContentChild, Output, Input } from '@angular/core';\r\nimport { Gesture } from 'ionic-angular/gestures/gesture';\r\nimport { Platform } from 'ionic-angular';\r\n\r\nexport interface FooterMetadata {\r\n  height: number;\r\n  posY: number;\r\n  lastPosY: number;\r\n  defaultHeight?: number;\r\n}\r\n\r\nexport interface ViewMetadata {\r\n  tabs?: Element;\r\n  tabsHeight?: number;\r\n  hasBottomTabs?: boolean;  \r\n  header?: Element;\r\n  headerHeight?: number;\r\n}\r\n\r\nexport interface FooterTab {\r\n  x?: number;\r\n  y?: number;\r\n  upperLeftRadius?: number;\r\n  upperRightRadius?: number;\r\n  backgroundColor?: string;\r\n  color?: string;\r\n  content?: string;\r\n}\r\n\r\nexport enum IonPullUpFooterState {\r\n  Collapsed = 0,  \r\n  Expanded = 1,\r\n  Minimized = 2\r\n}\r\n\r\nexport enum IonPullUpFooterBehavior {\r\n  Hide, \r\n  Expand\r\n}\r\n\r\n@Component({\r\n    selector: 'ion-pullup',\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    template: `\r\n    <ion-footer #footer>\r\n      <ng-content></ng-content>\r\n    </ion-footer>\r\n    `\r\n})\r\nexport class IonPullUpComponent  { \r\n  @Input() state: IonPullUpFooterState;\r\n  @Output() stateChange: EventEmitter<IonPullUpFooterState> = new EventEmitter<IonPullUpFooterState>();\r\n\r\n  @Input() initialState: IonPullUpFooterState;          // TODO implemment\r\n  @Input() defaultBehavior: IonPullUpFooterBehavior;    // TODO implemment\r\n  @Input() maxHeight: number;\r\n\r\n  @Output() onExpand = new EventEmitter<any>();\r\n  @Output() onCollapse = new EventEmitter<any>();\r\n  @Output() onMinimize = new EventEmitter<any>();\r\n\r\n  @ContentChild('toolbar') childToolbar;\r\n  @ViewChild('footer') childFooter;\r\n\r\n  protected _footerMeta: FooterMetadata;\r\n  protected _currentViewMeta: ViewMetadata;  \r\n  protected _oldState: IonPullUpFooterState;\r\n\r\n  @Input() pop: boolean = false;\r\n\r\n  constructor(private platform: Platform, private el: ElementRef, private renderer: Renderer) {\r\n    this._footerMeta = {\r\n      height: 0,\r\n      posY:  0,\r\n      lastPosY: 0\r\n    }\r\n    this._currentViewMeta = {};  \r\n    this.state = IonPullUpFooterState.Minimized;\r\n    // sets initial state\r\n    this.initialState = this.initialState || IonPullUpFooterState.Minimized;\r\n    this.defaultBehavior = this.defaultBehavior || IonPullUpFooterBehavior.Expand;\r\n    this.maxHeight = this.maxHeight || 0;\r\n  }\r\n\r\n  ngOnChanges(changes: {[propertyName: string]: SimpleChange}) {\r\n    if (changes['pop']) { // fire your event\r\n      \r\n    }\r\n  }\r\n  \r\n  ngOnInit() {\r\n    window.addEventListener(\"orientationchange\", () => {\r\n      console.info('Changed orientation => updating');\r\n      this.updateUI();\r\n    });\r\n    this.platform.resume.subscribe(() => {\r\n      console.info('Resumed from background => updating');\r\n      this.updateUI();\r\n    });\r\n    /*window.addEventListener(\"resume\", () => {\r\n        this.updateUI();\r\n    });*/\r\n  }\r\n\r\n   ngAfterContentInit() {    \r\n      this.computeDefaults();\r\n\r\n      // TODO: test with tabs template (if it is a valid use case at all)\r\n      /*if (this._currentViewMeta.tabs && this._currentViewMeta.hasBottomTabs) {\r\n        this.renderer.setElementStyle(this.el.nativeElement, 'bottom', this._currentViewMeta.tabsHeight + 'px');\r\n      }*/\r\n\r\n      let barGesture = new Gesture(this.childToolbar.getElementRef().nativeElement);\r\n      barGesture.listen();\r\n      barGesture.on('tap', e => {\r\n        this.onTap(e);\r\n      });\r\n      barGesture.on('pan panstart panend', e => {\r\n        this.onDrag(e);\r\n      });\r\n\r\n      this.state = IonPullUpFooterState.Minimized;\r\n\r\n      this.updateUI(true);  // need to indicate whether it's first run to avoid emitting events twice due to change detection\r\n\r\n   }\r\n\r\n  public get expandedHeight() : number {\r\n    return window.innerHeight - this._currentViewMeta.headerHeight; // - this._currentViewMeta.tabsHeight; \r\n  }\r\n  \r\n  computeDefaults() {\r\n    this._footerMeta.defaultHeight =  this.childFooter.nativeElement.offsetHeight;\r\n    \r\n    // TODO: still need to test with tabs template (not convinced it is a valid use case...)\r\n    //this._currentViewMeta.tabs = this.el.nativeElement.closest('ion-tabs');\r\n    //this._currentViewMeta.hasBottomTabs = this._currentViewMeta.tabs && this._currentViewMeta.tabs.classList.contains('tabs-bottom');\r\n    //this._currentViewMeta.tabsHeight = this._currentViewMeta.tabs ? (<HTMLElement> this._currentViewMeta.tabs.querySelector('ion-tabbar-section')).offsetHeight : 0;\r\n    \r\n    this._currentViewMeta.header = document.querySelector('ion-navbar.toolbar');\r\n    this._currentViewMeta.headerHeight = this._currentViewMeta.header ? (<HTMLElement>this._currentViewMeta.header).offsetHeight : 0;\r\n  }\r\n  \r\n  computeHeights(isInit: boolean = false) {\r\n    this._footerMeta.height = this.maxHeight > 0 ? this.maxHeight : this.expandedHeight; \r\n\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, 'height', this._footerMeta.height + 'px');\r\n    \r\n    // TODO: implement minimize mode\r\n    //this.renderer.setElementStyle(this.el.nativeElement, 'min-height', this._footerMeta.height + 'px'); \r\n    //if (this.initialState == IonPullUpFooterState.Minimized) {\r\n    //  this.minimize()  \r\n    //} else {\r\n      if(this.state == IonPullUpFooterState.Minimized){\r\n        this.minimize();\r\n      }else{\r\n        this.collapse(isInit);\r\n      } \r\n    //} \r\n  }\r\n  \r\n  updateUI(isInit: boolean = false) {\r\n    setTimeout(() => {  \r\n      this.computeHeights(isInit);\r\n    }, 300);\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, 'transition', 'none');  // avoids flickering when changing orientation\r\n  }\r\n  \r\n  expand() {\r\n    this._footerMeta.lastPosY = 0;\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, '-webkit-transform', 'translate3d(0, 0, 0)');\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, 'transform', 'translate3d(0, 0, 0)');\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, 'transition', '300ms ease-in-out');\r\n    \r\n    this.onExpand.emit(null);\r\n  }\r\n  \r\n  collapse(isInit: boolean = false) {\r\n    this._footerMeta.lastPosY = this._footerMeta.height - this._footerMeta.defaultHeight;\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, '-webkit-transform', 'translate3d(0, ' + this._footerMeta.lastPosY + 'px, 0)');\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, 'transform', 'translate3d(0, ' + this._footerMeta.lastPosY + 'px, 0)');\r\n    \r\n    if (!isInit) this.onCollapse.emit(null);\r\n  }\r\n  \r\n  minimize() {\r\n    this._footerMeta.lastPosY = this._footerMeta.height;\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, '-webkit-transform', 'translate3d(0, ' + this._footerMeta.lastPosY + 'px, 0)');\r\n    this.renderer.setElementStyle(this.childFooter.nativeElement, 'transform', 'translate3d(0, ' + this._footerMeta.lastPosY + 'px, 0)');\r\n    \r\n    this.onMinimize.emit(null);\r\n  }  \r\n  \r\n  onTap(e: any) {\r\n    e.preventDefault();\r\n    \r\n    if (this.state == IonPullUpFooterState.Collapsed) {\r\n        if (this.defaultBehavior == IonPullUpFooterBehavior.Hide) \r\n            this.state = IonPullUpFooterState.Minimized;\r\n        else\r\n            this.state = IonPullUpFooterState.Expanded;\r\n    } else {\r\n        if (this.state == IonPullUpFooterState.Minimized) {\r\n            if (this.defaultBehavior == IonPullUpFooterBehavior.Hide)\r\n                this.state = IonPullUpFooterState.Collapsed;\r\n            else\r\n                this.state = IonPullUpFooterState.Expanded;\r\n        } else {\r\n            // footer is expanded\r\n            this.state = IonPullUpFooterState.Collapsed;\r\n        }\r\n    }\r\n  }\r\n  \r\n  \r\n  onDrag(e: any) {\r\n    e.preventDefault();\r\n    \r\n    switch(e.type) {\r\n      case 'panstart':\r\n        this.renderer.setElementStyle(this.childFooter.nativeElement, 'transition', 'none');\r\n        break;\r\n      case 'pan':\r\n        this._footerMeta.posY = Math.round(e.deltaY) + this._footerMeta.lastPosY;\r\n        if (this._footerMeta.posY < 0 || this._footerMeta.posY > this._footerMeta.height) return;\r\n        this.renderer.setElementStyle(this.childFooter.nativeElement, '-webkit-transform', 'translate3d(0, ' + this._footerMeta.posY + 'px, 0)');\r\n        this.renderer.setElementStyle(this.childFooter.nativeElement, 'transform', 'translate3d(0, ' + this._footerMeta.posY + 'px, 0)');\r\n        break;\r\n      case 'panend':\r\n        this.renderer.setElementStyle(this.childFooter.nativeElement, 'transition', '300ms ease-in-out');\r\n        \r\n          if (this._footerMeta.lastPosY > this._footerMeta.posY) {\r\n              this.state = IonPullUpFooterState.Expanded;\r\n          }\r\n          else if (this._footerMeta.lastPosY < this._footerMeta.posY) {\r\n              this.state = (this.initialState == IonPullUpFooterState.Minimized) ? IonPullUpFooterState.Minimized : IonPullUpFooterState.Collapsed;\r\n          }  \r\n\r\n        break;\r\n    }\r\n  }\r\n  \r\n  ngDoCheck() {\r\n    if (!Object.is(this.state, this._oldState)) {\r\n      switch (this.state) {\r\n        case IonPullUpFooterState.Collapsed:\r\n          this.collapse();\r\n          break;\r\n        case IonPullUpFooterState.Expanded:\r\n          this.expand();\r\n          break;\r\n        case IonPullUpFooterState.Minimized:\r\n          this.minimize();\r\n          break;\r\n      }\r\n      this._oldState = this.state;\r\n\r\n      // TODO: fix hack due to BUG (https://github.com/angular/angular/issues/6005)\r\n      window.setTimeout(() => {\r\n        this.stateChange.emit(this.state);\r\n      })\r\n    }  \r\n  }\r\n   \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/ion-pullup/ion-pullup.ts","export * from \"./dashboard\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/dashboard/index.ts","import { Component } from '@angular/core';\r\n\r\nimport { NavController, NavParams } from 'ionic-angular';\r\n\r\n@Component({\r\n  selector: 'dashboard',\r\n  templateUrl: 'dashboard.html'\r\n})\r\nexport class Dashboard {\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/dashboard/dashboard.ts","export * from \"./dispatches\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/dispatches/index.ts","import {\r\n\tComponent, ViewChild, NgZone\r\n} from '@angular/core';\r\n\r\nimport {\r\n\ttrigger,\r\n\tstate,\r\n\tstyle,\r\n\ttransition,\r\n\tanimate\r\n} from '@angular/animations';\r\n\r\nimport { NavController, NavParams, InfiniteScroll,ActionSheetController } from 'ionic-angular';\r\nimport { BussinessClient } from \"../../services/business-service\";\r\nimport { DispatchOrder } from \"../../model/dispatch-order\";\r\nimport { FormCapture } from \"../form-capture\";\r\nimport { FormSummary } from \"../form-summary\";\r\nimport { FormReview } from \"../form-review\";\r\nimport { FormSubmission } from \"../../model\";\r\n\r\n@Component({\r\n\tselector: 'dispatches',\r\n\ttemplateUrl: 'dispatches.html',\r\n\tanimations: [\r\n\t\t// Define an animation that adjusts the opactiy when a new item is created\r\n\t\t//  in the DOM. We use the 'visible' string as the hard-coded value in the \r\n\t\t//  trigger.\r\n\t\t//\r\n\t\t// When an item is added we wait for 300ms, and then increase the opacity to 1\r\n\t\t//  over a 200ms time interval. When the item is removed we don't delay anything\r\n\t\t//  and use a 200ms interval.\r\n\t\t//\r\n\t\ttrigger('visibleTrigger', [\r\n\t\t\tstate('visible', style({ opacity: '1', height: '5.8rem' })),\r\n\t\t\tstate('hidden', style({ opacity: '0', height: '0' })),\r\n\t\t\ttransition('visible => hidden', [animate('300ms 200ms')]),\r\n\t\t\ttransition('hidden => visible', [animate('300ms 100ms')])\r\n\t\t])\r\n\t]\r\n})\r\nexport class Dispatches {\r\n\r\n\tsearchMode = false;\r\n\r\n\tsearchTrigger = \"hidden\";\r\n\r\n\t@ViewChild(\"search\") searchbar;\r\n\r\n\tdispatches: any[] = [];\r\n\r\n\tfilteredDispatches: any[] = [];\r\n\r\n\tconstructor(private navCtrl: NavController,\r\n\t\tprivate navParams: NavParams,\r\n\t\tprivate client: BussinessClient,\r\n\t\tprivate actionCtrl: ActionSheetController,\r\n\t\tprivate zone: NgZone) {\r\n\t\tthis.doInfinite();\r\n\t}\r\n\r\n\tdoRefresh(refresher?) {\r\n\t\tthis.client.getDispatches().subscribe(forms => {\r\n\t\t\tthis.dispatches = forms;\r\n\t\t\tif (refresher) {\r\n\t\t\t\trefresher.complete();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleSearch() {\r\n\t\tthis.searchMode = !this.searchMode;\r\n\t\tthis.searchTrigger = this.searchMode ? \"visible\" : \"hidden\";\r\n\t}\r\n\r\n\tdoInfinite(infiniteScroll?: InfiniteScroll) {\r\n\t\tthis.client.getDispatches().subscribe(forms => {\r\n\t\t\tthis.dispatches = this.dispatches.concat(forms);\r\n\t\t\tif (infiniteScroll) {\r\n\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetItems(event) {\r\n\t\tlet val = event.target.value;\r\n\t\tlet regexp = new RegExp(val, \"i\");\r\n\t\tthis.filteredDispatches = this.dispatches.filter(form => {\r\n\t\t\treturn !val || regexp.test(form.name);\r\n\t\t});\r\n\t}\r\n\r\n\tsync() {\r\n\t\tthis.client.getUpdates().subscribe(()=> {});\r\n\t}\r\n\r\n\tpresentActionSheet(form: DispatchOrder) {\r\n\t\tlet actionSheet = this.actionCtrl.create({\r\n\t\t\ttitle: form.name,\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Capture',\r\n\t\t\t\t\ticon: \"magnet\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('capture clicked');\r\n\t\t\t\t\t\tlet sub : FormSubmission = new FormSubmission();\r\n\t\t\t\t\t\tsub.prospect_id = form.prospect_id;\r\n\t\t\t\t\t\tsub.form_id = form.form_id;\r\n\t\t\t\t\t\tObject.keys(form.fields_values).forEach((key)=>{\r\n\t\t\t\t\t\t\tsub.fields[key] = form.fields_values[key];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.navCtrl.push(FormCapture, { form: form.form, submission: sub, dispatch: form });\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: 'Review Submissions',\r\n\t\t\t\t\ticon: \"eye\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('review clicked');\r\n\t\t\t\t\t\tthis.navCtrl.push(FormReview, { form: form, isDispatch: true, dispatch: form  });\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: 'Share',\r\n\t\t\t\t\ticon: \"share\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('share clicked');\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: 'Summary',\r\n\t\t\t\t\ticon: \"megaphone\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('summary clicked');\r\n\t\t\t\t\t\tthis.navCtrl.push(FormSummary, { form: form });\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\trole: 'cancel',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t//console.log('Cancel clicked');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tactionSheet.present();\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tthis.doRefresh();\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/dispatches/dispatches.ts","import { Component, NgZone } from '@angular/core';\r\nimport { NavController, NavParams } from 'ionic-angular';\r\nimport { RESTClient } from \"../../services/rest-client\";\r\nimport { Form } from \"../../model\";\r\n\r\n@Component({\r\n  selector: 'form-summary',\r\n  templateUrl: 'form-summary.html'\r\n})\r\nexport class FormSummary {\r\n\r\n  form: Form = new Form();\r\n\r\n  constructor(private navCtrl: NavController, \r\n              private navParams: NavParams, \r\n              private client: RESTClient, \r\n              private zone: NgZone) {\r\n    \r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.form = this.navParams.get(\"form\");\r\n  }\r\n\r\n  doRefresh(refresher){\r\n    \r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/form-summary/form-summary.ts","export * from \"./business-card\";\r\nexport * from \"./image\";\r\nexport * from \"./simple-name\";\r\nexport * from \"./signature\";\r\nexport * from \"./gps\";\r\nexport * from \"./address\";\r\nexport * from \"./radios\";\r\nexport * from \"./dropdown\";\r\nexport * from \"./checkboxes\";\r\nexport * from \"./barcoder\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/index.ts","export * from \"./business-card\";\r\nexport * from \"./image-viewer\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/business-card/index.ts","import { Device } from '@ionic-native/device';\r\nimport { Component, Input, forwardRef, NgZone, ViewChild } from '@angular/core';\r\nimport { ActionSheetController, AlertController, ModalController, Platform } from 'ionic-angular';\r\nimport { ImageProcessor, Info } from \"../../../../services/image-processor\";\r\nimport { BaseElement } from \"../base-element\";\r\nimport { OcrSelector } from \"../../../ocr-selector\";\r\nimport { FormElement, Form, FormSubmission } from \"../../../../model\";\r\nimport { FormGroup, NG_VALUE_ACCESSOR, AbstractControl } from \"@angular/forms\";\r\nimport { Camera } from \"@ionic-native/camera\";\r\nimport { ScreenOrientation } from \"@ionic-native/screen-orientation\";\r\nimport { ImageViewerController } from 'ionic-img-viewer';\r\nimport { ImageViewer } from \"./image-viewer\";\r\ndeclare var cordova: any;\r\ndeclare var screen;\r\n\r\n@Component({\r\n\tselector: 'business-card',\r\n\ttemplateUrl: 'business-card.html',\r\n\tproviders: [\r\n\t\t{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => BusinessCard), multi: true }\r\n\t]\r\n})\r\nexport class BusinessCard extends BaseElement {\r\n\r\n\t@ViewChild(\"frontImage\") \r\n\tprivate frontImage:any;\r\n\r\n\t@ViewChild(\"backImage\") \r\n\tprivate backImage:any;\r\n\r\n\t@Input() element: FormElement;\r\n\t@Input() formGroup: FormGroup;\r\n\t@Input() readonly: boolean = false;\r\n\t\r\n\t@Input() form: Form;\t\r\n\t@Input() submission: FormSubmission;\r\n\r\n\tfront: string = \"assets/images/business-card-front.svg\";\r\n\tback: string = \"assets/images/business-card-back.svg\";\r\n\r\n\tbackLoading: boolean = false;\r\n\tfrontLoading: boolean = false;\r\n\r\n\ttheVal: any;\r\n\r\n\tFRONT: number = 0;\r\n\tBACK: number = 1;\r\n\r\n\tconstructor(private actionCtrl: ActionSheetController,\r\n\t\t\t\tprivate alertCtrl: AlertController,\r\n\t\t\t\tprivate camera: Camera,\r\n\t\t\t\tprivate device: Device,\r\n\t\t\t\tprivate zone: NgZone,\r\n\t\t\t\tprivate platform: Platform,\r\n\t\t\t\tprivate modalCtrl: ModalController,\r\n\t\t\t\tprivate imageProc: ImageProcessor,\r\n\t\t\t\tprivate imageViewerCtrl: ImageViewerController) {\r\n\t\tsuper();\r\n\t\tthis.currentVal = {\r\n\t\t\tfront: this.front,\r\n\t\t\tback: this.back\r\n\t\t};\r\n\r\n\t\tthis.theVal = {\r\n\t\t\tfront: this.front,\r\n\t\t\tback: this.back\r\n\t\t};\r\n\t}\r\n\r\n\tngAfterContentInit(){\r\n\t\tthis.theVal = {\r\n\t\t\tfront: this.currentVal.front,\r\n\t\t\tback: this.currentVal.back\r\n\t\t};\r\n\t}\r\n\r\n\tcaptureImage(type: number) {\r\n\t\tif(this.readonly){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ((type == this.FRONT && this.currentVal.front != this.front) ||\r\n\t\t\t\t(type == this.BACK && this.currentVal.back != this.back)) {\r\n\t\t\tlet sheet = this.actionCtrl.create({\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tbuttons: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'Remove',\r\n          \t\t\t\trole: 'destructive',\r\n\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t\tthis.zone.run(() =>{\r\n\t\t\t\t\t\t\t\tthis.setValue(type, type == this.FRONT ? this.front : this.back);\r\n\t\t\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'View image',\r\n\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t\tthis.viewImage(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'Flip image',\r\n\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t\tthis.flip(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'Camera',\r\n\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t\tthis.doCapture(type, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'Choose from Library',\r\n\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t\tthis.doCapture(type, 2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\t\trole: 'cancel'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\tsheet.present();\r\n\t\t}else{\r\n\t\t\tthis.doCapture(type);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate doCapture(type: number, captureType: number = 1) {\t\t\r\n\t\t//screen.orientation.lock && screen.orientation.lock(\"landscape\");\r\n\t\tthis.camera.getPicture({\r\n\t\t\tsourceType: this.device.isVirtual && this.platform.is(\"ios\") ? 2 : captureType,\r\n\t\t\tcorrectOrientation: true,\r\n\t\t\tencodingType: this.camera.EncodingType.JPEG,\r\n\t\t\ttargetWidth: 1280,\r\n\t\t\ttargetHeight:1000\r\n\t\t}).then(imageData => {\r\n\t\t\tif(type == this.FRONT){\r\n\t\t\t\tthis.frontLoading = true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.backLoading = true;\r\n\t\t\t}\r\n\t\t\tthis.imageProc.ensureLandscape(imageData, this.element.is_scan_cards_and_prefill_form == 1).subscribe((info) => {\r\n\t\t\t\tlet newFolder = cordova.file.dataDirectory + \"leadliaison/images\";\r\n\t\t\t\tlet name = imageData.substr(imageData.lastIndexOf(\"/\") + 1);\r\n\t\t\t\tlet newName = new Date().getTime() + name.substring(name.lastIndexOf(\".\"));\r\n\t\t\t\tlet folder = imageData.substr(0, imageData.lastIndexOf(\"/\"));\r\n\t\t\t\tlet promise: Promise<any>;\r\n\t\t\t\tif(info.isDataUrl){\r\n\t\t\t\t\tpromise = this.file.writeFile(newFolder, newName, this.imageProc.dataURItoBlob(info.dataUrl));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpromise = this.file.moveFile(folder, name, newFolder, newName);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tpromise.then((entry)=>{\r\n\t\t\t\t\tthis.zone.run(()=>{\r\n\t\t\t\t\t\tthis.setValue(type, newFolder + \"/\" + newName);\r\n\t\t\t\t\t\tinfo.dataUrl = newFolder + \"/\" + newName;\r\n\t\t\t\t\t\tthis.frontLoading = false;\r\n\t\t\t\t\t\tthis.backLoading = false;\r\n\t\t\t\t\t\tif(this.element.is_scan_cards_and_prefill_form == 1 && type == this.FRONT){\r\n\t\t\t\t\t\t\tthis.recognizeText(info);\r\n\t\t\t\t\t\t}/*else{\r\n\t\t\t\t\t\t\tscreen.orientation.unlock && screen.orientation.unlock();\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t});\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\t(err) => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t//screen.orientation.unlock && screen.orientation.unlock();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.error(err);\r\n\t\t\t//screen.orientation.unlock && screen.orientation.unlock();\r\n\t\t});\r\n\t}\r\n\r\n\trecognizeText(info: Info){\r\n\t\tlet modal = this.modalCtrl.create(OcrSelector, {imageInfo:info, form: this.form, submission: this.submission});\r\n\t\tmodal.onDidDismiss((changedValues) => {\r\n\t\t\t//this.currentVal.front = this.currentVal.front + \"?\" + parseInt(((1 + Math.random())*1000) + \"\");\r\n\t\t\tscreen.orientation.unlock && screen.orientation.unlock();\r\n\t\t\tif(changedValues){\r\n\t\t\t\tvar vals = {};\r\n\t\t\t\tfor(let id in this.formGroup.controls){\r\n\t\t\t\t\tif(this.formGroup.controls[id][\"controls\"]){\r\n\t\t\t\t\t\tvals[id] = {};\r\n\t\t\t\t\t\tfor(let subid in this.formGroup.controls[id][\"controls\"]){\r\n\t\t\t\t\t\t\tvals[id][subid] = this.formGroup.controls[id][\"controls\"][subid].value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvals[id] = this.formGroup.controls[id].value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet ctrl: AbstractControl = null;\r\n\t\t\t\tfor(var id in changedValues){\r\n\t\t\t\t\tlet match = /(\\w+\\_\\d+)\\_\\d+/g.exec(id);\r\n\t\t\t\t\tif(match && match.length > 0){\r\n\t\t\t\t\t\tif(!vals[match[1]]){\r\n\t\t\t\t\t\t\tvals[match[1]] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvals[match[1]][id] = changedValues[id];\r\n\t\t\t\t\t\tctrl = this.formGroup.get(match[1]).get(id);\r\n\t\t\t\t\t\tctrl.markAsTouched();\r\n\t\t\t\t\t\tctrl.markAsDirty();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvals[id] = changedValues[id];\r\n\t\t\t\t\t\tctrl = this.formGroup.get(id);\r\n\t\t\t\t\t\tctrl.markAsTouched();\r\n\t\t\t\t\t\tctrl.markAsDirty();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.formGroup.setValue(vals);\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodal.present();\t\t\r\n\t\t//screen.orientation.lock && screen.orientation.lock(\"landscape\");\r\n\t}\r\n\r\n\tsetValue(type, newPath){\r\n\t\tif (type == this.FRONT) {\r\n\t\t\tthis.currentVal.front = newPath;\r\n\t\t\tthis.theVal.front = this.currentVal.front.replace(/\\?.*/, \"\") + \"?\" + parseInt(((1 + Math.random())*1000) + \"\");\r\n\t\t} else {\r\n\t\t\tthis.currentVal.back = newPath;\r\n\t\t\tthis.theVal.back = this.currentVal.back.replace(/\\?.*/, \"\") + \"?\" + parseInt(((1 + Math.random())*1000) + \"\");\r\n\t\t}\r\n\t\tvar v = {\r\n\t\t\tfront: null,\r\n\t\t\tback: null\r\n\t\t};\r\n\t\tif (this.currentVal.front && this.currentVal.front != this.front) {\r\n\t\t\tv.front = this.currentVal.front;\r\n\t\t}\r\n\t\tif (this.currentVal.back && this.currentVal.back != this.back) {\r\n\t\t\tv.back = this.currentVal.back;\r\n\t\t}\r\n\t\tthis.propagateChange(v);\r\n\t}\r\n\r\n\tonImageLoaded(event, front) {\r\n\t\tif(front){\r\n\t\t\tthis.frontLoading = false;\r\n\t\t}else{\r\n\t\t\tthis.backLoading = false;\r\n\t\t}\r\n\t}\r\n\r\n\tflip(type){\r\n\t\tlet image = \"\";\r\n\t\tif(type == this.FRONT){\r\n\t\t\timage = this.currentVal.front;\r\n\t\t}else{\r\n\t\t\timage = this.currentVal.back;\r\n\t\t}\r\n\t\tlet z = this.zone;\r\n\t\tlet t = this;\r\n\t\tthis.imageProc.flip(image).subscribe( info => {\r\n\t\t\tlet name = image.substr(image.lastIndexOf(\"/\") + 1).replace(/\\?.*/, \"\");\r\n\t\t\tlet folder = image.substr(0, image.lastIndexOf(\"/\"));\r\n\t\t\tthis.file.writeFile(folder, name, this.imageProc.dataURItoBlob(info.dataUrl), {replace: true}).then((entry)=>{\r\n\t\t\t\tz.run(() => {\r\n\t\t\t\t\tt.setValue(type, folder + \"/\" + name);\r\n\t\t\t\t\tif (type == this.FRONT) {\r\n\t\t\t\t\t\tthis.theVal.front = this.currentVal.front.replace(/\\?.*/, \"\") + \"?\" + parseInt(((1 + Math.random())*1000) + \"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.theVal.back = this.currentVal.back.replace(/\\?.*/, \"\") + \"?\" + parseInt(((1 + Math.random())*1000) + \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\t\t\t\r\n\t\t});\r\n\t}\r\n\r\n\twriteValue(obj: any): void {\r\n\t\tif (!obj) {\r\n\t\t\tthis.currentVal = {\r\n\t\t\t\tfront: this.front,\r\n\t\t\t\tback: this.back\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tthis.currentVal = JSON.parse(JSON.stringify(obj));\r\n\t\t\tif (!this.currentVal.front) {\r\n\t\t\t\tthis.currentVal.front = this.front;\r\n\t\t\t}\r\n\t\t\tif (!this.currentVal.back) {\r\n\t\t\t\tthis.currentVal.back = this.back;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate viewImage(type){\r\n\t\t//const imageViewer = this.imageViewerCtrl.create((type == this.FRONT ? this.frontImage : this.backImage).nativeElement);\r\n    \t//imageViewer.present();\r\n\t\tthis.modalCtrl.create(ImageViewer, {image: type == this.FRONT ? this.currentVal.front : this.currentVal.back}).present();\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/business-card/business-card.ts","export * from \"./image\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/image/index.ts","import { Component, Input, forwardRef, NgZone } from '@angular/core';\r\nimport { FormElement } from \"../../../../model\";\r\nimport { FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { BaseElement } from \"../base-element\";\r\nimport { ActionSheetController } from \"ionic-angular\";\r\nimport { Camera } from '@ionic-native/camera';\r\ndeclare var cordova: any;\r\n\r\n@Component({\r\n\tselector: 'image',\r\n\ttemplateUrl: 'image.html',\r\n\tproviders: [\r\n\t\t{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => Image), multi: true }\r\n\t]\r\n})\r\nexport class Image extends BaseElement {\r\n\t@Input() element: FormElement;\r\n\t@Input() formGroup: FormGroup;\r\n\t@Input() readonly: boolean = false;\r\n\r\n\timages = {\r\n\t\ttrue: \"trash\",\r\n\t\tfalse: \"images\"\r\n\t};\r\n\r\n\tcolors = {\r\n\t\ttrue: \"danger\",\r\n\t\tfalse: \"dark\"\r\n\t};\r\n\r\n\tselectionEnabled: any = false;\r\n\tselection: any[] = [];\r\n\r\n\tmax = 5;\r\n\r\n\tconstructor(private fb: FormBuilder,\r\n\t\t\t\tprivate actionCtrl: ActionSheetController,\r\n\t\t\t\tprivate camera: Camera, \r\n\t\t\t\tprivate zone: NgZone) {\r\n\t\tsuper();\r\n\t\tthis.currentVal = [];\r\n\t}\r\n\r\n\tchooseType() {\r\n\t\tif(this.readonly){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.selectionEnabled){\r\n\t\t\tfor(let i = this.selection.length - 1; i > -1; i--){\r\n\t\t\t\tif(this.selection[i]){\r\n\t\t\t\t\t(<any[]>this.currentVal).splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.propagateChange(this.currentVal);\r\n\t\t\tthis.selection = [];\r\n\t\t\tthis.selectionEnabled = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.currentVal.length >= this.max) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet onImageReceived = (imageData) => {\r\n\t\t\tif (!this.currentVal) {\r\n\t\t\t\tthis.currentVal = [];\r\n\t\t\t}\r\n\t\t\tlet t = this;\r\n\t\t\t//TODO find a more generic way of handling file move/copy\r\n\t\t\tif(imageData.indexOf(\"content://\") == 0 && window[\"FilePath\"]){\r\n\t\t\t\twindow[\"FilePath\"].resolveNativePath(imageData, (path) => {\r\n\t\t\t\t\tt.moveFile(path, cordova.file.dataDirectory + \"leadliaison/images\").subscribe((newPath) => {\r\n\t\t\t\t\t\tt.currentVal.unshift(newPath);\r\n\t\t\t\t\t\tt.propagateChange(t.currentVal);\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t})\r\n\t\t\t\t}, (err)=> {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t});\r\n\t\t\t}else if(imageData.indexOf(\"assets-library://\") == 0){\r\n\t\t\t\tlet t = this;\r\n\t\t\t\twindow[\"resolveLocalFileSystemURL\"](imageData, (fileEntry) => {\r\n\t\t\t\t\tfileEntry.file((file) => {\r\n\t\t\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\t\t\treader.onloadend = (event) => {\r\n\t\t\t\t\t\t\tconsole.log((<any>event.target).result);\r\n\t\t\t\t\t\t\tlet blob = new Blob([(<any>event.target).result], {type: file.type});\r\n\t\t\t\t\t\t\tt.writeFile(cordova.file.dataDirectory + \"leadliaison/images\", file.name, blob).subscribe((newPath) => {\r\n\t\t\t\t\t\t\t\tt.zone.run(()=>{\r\n\t\t\t\t\t\t\t\t\tt.currentVal.unshift(newPath);\r\n\t\t\t\t\t\t\t\t\tt.propagateChange(t.currentVal);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tconsole.log('Reading file: ' + file.name);\r\n\t\t\t\t\t\treader.readAsArrayBuffer(file);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.moveFile(imageData, cordova.file.dataDirectory + \"leadliaison/images\").subscribe((newPath) => {\r\n\t\t\t\t\tthis.currentVal.unshift(newPath);\r\n\t\t\t\t\tthis.propagateChange(this.currentVal);\r\n\t\t\t\t}, (err) => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet camera = this.camera;\r\n\t\tlet sheet = this.actionCtrl.create({\r\n\t\t\ttitle: \"\",\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Use Camera',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tcamera.getPicture({\r\n\t\t\t\t\t\t\tsourceType: 1,\r\n\t\t\t\t\t\t\tencodingType: this.camera.EncodingType.JPEG,\r\n\t\t\t\t\t\t\ttargetWidth: 1280,\r\n\t\t\t\t\t\t\ttargetHeight:1000\r\n\t\t\t\t\t\t}).then(onImageReceived)\r\n\t\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Choose from Album',\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tcamera.getPicture({\r\n\t\t\t\t\t\t\tsourceType: 0,\r\n\t\t\t\t\t\t\tencodingType: this.camera.EncodingType.JPEG,\r\n\t\t\t\t\t\t\ttargetWidth: 1280,\r\n\t\t\t\t\t\t\ttargetHeight:1000,\r\n\t\t\t\t\t\t\tdestinationType: 2\r\n\t\t\t\t\t\t}).then(onImageReceived)\r\n\t\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\trole: 'cancel'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tsheet.present();\r\n\t}\r\n\r\n\ttoggleSelection(index : number){\r\n\t\tif(this.readonly){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selection[index] = !this.selection[index];\r\n\t\tthis.selectionEnabled = false;\r\n\t\tfor(let i = 0; i < this.selection.length; i++){\r\n\t\t\tif(!!this.selection[i]){\r\n\t\t\t\tthis.selectionEnabled = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\twriteValue(obj: any):void{\r\n\t\tif(!obj){\r\n\t\t\tthis.currentVal = [];\r\n\t\t}else{\r\n\t\t\tthis.currentVal = obj;\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/image/image.ts","export * from \"./simple-name\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/simple-name/index.ts","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { FormElement } from \"../../../../model\";\r\nimport { FormGroup } from \"@angular/forms\";\r\nimport { BaseGroupElement} from \"../base-group-element\";\r\n\r\n@Component({\r\n\tselector: 'simple-name',\r\n\ttemplateUrl: 'simple-name.html'\r\n})\r\nexport class SimpleName extends BaseGroupElement {\r\n\r\n\t@Input() element: FormElement;\r\n\t\r\n\t@Input() rootGroup: FormGroup;\r\n\r\n\t@Input() readonly: boolean = false;\r\n\r\n\t@Input() selection: boolean = false;\r\n\r\n\t@Output() idSelected: EventEmitter<string>;\r\n\r\n\tnameMap = {\r\n\t\t\"FirstName\": \"First Name\",\r\n\t\t\"LastName\": \"Last Name\"\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.idSelected = new EventEmitter<string>();\r\n\t}\r\n\r\n\tngOnChanges(changes: any) {\r\n\t\tsuper.ngOnChanges(changes);\r\n\t}\r\n\r\n\tselectEntry(identifier){\r\n\t\tthis.idSelected.emit(identifier);\r\n\t}\r\n\r\n\tprotected config(){\r\n\t\tsuper.config();\r\n\t\tif(this.mapping && this.mapping[0].label == \"LastName\"){\r\n\t\t\tthis.mapping.reverse();\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/simple-name/simple-name.ts","export * from \"./signature\";\r\nexport * from \"./signature-pad\";\r\nexport * from \"./signature.modal\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/signature/index.ts","import { Component, Input, forwardRef } from '@angular/core';\r\nimport { FormElement } from \"../../../../model\";\r\nimport { SignatureModal} from \"./signature.modal\";\r\nimport { ModalController} from \"ionic-angular\"\r\nimport { BaseElement } from \"../base-element\";\r\nimport { FormGroup, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { ScreenOrientation } from '@ionic-native/screen-orientation';\r\ndeclare var screen;\r\n\r\n@Component({\r\n\tselector: 'signature',\r\n\ttemplateUrl: 'signature.html',\r\n\tproviders: [\r\n\t\t{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => Signature), multi: true }\r\n\t]\r\n})\r\nexport class Signature extends BaseElement{\r\n\r\n\t@Input() element: FormElement;\r\n\t@Input() formGroup: FormGroup;\r\n\t@Input() readonly: boolean = false;\r\n\r\n\tconstructor(private modalCtrl: ModalController, private screen: ScreenOrientation) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tshow(){\r\n\t\tif(this.readonly){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet modal = this.modalCtrl.create(SignatureModal);\r\n\t\tmodal.onDidDismiss((sigStr) => {\r\n\t\t\tthis.screen.unlock();\r\n\t\t\tif(sigStr){\r\n\t\t\t\tthis.onChange(sigStr);\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodal.present();\r\n\t\tthis.screen.lock(this.screen.ORIENTATIONS.LANDSCAPE);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/signature/signature.ts","export class BaseResponse{\r\n\tstatus: '200' | \"400\" | \"500\";\r\n\tmessage: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/protocol/response.ts","export * from \"./gps\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/gps/index.ts","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Form, DeviceFormMembership, FormSubmission } from \"../../../../model\";\r\nimport { FormBuilder, FormGroup } from \"@angular/forms\";\r\nimport { Geolocation } from \"@ionic-native/geolocation\";\r\n\r\n@Component({\r\n\tselector: 'gps',\r\n\ttemplateUrl: 'gps.html'\r\n})\r\nexport class Gps {\r\n\r\n\t@Input() form: Form;\r\n\t@Input() submission: FormSubmission;\r\n\t@Input() prospect: DeviceFormMembership;\r\n\t@Output() onChange = new EventEmitter();\r\n\t@Output() onValidationChange = new EventEmitter();\r\n\t@Input() readonly: boolean = false;\r\n\r\n\ttheForm : FormGroup = new FormGroup({});\r\n\r\n\tdisplayForm: Form = <any>{};\r\n\tloading: boolean = true;\r\n\tlatitude: string;\r\n\tlongitude: string;\r\n\r\n\tconstructor(private fb: FormBuilder, private geolocation: Geolocation) {\r\n\r\n\t}\r\n\r\n\tngOnInit(){\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\trefresh(){\r\n\t\tthis.loading = true;\r\n\t\tthis.geolocation.getCurrentPosition()\r\n\t\t.then(pos => {\r\n\t\t\tthis.latitude = pos.coords.latitude + \"\";\r\n\t\t\tthis.longitude = pos.coords.longitude + \"\";\r\n\t\t\tthis.loading = false;\r\n\t\t}).catch( err => {\r\n\t\t\tthis.loading = false;\r\n\t\t})\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/gps/gps.ts","export * from \"./address\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/address/index.ts","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { FormElement } from \"../../../../model\";\r\nimport { FormGroup, FormControl } from \"@angular/forms\";\r\nimport { BaseGroupElement} from \"../base-group-element\";\r\n\r\n@Component({\r\n\tselector: 'address',\r\n\ttemplateUrl: 'address.html'\r\n})\r\nexport class Address extends BaseGroupElement {\r\n\t@Input() element: any;\r\n\t@Input() rootGroup: FormGroup;\r\n\t@Input() readonly: boolean = false;\r\n\t@Input() selection: boolean = false;\r\n\t@Output() idSelected: EventEmitter<string>;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.idSelected = new EventEmitter<string>();\r\n\t}\r\n\r\n\tngOnChanges(changes: any) {\r\n\t\tif(this.element){\r\n\t\t\tfor(var i = 1; i< 7; i++){\r\n\t\t\t\tif(!this.group.get(this.element.identifier + \"_\" + i)){\r\n\t\t\t\t\tthis.group.addControl(this.element.identifier + \"_\" + i, new FormControl());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsuper.ngOnChanges(changes);\r\n\t}\t\r\n\t\r\n\tselectEntry(identifier){\r\n\t\tthis.idSelected.emit(identifier);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/address/address.ts","export * from \"./radios\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/radios/index.ts","import { Component, Input, forwardRef } from '@angular/core';\r\nimport { BaseElement } from \"../base-element\";\r\nimport { FormElement } from \"../../../../model\";\r\nimport { FormGroup, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\n\r\n@Component({\r\n\tselector: 'radios',\r\n\ttemplateUrl: 'radios.html',\r\n\tproviders: [\r\n\t\t{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => Radios), multi: true }\r\n\t]\r\n})\r\nexport class Radios extends BaseElement {\r\n\t@Input() element: FormElement;\r\n\t@Input() formGroup: FormGroup;\r\n\t@Input() readonly: boolean = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\twriteValue(obj: any): void{\r\n\t\tif(!obj){\r\n\t\t\tfor(let i = 0; i < this.element.options.length; i++){\r\n\t\t\t\tif(this.element.options[i].is_default == 1){\r\n\t\t\t\t\tobj = this.element.options[i].option;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if( this.element.options.filter((entry)=>{\r\n\t\t\treturn entry.option == obj;\r\n\t\t}).length == 0){\r\n\t\t\tobj = this.element.options[parseInt(obj)-1].option;\r\n\t\t}\r\n\t\tsuper.writeValue(obj);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/radios/radios.ts","export * from \"./dropdown\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/dropdown/index.ts","import { Component, Input, forwardRef } from '@angular/core';\r\nimport { BaseElement } from \"../base-element\";\r\nimport { FormElement } from \"../../../../model\";\r\nimport { FormGroup, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\n\r\n@Component({\r\n\tselector: 'dropdown',\r\n\ttemplateUrl: 'dropdown.html',\r\n\tproviders: [\r\n\t\t{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => Dropdown), multi: true }\r\n\t]\r\n})\r\nexport class Dropdown extends BaseElement {\r\n\t@Input() element: FormElement = <any>{};\r\n\t@Input() formGroup: FormGroup;\r\n\t@Input() readonly: boolean = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\twriteValue(obj: any): void{\r\n\t\tif(!obj){\r\n\t\t\tfor(let i = 0; i < this.element.options.length; i++){\r\n\t\t\t\tif(this.element.options[i].is_default == 1){\r\n\t\t\t\t\tobj = this.element.options[i].option;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(this.element && this.element.options.filter((entry)=>{\r\n\t\t\treturn entry.option == obj;\r\n\t\t}).length == 0){\r\n\t\t\tobj = this.element.options[parseInt(obj)-1].option;\r\n\t\t}\r\n\t\tsuper.writeValue(obj);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/dropdown/dropdown.ts","export * from \"./checkboxes\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/checkboxes/index.ts","import { Component, Input, forwardRef } from '@angular/core';\r\nimport { BaseElement } from \"../base-element\";\r\nimport { FormElement } from \"../../../../model\";\r\nimport { FormGroup, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\n\r\n@Component({\r\n\tselector: 'checkboxes',\r\n\ttemplateUrl: 'checkboxes.html',\r\n\tproviders: [\r\n\t\t{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => Checkboxes), multi: true }\r\n\t]\r\n})\r\nexport class Checkboxes extends BaseElement {\r\n\t@Input() element: FormElement;\r\n\t@Input() formGroup: FormGroup;\r\n\t@Input() readonly: boolean = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\twriteValue(obj: any): void{\r\n\t\tif(!obj){\r\n\t\t\tobj = [];\r\n\t\t\tfor(let i = 0; i < this.element.options.length; i++){\r\n\t\t\t\tif(this.element.options[i].is_default == 1){\r\n\t\t\t\t\tobj.push(this.element.options[i].option);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentVal = obj;\r\n\t}\r\n\r\n\tonCheckChange(event, option){\r\n\t\t//console.log(event);\r\n\t\tif(event.checked){\r\n\t\t\tthis.currentVal.push(option.option);\r\n\t\t}else{\r\n\t\t\tlet idx = this.currentVal.indexOf(option.option);\r\n\t\t\tif(idx > -1){\r\n\t\t\t\tthis.currentVal.splice(idx, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.propagateChange(this.currentVal);\r\n\t}\r\n\r\n\thas(values: any[], option){\r\n\t\treturn values && values.filter((val)=>{\r\n\t\t\treturn val == option.option;\r\n\t\t}).length > 0;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/checkboxes/checkboxes.ts","import { Injectable } from \"@angular/core\";\r\nimport { Platform } from 'ionic-angular';\r\nimport { Observable, Observer } from \"rxjs/Rx\";\r\nimport { User, Form, DispatchOrder, FormElement, FormSubmission, DeviceFormMembership, SubmissionStatus } from \"../model\";\r\nimport { Migrator, Manager, Table } from \"./db\";\r\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite';\r\n\r\nlet MASTER = \"master\";\r\nlet WORK = \"work\";\r\n\r\n@Injectable()\r\nexport class DBClient {\r\n\r\n\tprivate migrator: Migrator;\r\n\tprivate manager: Manager;\r\n\r\n\tprivate registration: User;\r\n\r\n\tprivate saveAllEnabled = false;\r\n\tprivate saveAllPageSize = 50;\r\n\tprivate saveAllData: { query: string, type: string, parameters: any[] }[] = [];\r\n\r\n\tprivate tables: Table[] = [\r\n\t\t{\r\n\t\t\tname: 'forms',\r\n\t\t\tmaster: false,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'id', type: 'integer not null' },\r\n\t\t\t\t{ name: 'formId', type: 'integer' },\r\n\t\t\t\t{ name: 'name', type: 'text' },\r\n\t\t\t\t{ name: 'title', type: 'text' },\r\n\t\t\t\t{ name: 'listId', type: 'text' },\r\n\t\t\t\t{ name: 'description', type: 'text' },\r\n\t\t\t\t{ name: 'success_message', type: 'text' },\r\n\t\t\t\t{ name: 'submit_error_message', type: 'text' },\r\n\t\t\t\t{ name: 'submit_button_text', type: 'text' },\r\n\t\t\t\t{ name: 'created_at', type: 'text' },\r\n\t\t\t\t{ name: 'updated_at', type: 'text' },\r\n\t\t\t\t{ name: 'elements', type: 'text' },\r\n\t\t\t\t{ name: 'isDispatch', type: 'integer not null' },\r\n\t\t\t\t{ name: 'dispatchData', type: 'text' },\r\n\t\t\t\t{ name: 'prospectData', type: 'text' },\r\n\t\t\t\t{ name: 'summary', type: 'text' },\r\n\t\t\t\t{ name: \"primary key\", type: \"(id, isDispatch)\" }\r\n\t\t\t],\r\n\t\t\tqueries: {\r\n\t\t\t\t\"select\": \"SELECT * FROM forms where isDispatch=?\",\r\n\t\t\t\t\"selectByIds\": \"SELECT * FROM forms where id in (?)\",\r\n\t\t\t\t\"selectAll\": \"SELECT id, formId, listId, name, title, description, success_message, submit_error_message, submit_button_text, created_at, updated_at, elements, isDispatch, dispatchData, prospectData, summary, is_mobile_kiosk_mode, (SELECT count(*) FROM submissions WHERE status >= 1 and submissions.formId=Forms.id and  submissions.isDispatch = (?)) AS totalSub, (SELECT count(*) FROM submissions WHERE status in (2, 3) and submissions.formId=Forms.id and submissions.isDispatch = (?)) AS totalHold, (SELECT count(*) FROM submissions WHERE status = 1 and submissions.formId=Forms.id and submissions.isDispatch = (?)) AS totalSent, archive_date FROM forms where isDispatch = (?)\",\r\n\t\t\t\t\"update\": \"INSERT OR REPLACE INTO forms ( id, formId, name, listId, title, description, success_message, submit_error_message, submit_button_text, created_at, updated_at, elements, isDispatch, dispatchData, prospectData, summary, archive_date, is_mobile_kiosk_mode) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)\",\r\n\t\t\t\t\"delete\": \"DELETE from forms where id=?\",\r\n\t\t\t\t\"deleteIn\": \"delete FROM forms where formId in (?)\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'submissions',\r\n\t\t\tmaster: false,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'id', type: 'integer primary key' },\r\n\t\t\t\t{ name: 'title', type: 'text' },\r\n\t\t\t\t{ name: 'sub_date', type: 'text' },\r\n\t\t\t\t{ name: 'formId', type: 'integer' },\r\n\t\t\t\t{ name: 'data', type: 'text' },\r\n\t\t\t\t{ name: 'status', type: 'integer' },\r\n\t\t\t\t{ name: 'firstName', type: 'text' },\r\n\t\t\t\t{ name: 'lastName', type: 'text' },\r\n\t\t\t\t{ name: 'email', type: 'text' },\r\n\t\t\t\t{ name: 'dispatchId', type: 'integer' },\r\n\t\t\t\t{ name: 'isDispatch', type: 'integer' },\r\n\t\t\t\t{ name: 'barcode_processed', type: 'integer'}\r\n\t\t\t],\r\n\t\t\tqueries: {\r\n\t\t\t\t\"select\": \"SELECT * FROM submissions where formId=? and isDispatch=?\",\r\n\t\t\t\t\"selectAll\": \"SELECT * FROM submissions where formId=? and isDispatch=?\",\r\n\t\t\t\t\"selectByHoldId\": \"SELECT * FROM submissions where hold_request_id=? limit 1\",\r\n\t\t\t\t\"toSend\": \"SELECT * FROM submissions where status=4\",\r\n\t\t\t\t\"update\": \"INSERT OR REPLACE INTO submissions (id, formId, data, sub_date, status, firstName, lastName, email, isDispatch, dispatchId, activityId, hold_request_id, barcode_processed) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)\",\r\n\t\t\t\t\"delete\": \"DELETE from submissions where id=?\",\r\n\t\t\t\t\"deleteIn\": \"DELETE from submissions where formId in (?)\",\r\n\t\t\t\t\"deleteByHoldId\": \"DELETE from submissions where id in (select id from submissions where hold_request_id = ? limit 1)\",\r\n\t\t\t\t\"updateById\": \"UPDATE submissions set id=?, status=?, activityId=?, hold_request_id=?, invalid_fields=? where id=?\",\r\n\t\t\t\t\"updateByHoldId\": \"UPDATE submissions set id=?, status=?, activityId=?, data=?, firstName=?, lastName=?, email=?, isDispatch=?, dispatchId=? where hold_request_id=?\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'notifications',\r\n\t\t\tmaster: false,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'id', type: 'integer primary key' },\r\n\t\t\t\t{ name: 'data', type: 'text' },\r\n\t\t\t\t{ name: 'processed', type: 'text' }\r\n\t\t\t],\r\n\t\t\tqueries: {\r\n\t\t\t\t\"create\": \"\",\r\n\t\t\t\t\"update\": \"\",\r\n\t\t\t\t\"delete\": \"\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'contacts',\r\n\t\t\tmaster: false,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'id', type: 'integer primary key' },\r\n\t\t\t\t{ name: 'data', type: 'text' },\r\n\t\t\t\t{ name: 'formId', type: 'integer' },\r\n\t\t\t\t{ name: 'membershipId', type: 'integer' },\r\n\t\t\t\t{ name: 'prospectId', type: 'integer' },\r\n\t\t\t\t{ name: 'added', type: 'string' },\r\n\t\t\t\t{ name: 'searchTerm', type: 'text' },\r\n\t\t\t],\r\n\t\t\tqueries: {\r\n\t\t\t\t\"selectAll\": \"select * from contacts inner join contact_forms on contacts.id = contact_forms.contactId where contact_forms.formId=?\",\r\n\t\t\t\t\"select\": \"select * from contacts where formId=? and prospectId=?\",\r\n\t\t\t\t\"update\": \"INSERT OR REPLACE INTO contacts (id, data, formId, membershipId, prospectId, added, searchTerm) VALUES (?, ?, ?, ?, ?, ?, ?)\",\r\n\t\t\t\t\"delete\": \"delete from contacts where id=?\",\r\n\t\t\t\t\"deleteIn\": \"delete from contacts where formId in (?)\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'contact_forms',\r\n\t\t\tmaster: false,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'formId', type: 'integer' },\r\n\t\t\t\t{ name: 'contactId', type: 'integer' },\r\n\t\t\t\t{ name: \"primary key\", type: \"(formId, contactId)\" }\r\n\t\t\t],\r\n\t\t\tqueries: {\r\n\t\t\t\t\"selectAll\": \"select * from contact_forms where formId=?\",\r\n\t\t\t\t\"update\": \"INSERT OR REPLACE INTO contact_forms (formId, contactId) VALUES (?, ?)\",\r\n\t\t\t\t\"delete\": \"delete from contact_forms where formId=?\",\r\n\t\t\t\t\"deleteIn\": \"delete from contact_forms where formId in (?)\",\r\n\t\t\t\t\"getAll\": \"select id, formId from contacts where formId is not NULL\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'configuration',\r\n\t\t\tmaster: false,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'key', type: 'text primary key' },\r\n\t\t\t\t{ name: 'value', type: 'text' }\r\n\t\t\t],\r\n\t\t\tqueries: {\r\n\t\t\t\t\"select\": \"SELECT * FROM configuration where key =?\",\r\n\t\t\t\t\"selectAll\": \"SELECT * from configuration\",\r\n\t\t\t\t\"update\": \"INSERT OR REPLACE INTO configuration (key, value) VALUES (?,?)\",\r\n\t\t\t\t\"delete\": \"DELETE FROM configuration WHERE key = (?)\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"org_master\",\r\n\t\t\tmaster: true,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'id', type: 'integer primary key' },\r\n\t\t\t\t{ name: 'name', type: 'text' },\r\n\t\t\t\t{ name: 'upload', type: 'integer' },\r\n\t\t\t\t{ name: 'operator', type: 'text' },\r\n\t\t\t\t{ name: 'db', type: 'text' },\r\n\t\t\t\t{ name: 'active', type: 'integer' },\r\n\t\t\t\t{ name: 'token', type: 'text' },\r\n\t\t\t\t{ name: 'avatar', type: 'text' },\r\n\t\t\t\t{ name: 'logo', type: 'text' },\r\n\t\t\t\t{ name: 'custAccName', type: 'text' },\r\n\t\t\t\t{ name: 'username', type: 'text' },\r\n\t\t\t\t{ name: 'email', type: 'text' },\r\n\t\t\t\t{ name: 'title', type: 'text' },\r\n\t\t\t\t{ name: 'operatorFirstName', type: 'text' },\r\n\t\t\t\t{ name: 'operatorLastName', type: 'text' }\r\n\t\t\t],\r\n\t\t\tqueries: {\r\n\t\t\t\t\"select\": \"SELECT * from org_master WHERE active = 1\",\r\n\t\t\t\t\"makeAllInactive\": \"UPDATE org_master set active = 0\",\r\n\t\t\t\t\"makeInactiveByIds\": \"UPDATE org_master set active = 0 where id in (?)\",\r\n\t\t\t\t\"update\": \"INSERT or REPLACE into org_master (id, name, operator, upload, db, active, token, avatar, logo, custAccName, username, email, title, operatorFirstName, operatorLastName, pushRegistered, isProduction) VALUES  (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)\",\r\n\t\t\t\t\"delete\": \"DELETE from org_master where id = ?\",\r\n\t\t\t\t'updateRegistration': 'UPDATE org_master set registrationId = ?'\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\r\n\tprivate versions = {\r\n\t\tqueries: {\r\n\t\t\tgetVersion: \"select max(version) as version from versions;\"\r\n\t\t},\r\n\t\tmaster: {\r\n\t\t\t2: {\r\n\t\t\t\ttables: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'versions',\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{ name: 'version', type: 'integer not null' },\r\n\t\t\t\t\t\t\t{ name: 'updated_at', type: 'text' }\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tqueries: []\r\n\t\t\t},\r\n\t\t\t3: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"ALTER TABLE org_master add column pushRegistered integer default 0\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t4: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"ALTER TABLE org_master add column registrationId text\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t5: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"ALTER TABLE org_master add column isProduction integer default 1\"\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\twork: {\r\n\t\t\t1: {\r\n\t\t\t\ttables: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'versions',\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{ name: 'version', type: 'integer not null' },\r\n\t\t\t\t\t\t\t{ name: 'updated_at', type: 'text' }\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"ALTER TABLE submissions add column activityId VARCHAR(50)\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t2: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"ALTER table forms add column archive_date VARCHAR(50)\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t3: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"alter table submissions add column hold_request_id integer\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t4: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"alter table forms add column is_mobile_kiosk_mode integer default 0\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t5: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"INSERT OR REPLACE INTO configuration (key, value) VALUES ('autoUpload','true')\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t6: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"alter table submissions add column invalid_fields integer default 0\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t7: {\r\n\t\t\t\tcustom: (db: SQLiteObject, callback) => {\r\n\t\t\t\t\tlet t = this;\r\n\t\t\t\t\tdb.executeSql(\"select id, formId from contacts where formId is not NULL\", []).then(data => {\r\n\t\t\t\t\t\tconsole.log(data.rows.length);\r\n\t\t\t\t\t\tlet list = [];\r\n\t\t\t\t\t\tlet index = 0;\r\n\t\t\t\t\t\twhile(index < data.rows.length){\r\n\t\t\t\t\t\t\tlist.push(data.rows.item(index++));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt.internalSaveAll<any>(db, list, \"FormContact\", 50).subscribe(()=>{\r\n\t\t\t\t\t\t\tdb.executeSql(\"update contacts set formId=NULL\", []).then(()=>{\r\n\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tqueries: []\r\n\t\t\t},\r\n\t\t\t8: {\r\n\t\t\t\tqueries: [\r\n\t\t\t\t\t\"alter table submissions add column barcode_processed integer default 0\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * \r\n\t */\r\n\tconstructor(private platform: Platform) {\r\n\t\tthis.migrator = new Migrator();\r\n\t\tthis.migrator.setMigrations(this.versions);\r\n\t\tthis.manager = new Manager(platform, this.migrator, this.tables);\r\n\t\tthis.manager.registerDb(\"tradeshow.db\", MASTER, true);\r\n\t}\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic setupWorkDb(dbName) {\r\n\t\tthis.manager.registerDb(dbName + \".db\", WORK, false);\r\n\t}\r\n\r\n\tpublic isWorkDbInited(): boolean {\r\n\t\treturn this.manager.isDbInited(WORK);\r\n\t}\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic getConfig(key: string): Observable<string> {\r\n\t\treturn this.getSingle<any>(WORK, \"configuration\", [key])\r\n\t\t\t.map((entry) => {\r\n\t\t\t\treturn entry ? entry.value : \"\";\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic getAllConfig(): Observable<Object> {\r\n\t\treturn this.getAll<any[]>(WORK, \"configuration\", [])\r\n\t\t\t.map((data) => {\r\n\t\t\t\tlet resp = {};\r\n\t\t\t\tdata.forEach((entry: any) => {\r\n\t\t\t\t\tresp[entry.key] = entry ? entry.value : \"\";\r\n\t\t\t\t});\r\n\t\t\t\treturn resp;\r\n\t\t\t});\r\n\t}\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic saveConfig(key: string, value: string): Observable<boolean> {\r\n\t\treturn this.save(WORK, \"configuration\", [key, value]);\r\n\t}\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic deleteConfig(key: string): Observable<boolean> {\r\n\t\treturn this.remove(WORK, \"configuration\", [key]);\r\n\t}\r\n\r\n\tpublic updateRegistration(registrationid: string): Observable<boolean> {\r\n\t\treturn this.doUpdate(MASTER, \"updateRegistration\", 'org_master', [registrationid]);\r\n\t}\r\n\r\n\tprivate parseForm(dbForm): Form {\r\n\t\tlet form = new Form();\r\n\t\tform.id = dbForm.id;\r\n\t\tform.form_id = dbForm.formId;\r\n\t\tform.description = dbForm.description;\r\n\t\tform.title = dbForm.title;\r\n\t\tform.list_id = parseInt(dbForm.listId + \"\");\r\n\t\tform.name = dbForm.name;\r\n\t\tform.archive_date = dbForm.archive_date;\r\n\t\tform.created_at = dbForm.created_at;\r\n\t\tform.updated_at = dbForm.updated_at;\r\n\t\tform.success_message = dbForm.success_message;\r\n\t\tform.is_mobile_kiosk_mode = dbForm.is_mobile_kiosk_mode == 1;\r\n\t\tform.submit_error_message = dbForm.submit_error_message;\r\n\t\tform.submit_button_text = dbForm.submit_button_text;\r\n\t\tform.elements = typeof dbForm.elements == \"string\" ? JSON.parse(dbForm.elements) : dbForm.elements;\r\n\t\tif (form.elements && form.elements.length > 0) {\r\n\t\t\tform.elements.sort((e1: FormElement, e2: FormElement): number => {\r\n\t\t\t\tif (e1.position < e2.position) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (e1.position > e2.position) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t})\r\n\t\t\tform.elements.forEach((e) => {\r\n\t\t\t\tif (e.options && e.options.length > 0) {\r\n\t\t\t\t\te.options.sort((o1, o2): number => {\r\n\t\t\t\t\t\tif (o1.position < o2.position) {\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (o1.position > o2.position) {\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tform.total_submissions = dbForm.totalSub;\r\n\t\tform.total_hold = dbForm.totalHold;\r\n\t\tform.total_sent = dbForm.totalSent;\r\n\t\tform.computeIdentifiers();\r\n\t\treturn form;\r\n\t}\r\n\r\n\tpublic getForms(): Observable<Form[]> {\r\n\t\treturn this.getAll<any[]>(WORK, \"forms\", [false, false, false, false])\r\n\t\t\t.map((data) => {\r\n\t\t\t\tlet forms = [];\r\n\t\t\t\tdata.forEach((dbForm: any) => {\r\n\t\t\t\t\tforms.push(this.parseForm(dbForm));\r\n\t\t\t\t});\r\n\t\t\t\treturn forms;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic getFormsByIds(ids: number[]): Observable<Form[]> {\r\n\t\treturn new Observable<Form[]>((responseObserver: Observer<Form[]>) => {\r\n\t\t\tthis.manager.db(WORK).subscribe((db) => {\r\n\t\t\t\tdb.executeSql(this.getQuery(\"forms\", \"selectByIds\").replace(\"?\", ids.join(\",\")), [])\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tvar resp = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < data.rows.length; i++) {\r\n\t\t\t\t\t\t\tlet dbForm = data.rows.item(i);\r\n\t\t\t\t\t\t\tresp.push(this.parseForm(dbForm));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresponseObserver.next(resp);\r\n\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic saveForm(form: Form): Observable<boolean> {\r\n\t\t//id, name, list_id, title, description, success_message, submit_error_message, submit_button_text, created_at, updated_at, elements, isDispatch, dispatchData, prospectData, summary, archive_date\r\n\t\treturn this.save(WORK, \"forms\", [form.id, form.form_id, form.name, form.list_id, form.title, form.description, form.success_message, form.submit_error_message, form.submit_button_text, form.created_at, form.updated_at, JSON.stringify(form.elements), false, null, null, null, form.archive_date, form.is_mobile_kiosk_mode ? 1 : 0]);\r\n\t}\r\n\r\n\tpublic saveForms(forms: Form[]): Observable<boolean> {\r\n\t\treturn this.saveAll<Form>(forms, \"Form\");\r\n\t}\r\n\r\n\tpublic deleteFormsInList(list: number[]): Observable<boolean> {\r\n\t\treturn new Observable<boolean>((responseObserver: Observer<boolean>) => {\r\n\t\t\tif (!list || list.length == 0) {\r\n\t\t\t\tresponseObserver.next(true);\r\n\t\t\t\tresponseObserver.complete();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.manager.db(WORK).subscribe((db) => {\r\n\t\t\t\tconsole.log(\"executing \", this.getQuery(\"forms\", \"deleteIn\").replace(\"?\", list.join(\",\")), []);\r\n\t\t\t\tdb.executeSql(this.getQuery(\"forms\", \"deleteIn\").replace(\"?\", list.join(\",\")), [])\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tconsole.log(\"executing \", this.getQuery(\"submissions\", \"deleteIn\").replace(\"?\", list.join(\",\")), []);\r\n\t\t\t\t\t\tdb.executeSql(this.getQuery(\"submissions\", \"deleteIn\").replace(\"?\", list.join(\",\")), [])\r\n\t\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"executing \", this.getQuery(\"contacts\", \"deleteIn\").replace(\"?\", list.join(\",\")), []);\r\n\t\t\t\t\t\t\t\tdb.executeSql(this.getQuery(\"contacts\", \"deleteIn\").replace(\"?\", list.join(\",\")), [])\r\n\t\t\t\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t\t\t\tresponseObserver.next(true);\r\n\t\t\t\t\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic getRegistration(): Observable<User> {\r\n\t\treturn this.getSingleWithCleanup<any>(MASTER, \"org_master\", null)\r\n\t\t\t.map((data) => {\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tlet user = new User();\r\n\t\t\t\t\tuser.access_token = data.token;\r\n\t\t\t\t\tuser.customer_account_name = data.custAccName;\r\n\t\t\t\t\tuser.user_profile_picture = data.avatar;\r\n\t\t\t\t\tuser.customer_logo = data.logo;\r\n\t\t\t\t\tuser.user_name = data.username;\r\n\t\t\t\t\tuser.customer_name = data.name;\r\n\t\t\t\t\tuser.db = data.db;\r\n\t\t\t\t\tuser.email = data.email;\r\n\t\t\t\t\tuser.first_name = data.operatorFirstName;\r\n\t\t\t\t\tuser.id = data.id;\r\n\t\t\t\t\tuser.is_active = data.active;\r\n\t\t\t\t\tuser.last_name = data.operatorLastName;\r\n\t\t\t\t\tuser.title = data.title;\r\n\t\t\t\t\tuser.pushRegistered = data.pushRegistered;\r\n\t\t\t\t\tuser.device_token = data.registrationId;\r\n\t\t\t\t\tuser.is_production = data.isProduction;\r\n\t\t\t\t\tthis.registration = user;\r\n\t\t\t\t\treturn user;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic getDispatches(): Observable<DispatchOrder[]> {\r\n\t\treturn this.getAll<any[]>(WORK, \"forms\", [true, true, true, true])\r\n\t\t\t.map((data) => {\r\n\t\t\t\tlet forms = [];\r\n\t\t\t\tdata.forEach((dbForm: any) => {\r\n\t\t\t\t\tlet form = new DispatchOrder();\r\n\t\t\t\t\tform.form_id = dbForm.id;\r\n\t\t\t\t\tform.description = dbForm.description;\r\n\t\t\t\t\tform.name = dbForm.name;\r\n\t\t\t\t\tform.total_submissions = dbForm.totalSub;\r\n\t\t\t\t\tform.total_hold = dbForm.totalHold;\r\n\t\t\t\t\tlet dispatch = JSON.parse(dbForm.dispatchData);\r\n\t\t\t\t\tform.device_id = dispatch.device_id;\r\n\t\t\t\t\tform.prospect_id = dispatch.prospect_id;\r\n\t\t\t\t\tform.fields_values = dispatch.fields_values;\r\n\t\t\t\t\tform.status = dispatch.status;\r\n\t\t\t\t\tform.form = this.parseForm(dispatch.form);\r\n\t\t\t\t\tforms.push(form);\r\n\t\t\t\t});\r\n\t\t\t\treturn forms;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic saveDispatchOrder(order: DispatchOrder): Observable<boolean> {\r\n\t\t//console.log(\"saving\");\r\n\t\t//id, name, title, description, success_message, submit_error_message, submit_button_text, created_at, updated_at, elements, isDispatch, dispatchData, prospectData, summary\r\n\t\treturn this.save(WORK, \"forms\", [order.id, order.form_id, order.name, order.form.title, order.description || order.form.description, order.form.success_message, order.form.submit_error_message, order.form.submit_button_text, order.date_created, order.date_last_modified, JSON.stringify(order.form.elements), true, JSON.stringify(order), null, null]);\r\n\t}\r\n\r\n\tpublic saveDispatches(forms: DispatchOrder[]): Observable<boolean> {\r\n\t\treturn this.saveAll<DispatchOrder>(forms, \"DispatchOrder\");\r\n\t}\r\n\r\n\tpublic getMemberships(form_id: number): Observable<DeviceFormMembership[]> {\r\n\t\treturn this.getAll<any[]>(WORK, \"contacts\", [form_id])\r\n\t\t\t.map((data) => {\r\n\t\t\t\tlet forms = [];\r\n\t\t\t\tdata.forEach((dbForm: any) => {\r\n\t\t\t\t\tlet form = new DeviceFormMembership();\r\n\t\t\t\t\tform.form_id = dbForm.formId;\r\n\t\t\t\t\tform.id = dbForm.id;\r\n\t\t\t\t\tform.added_date = dbForm.added;\r\n\t\t\t\t\tform.membership_id = dbForm.membershipId;\r\n\t\t\t\t\tform.prospect_id = dbForm.prospectId;\r\n\t\t\t\t\tform.fields = JSON.parse(dbForm.data);\r\n\t\t\t\t\tform[\"search\"] = form.fields[\"Email\"] + \" \" + form.fields[\"FirstName\"] + \" \" + form.fields[\"LastName\"];\r\n\t\t\t\t\tforms.push(form);\r\n\t\t\t\t});\r\n\t\t\t\treturn forms;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic getMembership(form_id: number, prospect_id: number): Observable<DeviceFormMembership> {\r\n\t\treturn this.getSingle<any>(WORK, \"contacts\", [form_id, prospect_id])\r\n\t\t\t.map((dbForm) => {\r\n\t\t\t\tif (dbForm) {\r\n\t\t\t\t\tlet form = new DeviceFormMembership();\r\n\t\t\t\t\tform.form_id = dbForm.formId;\r\n\t\t\t\t\tform.id = dbForm.id;\r\n\t\t\t\t\tform.added_date = dbForm.added;\r\n\t\t\t\t\tform.membership_id = dbForm.membershipId;\r\n\t\t\t\t\tform.prospect_id = dbForm.prospectId;\r\n\t\t\t\t\tform.fields = JSON.parse(dbForm.data);\r\n\t\t\t\t\tform[\"search\"] = form.fields[\"Email\"] + \" \" + form.fields[\"FirstName\"] + \" \" + form.fields[\"LastName\"];\r\n\r\n\t\t\t\t\treturn form;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic saveMembership(form: DeviceFormMembership): Observable<boolean> {\r\n\t\treturn this.save(WORK, \"contacts\", [form.membership_id, JSON.stringify(form.fields), form.form_id, form.membership_id, form.prospect_id, form.added_date, \"\"]);\r\n\t}\r\n\r\n\tpublic saveMemberships(forms: DeviceFormMembership[]): Observable<boolean> {\r\n\t\treturn new Observable<boolean>(obs => {\r\n\t\t\tthis.saveAll<DeviceFormMembership>(forms, \"Membership\").subscribe(d => {\r\n\t\t\t\tthis.manager.db(WORK).subscribe((db) => {\r\n\t\t\t\t\tlet data = [];\r\n\t\t\t\t\tforms.forEach(form => {\r\n\t\t\t\t\t\tdata.push({id: form.membership_id, formId: form.form_id});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.saveAll<any>(data, \"FormContact\").subscribe(()=>{\r\n\t\t\t\t\t\tdb.executeSql(\"update contacts set formId=NULL\", []).then(()=>{\r\n\t\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}, err => {\r\n\t\t\t\tobs.error(err);\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tpublic saveFormContact(data: any): Observable<boolean>{\r\n\t\treturn this.save(WORK, \"contact_forms\", [data.formId, data.id]);\r\n\t}\r\n\r\n\tpublic saveContactForms(forms: any[]): Observable<boolean> {\r\n\t\treturn this.saveAll<any>(forms, \"FormContact\");\r\n\t}\r\n\r\n\tpublic getSubmissions(formId: number, isDispatch): Observable<FormSubmission[]> {\r\n\t\treturn this.getAll<any[]>(WORK, \"submissions\", [formId, isDispatch])\r\n\t\t\t.map((data) => {\r\n\t\t\t\tlet forms = [];\r\n\t\t\t\tdata.forEach((dbForm: any) => {\r\n\t\t\t\t\tlet form = new FormSubmission();\r\n\t\t\t\t\tform.id = dbForm.id;\r\n\t\t\t\t\tform.form_id = dbForm.formId;\r\n\t\t\t\t\tform.fields = JSON.parse(dbForm.data);\r\n\t\t\t\t\tform.status = dbForm.status;\r\n\t\t\t\t\tform.first_name = dbForm.firstName;\r\n\t\t\t\t\tform.last_name = dbForm.lastName;\r\n\t\t\t\t\tform.email = dbForm.email;\r\n\t\t\t\t\tform.activity_id = dbForm.activityId;\r\n\t\t\t\t\tform.invalid_fields = dbForm.invalid_fields;\r\n\t\t\t\t\tform.barcode_processed = dbForm.barcode_processed;\r\n\t\t\t\t\tforms.push(form);\r\n\t\t\t\t});\r\n\t\t\t\treturn forms;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic getSubmissionsToSend(): Observable<FormSubmission[]> {\r\n\t\treturn new Observable<FormSubmission[]>((responseObserver: Observer<FormSubmission[]>) => {\r\n\t\t\tthis.manager.db(WORK).subscribe((db) => {\r\n\t\t\t\tdb.executeSql(this.getQuery(\"submissions\", \"toSend\"), {})\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tvar resp = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < data.rows.length; i++) {\r\n\t\t\t\t\t\t\tlet dbForm = data.rows.item(i);\r\n\t\t\t\t\t\t\tlet form = new FormSubmission();\r\n\t\t\t\t\t\t\tform.id = dbForm.id;\r\n\t\t\t\t\t\t\tform.form_id = dbForm.formId;\r\n\t\t\t\t\t\t\tform.fields = JSON.parse(dbForm.data);\r\n\t\t\t\t\t\t\tform.status = dbForm.status;\r\n\t\t\t\t\t\t\tform.first_name = dbForm.firstName;\r\n\t\t\t\t\t\t\tform.last_name = dbForm.lastName;\r\n\t\t\t\t\t\t\tform.email = dbForm.email;\r\n\t\t\t\t\t\t\tform.invalid_fields = dbForm.invalid_fields;\r\n\t\t\t\t\t\t\tform.activity_id = dbForm.activityId;\r\n\t\t\t\t\t\t\tresp.push(form);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresponseObserver.next(resp);\r\n\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic saveSubmission(form: FormSubmission): Observable<boolean> {\r\n\r\n\t\tif (form.hold_request_id > 0) {\r\n\t\t\t//UPDATE submissions set id=?, status =?, activityId=?, data=?, sub_date=?, firstName=?, lastName=?, email=?, isDispatch=?, dispatchId=? where hold_request_id=?\r\n\t\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\t\tthis.manager.db(WORK).subscribe((db) => {\r\n\t\t\t\t\tdb.executeSql(this.getQuery('submissions', \"selectByHoldId\"), [form.hold_request_id]).then((data) => {\r\n\t\t\t\t\t\tconsole.log(data.rows.length);\r\n\t\t\t\t\t\tif (data.rows.length == 1) {\r\n\t\t\t\t\t\t\tconsole.log(\"1 row\");\r\n\t\t\t\t\t\t\tdb.executeSql(this.getQuery('submissions', \"updateByHoldId\"), [form.id, SubmissionStatus.Submitted, form.activity_id, JSON.stringify(form.fields), form.first_name, form.last_name, form.email, false, null, form.hold_request_id])\r\n\t\t\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\t\tobs.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}else if(data.rows.length > 1){\r\n\t\t\t\t\t\t\tconsole.log(\"more than a row\");\r\n\t\t\t\t\t\t\tdb.executeSql(this.getQuery(\"submissions\", \"deleteByHoldId\"), [form.hold_request_id])\r\n\t\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\t\t\tdb.executeSql(this.getQuery('submissions', \"updateByHoldId\"), [form.id, SubmissionStatus.Submitted, form.activity_id, JSON.stringify(form.fields), form.first_name, form.last_name, form.email, false, null, form.hold_request_id])\r\n\t\t\t\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\t\t\tobs.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\t\tobs.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.save(WORK, \"submissions\", [form.id, form.form_id, JSON.stringify(form.fields), new Date().toISOString(), form.status, form.first_name, form.last_name, form.email, false, null, form.activity_id, form.hold_request_id, form.barcode_processed]).subscribe(\r\n\t\t\t\t\t\t\t(d) => {\r\n\t\t\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tobs.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t//id, formId, data, sub_date, status, isDispatch, dispatchId\r\n\t\treturn this.save(WORK, \"submissions\", [form.id, form.form_id, JSON.stringify(form.fields), new Date().toISOString(), form.status, form.first_name, form.last_name, form.email, false, null, form.activity_id, form.hold_request_id, form.barcode_processed]);\r\n\t}\r\n\r\n\tpublic updateSubmissionId(form: FormSubmission): Observable<boolean> {\r\n\t\t//id, formId, data, sub_date, status, isDispatch, dispatchId\r\n\t\treturn this.updateById(WORK, \"submissions\", [form.activity_id, form.status, form.activity_id, form.hold_request_id, form.invalid_fields, form.id]);\r\n\t}\r\n\r\n\tpublic updateSubmissionFields(form: FormSubmission): Observable<boolean> {\r\n\t\treturn this.updateById(WORK, \"submissions\", [JSON.stringify(form.fields), form.id]);\r\n\t}\r\n\r\n\tpublic saveSubmisisons(forms: FormSubmission[], pageSize: number = 1): Observable<boolean> {\r\n\t\treturn this.saveAll<FormSubmission>(forms, \"Submission\");\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic saveRegistration(user: User): Observable<boolean> {\r\n\t\tuser.db = user.customer_name.replace(/\\s*/g, '');\r\n\t\treturn this.save(MASTER, \"org_master\", [\r\n\t\t\tuser.id,\r\n\t\t\tuser.customer_name,\r\n\t\t\tuser.first_name + ' ' + user.last_name,\r\n\t\t\t1,\r\n\t\t\tuser.db,\r\n\t\t\t1,\r\n\t\t\tuser.access_token,\r\n\t\t\tuser.user_profile_picture,\r\n\t\t\tuser.customer_logo,\r\n\t\t\tuser.customer_account_name,\r\n\t\t\tuser.user_name,\r\n\t\t\tuser.email,\r\n\t\t\tuser.title,\r\n\t\t\tuser.first_name,\r\n\t\t\tuser.last_name,\r\n\t\t\tuser.pushRegistered,\r\n\t\t\tuser.is_production\r\n\t\t]).map(data => {\r\n\t\t\tthis.registration = user;\r\n\t\t\treturn data;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic makeAllAccountsInactive(): Observable<boolean>{\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tthis.manager.db(MASTER).subscribe((db) => {\r\n\t\t\t\tdb.executeSql(this.getQuery(\"org_master\", \"makeAllInactive\"), [])\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic deleteRegistration(authId: string): Observable<boolean> {\r\n\t\treturn this.remove(MASTER, \"org_master\", [authId])\r\n\t\t\t.map(data => {\r\n\t\t\t\tthis.registration = null;\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate remove(type: string, table: string, parameters: any[], key = \"delete\"): Observable<boolean> {\r\n\t\treturn this.doUpdate(type, key, table, parameters);\r\n\t}\r\n\r\n\tprivate saveAll<T>(items: T[], type: string, pageSize?: number): Observable<boolean> {\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tif (!items || items.length == 0) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.manager.db(WORK).subscribe((db) => {\r\n\t\t\t\tthis.internalSaveAll(db, items, type, pageSize).subscribe(d => {\r\n\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t}, err => {\r\n\t\t\t\t\tthis.saveAllEnabled = false;\r\n\t\t\t\t\tthis.saveAllData = [];\r\n\t\t\t\t\tobs.error(err);\r\n\t\t\t\t});\r\n\t\t\t}, (err) => {\r\n\t\t\t\tthis.saveAllEnabled = false;\r\n\t\t\t\tthis.saveAllData = [];\r\n\t\t\t\tobs.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate internalSaveAll<T>(db: SQLiteObject, items: T[], type: string, pageSize: number): Observable<boolean>{\r\n\t\treturn new Observable<boolean>((obs: Observer<boolean>) => {\r\n\t\t\tif(!items || items.length == 0){\r\n\t\t\t\tobs.next(true);\r\n\t\t\t\tobs.complete();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.saveAllEnabled = true;\r\n\t\t\tlet index = 0;\r\n\t\t\tlet name = \"save\" + type;\r\n\t\t\tconsole.log(\"Start save all \" + type + \" \" + items.length);\r\n\t\t\tlet exec = (done: boolean) => {\r\n\t\t\t\tif(this.saveAllData.length == 0){\r\n\t\t\t\t\tthis.saveAllEnabled = false;\r\n\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\tobs.complete();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet query = this.saveAllData[0].query;\r\n\t\t\t\tlet params = [].concat(this.saveAllData[0].parameters);\r\n\t\t\t\tfor (var i = 1; i < this.saveAllData.length; i++) {\r\n\t\t\t\t\tquery += \", \" + this.saveAllData[0].query.split(\"VALUES\")[1];\r\n\t\t\t\t\tparams.push.apply(params, this.saveAllData[i].parameters);\r\n\t\t\t\t}\r\n\t\t\t\tlet isDone = done;\r\n\t\r\n\t\t\t\tdb.executeSql(query, params)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tthis.saveAllData = [];\r\n\t\t\t\t\t\tif (data.rowsAffected > 0) {\r\n\t\t\t\t\t\t\tif (isDone) {\r\n\t\t\t\t\t\t\t\tthis.saveAllEnabled = false;\r\n\t\t\t\t\t\t\t\tobs.next(true);\r\n\t\t\t\t\t\t\t\tobs.complete();\r\n\t\t\t\t\t\t\t\t//console.log(new Date().getTime());\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thandler(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.saveAllEnabled = false;\r\n\t\t\t\t\t\t\tobs.error(\"Wrong number of affected rows: \" + data.rowsAffected);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tthis.saveAllEnabled = false;\r\n\t\t\t\t\t\tthis.saveAllData = [];\r\n\t\t\t\t\t\tobs.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t};\r\n\t\t\tvar page = pageSize > 0 ? pageSize : this.saveAllPageSize;\r\n\t\t\tlet handler = (resp: boolean, stopExec?: boolean) => {\r\n\t\t\t\tindex++;\r\n\t\t\t\tif (index % page == 0) {\r\n\t\t\t\t\tconsole.log(\"save \" + type + \" \" + index);\r\n\t\t\t\t\texec(index == items.length);\r\n\t\t\t\t\tif(index == items.length){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(index == items.length){\r\n\t\t\t\t\tthis.saveAllEnabled = false;\r\n\t\t\t\t\tconsole.log(\"save \" + type + \" \" + index);\r\n\t\t\t\t\texec(true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (index < items.length) {\r\n\t\t\t\t\tthis[name](items[index]).subscribe(handler);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tthis[name](items[0]).subscribe(handler);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate save(type: string, table: string, parameters: any[]): Observable<boolean> {\r\n\t\treturn new Observable<boolean>((responseObserver: Observer<boolean>) => {\r\n\t\t\tif (this.saveAllEnabled) {\r\n\t\t\t\tthis.saveAllData.push({ query: this.getQuery(table, \"update\"), type: type, parameters: parameters });\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresponseObserver.next(true);\r\n\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.doUpdate(type, \"update\", table, parameters).subscribe((value) => {\r\n\t\t\t\tresponseObserver.next(value);\r\n\t\t\t\tresponseObserver.complete();\r\n\t\t\t}, err => {\r\n\t\t\t\tresponseObserver.error(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate updateById(type: string, table: string, parameters: any[]): Observable<boolean> {\r\n\t\treturn this.doUpdate(type, \"updateById\", table, parameters);\r\n\t}\r\n\r\n\tprivate getSingle<T>(type: string, table: string, parameters: any[]): Observable<T> {\r\n\t\treturn new Observable<T>((responseObserver: Observer<T>) => {\r\n\t\t\tthis.manager.db(type).subscribe((db) => {\r\n\t\t\t\tdb.executeSql(this.getQuery(table, \"select\"), parameters)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tif (data.rows.length == 1) {\r\n\t\t\t\t\t\t\tresponseObserver.next(data.rows.item(0));\r\n\t\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t\t} else if (data.rows.length == 0) {\r\n\t\t\t\t\t\t\tresponseObserver.next(null);\r\n\t\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresponseObserver.error(\"More than one entry found\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getSingleWithCleanup<T>(type: string, table: string, parameters: any[]): Observable<T> {\r\n\t\treturn new Observable<T>((responseObserver: Observer<T>) => {\r\n\t\t\tthis.manager.db(type).subscribe((db) => {\r\n\t\t\t\tdb.executeSql(this.getQuery(table, \"select\"), parameters)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tif (data.rows.length == 1) {\r\n\t\t\t\t\t\t\tresponseObserver.next(data.rows.item(0));\r\n\t\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t\t} else if (data.rows.length == 0) {\r\n\t\t\t\t\t\t\tresponseObserver.next(null);\r\n\t\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet ids = [];\r\n\t\t\t\t\t\t\tfor(let i = 0; i < data.rows.length-1; i++){\r\n\t\t\t\t\t\t\t\tids.push(data.rows.item(i).id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdb.executeSql(this.getQuery(table, \"makeInactiveByIds\").replace(\"?\", ids.join(\",\")), []).then(()=> {\r\n\t\t\t\t\t\t\t\tresponseObserver.next(data.rows.item(data.rows.length-1));\r\n\t\t\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getMultiple<T>(type: string, table: string, parameters: any[]): Observable<T[]> {\r\n\t\treturn this.doGet<T>(type, \"select\", table, parameters);\r\n\t}\r\n\t\r\n\tprivate getAll<T>(type: string, table: string, params?: any[]): Observable<T[]> {\r\n\t\treturn this.doGet<T>(type, \"selectAll\", table, params);\r\n\t}\r\n\r\n\tprivate doGet<T>(type: string, queryId: string, table: string, params?: any[]): Observable<T[]>{\r\n\t\treturn new Observable<T[]>((responseObserver: Observer<T[]>) => {\r\n\t\t\tthis.manager.db(type).subscribe((db) => {\r\n\t\t\t\tdb.executeSql(this.getQuery(table, queryId), params)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tvar resp = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < data.rows.length; i++) {\r\n\t\t\t\t\t\t\tresp.push(data.rows.item(i));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresponseObserver.next(resp);\r\n\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate doUpdate(type: string, queryId: string, table: string, params?: any[]): Observable<boolean>{\r\n\t\treturn new Observable<boolean>((responseObserver: Observer<boolean>) => {\r\n\t\t\tthis.manager.db(type).subscribe((db) => {\r\n\t\t\t\tdb.executeSql(this.getQuery(table, queryId), params)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tif (data.rowsAffected == 1) {\r\n\t\t\t\t\t\t\tresponseObserver.next(true);\r\n\t\t\t\t\t\t\tresponseObserver.complete();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresponseObserver.error(\"Wrong number of affected rows: \" + data.rowsAffected);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tresponseObserver.error(\"An error occured: \" + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getQuery(table: string, type: string): string {\r\n\t\tfor (let i = 0; i < this.tables.length; i++) {\r\n\t\t\tif (this.tables[i].name == table) {\r\n\t\t\t\treturn this.tables[i].queries[type];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/db-client.ts","export * from \"./barcoder\";\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/barcoder/index.ts","import { RESTClient } from '../../../../services/rest-client';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\r\nimport { ToastController } from \"ionic-angular\";\r\nimport { Component, Input, forwardRef } from '@angular/core';\r\nimport { Form, FormElement, DeviceFormMembership, FormSubmission, BarcodeStatus } from \"../../../../model\";\r\nimport { FormBuilder, FormGroup, NG_VALUE_ACCESSOR, AbstractControl, FormControl } from \"@angular/forms\";\r\nimport { BaseElement } from \"../base-element\";\r\n\r\n@Component({\r\n\tselector: 'barcoder',\r\n\ttemplateUrl: 'barcoder.html',\r\n\tproviders: [\r\n\t\t{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => Barcoder), multi: true }\r\n\t]\r\n})\r\nexport class Barcoder extends BaseElement {\r\n\t\r\n\t@Input() element: FormElement;\r\n\t@Input() formGroup: FormGroup;\r\n\t@Input() form: Form;\t\r\n\t@Input() submission: FormSubmission;\r\n\t@Input() readonly: boolean = false;\r\n\r\n\tstatusMessage: string = \"Scan bar code\";\r\n\r\n\tconstructor(private barcodeScanner: BarcodeScanner, private client: RESTClient, private toast: ToastController) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tngOnInit(){\r\n\t\t\r\n\t}\r\n\r\n\tscan(){\r\n\t\tthis.form[\"barcode_processed\"] = BarcodeStatus.Queued;\r\n\t\tthis.submission && (this.submission.barcode_processed = BarcodeStatus.Queued);\r\n\t\tthis.statusMessage = \"Scanning...\";\r\n\t\tthis.barcodeScanner.scan().then((scannedData) => {\r\n\t\t\tthis.writeValue(scannedData.text);\r\n\t\t\tthis.toast.create({\r\n\t\t\t\tmessage: \"Barcode scanned successfully\",\r\n\t\t\t\tduration: 5000,\r\n\t\t\t\tposition: \"top\",\r\n\t\t\t\tcssClass: \"success\"\r\n\t\t\t}).present();\r\n\t\t\tthis.statusMessage = \"Processing...\";\r\n\t\t\tthis.client.fetchBarcodeData(scannedData.text, this.element.barcode_provider_id).subscribe( data => {\r\n\t\t\t\tthis.statusMessage = \"Scan another barcode\";\r\n\t\t\t\tif(!data || data.length == 0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.submission && (this.submission.barcode_processed = BarcodeStatus.Processed);\r\n\t\t\t\tthis.form[\"barcode_processed\"] = BarcodeStatus.Queued;\r\n\t\t\t\tvar vals = {};\r\n\t\t\t\tfor(let id in this.formGroup.controls){\r\n\t\t\t\t\tif(this.formGroup.controls[id][\"controls\"]){\r\n\t\t\t\t\t\tvals[id] = {};\r\n\t\t\t\t\t\tfor(let subid in this.formGroup.controls[id][\"controls\"]){\r\n\t\t\t\t\t\t\tvals[id][subid] = this.formGroup.controls[id][\"controls\"][subid].value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvals[id] = this.formGroup.controls[id].value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdata.forEach(entry => {\r\n\t\t\t\t\tlet id = this.form.getIdByUniqueFieldName(entry.ll_field_unique_identifier);\r\n\t\t\t\t\tif(!id){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet match = /(\\w+\\_\\d+)\\_\\d+/g.exec(id);\r\n\t\t\t\t\tlet ctrl: AbstractControl = null;\r\n\t\t\t\t\tif(match && match.length > 0){\r\n\t\t\t\t\t\tif(!vals[match[1]]){\r\n\t\t\t\t\t\t\tvals[match[1]] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvals[match[1]][id] = entry.value;\r\n\t\t\t\t\t\tctrl = this.formGroup.get(match[1]).get(id);\r\n\t\t\t\t\t\tctrl.markAsTouched();\r\n\t\t\t\t\t\tctrl.markAsDirty();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvals[id] = entry.value;\r\n\t\t\t\t\t\tctrl = this.formGroup.get(id);\r\n\t\t\t\t\t\tctrl.markAsTouched();\r\n\t\t\t\t\t\tctrl.markAsDirty();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.formGroup.setValue(vals);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t}).catch(err => {\r\n\t\t\tthis.statusMessage = \"Scan another barcode\";\r\n\t\t\tthis.form.elements.forEach((element) => {\r\n\t\t\t\tif(element.is_filled_from_barcode){\r\n\t\t\t\t\tlet control = this.getControl(this.formGroup, element[\"identifier\"]);\r\n\t\t\t\t\tif(control){\r\n\t\t\t\t\t\tcontrol.setValue(\"Scanned\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getControl(formGroup: FormGroup, id: string): FormControl{\r\n\t\tlet control = null;\r\n\t\tif(id){\r\n\t\t\tlet match = /(\\w+\\_\\d+)\\_\\d+/g.exec(id);\r\n\t\t\tif(match && match.length > 0){\r\n\t\t\t\tcontrol = <FormControl>this.formGroup.get(match[1]).get(id);\r\n\t\t\t}else{\r\n\t\t\t\tcontrol = <FormControl>this.formGroup.get(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn control;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/form-view/elements/barcoder/barcoder.ts","import { Pipe, PipeTransform } from \"@angular/core\";\r\n \r\n@Pipe({\r\n    name: \"filter\",\r\n    pure: false\r\n})\r\nexport class ArrayFilterPipe implements PipeTransform {\r\n \r\n    transform(items: Array<any>, conditions: {[field: string]: any}): Array<any> {\r\n        return items? items.filter(item => {\r\n            for (let field in conditions) {\r\n                if (conditions[field] && (conditions[field].indexOf(item[field] + \"\") == -1)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }) : [];\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/filter-pipe.ts","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/catch';\r\nimport 'rxjs/add/operator/do';\r\nimport 'rxjs/add/operator/finally';\r\nimport { Http, XHRBackend, RequestOptions, RequestMethod, Request, RequestOptionsArgs, Response } from '@angular/http';\r\ndeclare var $: any;\r\n\r\n@Injectable()\r\nexport class HttpService extends Http {\r\n\tpublic pendingRequests: number = 0;\r\n\tpublic showLoading: boolean = false;\r\n\r\n\tconstructor(backend: XHRBackend, defaultOptions: RequestOptions) {\r\n\t\tsuper(backend, defaultOptions);\r\n\t}\r\n\r\n\trequest(url: Request, options?: RequestOptionsArgs): Observable<Response> {\r\n\t\tlet data = url.getBody();\r\n\t\tlet threshold = 512;\r\n\t\treturn super.request(url, options).map(response => {\r\n\t\t\tlet text = response.text();\t\t\t\r\n\t\t\tconsole.log(JSON.stringify({\r\n\t\t\t\trequest: {\r\n\t\t\t\t\tmethod: this.method(url.method),\r\n\t\t\t\t\turl: url.url.replace(/access\\_token\\=[\\w\\d]+/, \"access_token=HIDDEN\"),\r\n\t\t\t\t\theaders: url.headers.toJSON(),\r\n\t\t\t\t\tdata: data.length > threshold ? data.substr(0, threshold) : data\r\n\t\t\t\t},\r\n\t\t\t\tresponse: {\r\n\t\t\t\t\tstatus: response.status,\r\n\t\t\t\t\theaders: response.headers.toJSON(),\r\n\t\t\t\t\tdata: text.length > threshold ? text.substr(0, threshold) : response.text\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}, null, 2));\r\n\r\n\t\t\treturn response;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate method(m: number): string{\r\n\t\tswitch(m){\r\n\t\t\tcase RequestMethod.Get:\r\n\t\t\t\treturn \"GET\";\r\n\t\t\tcase RequestMethod.Delete:\r\n\t\t\t\treturn \"DELETE\";\r\n\t\t\tcase RequestMethod.Head:\r\n\t\t\t\treturn \"HEAD\";\r\n\t\t\tcase RequestMethod.Options:\r\n\t\t\t\treturn \"OPTIONS\";\r\n\t\t\tcase RequestMethod.Patch:\r\n\t\t\t\treturn \"PATCH\";\r\n\t\t\tcase RequestMethod.Post:\r\n\t\t\t\treturn \"POST\";\r\n\t\t\tcase RequestMethod.Put:\r\n\t\t\t\treturn \"PUT\";\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/http.ts","import { Directive, HostListener, ElementRef, OnInit, LOCALE_ID, Inject } from \"@angular/core\";\r\nimport { CurrencyPipe } from \"@angular/common\";\r\n\r\n@Directive({ selector: \"[myCurrency]\" })\r\nexport class MyCurrencyDirective implements OnInit {\r\n\r\n\tprivate el: any;\r\n\tprivate currencyPipe: CurrencyPipe;\r\n\r\n\tconstructor(\r\n\t\tprivate elementRef: ElementRef,\r\n\t\t@Inject(LOCALE_ID) private _locale: string\r\n\t) {\r\n\t\tthis.el = this.elementRef.nativeElement;\r\n\t\tthis.currencyPipe = new CurrencyPipe(this._locale);\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tthis.el.value = this.currencyPipe.transform(this.el.value);\r\n\t}\r\n\r\n\t@HostListener(\"focus\", [\"$event.target.value\"])\r\n\tonFocus(value) {\r\n\t\tlet result = value.replace(/[^\\d.]/g, '').replace(\".00\", \"\");\r\n\t\tthis.el.children[0].value = result;\r\n\t}\r\n\r\n\t@HostListener(\"blur\", [\"$event.target.value\"])\r\n\tonBlur(value) {\r\n\t\tthis.el.children[0].value = value ? this.currencyPipe.transform(value).replace(\"USD\", \"$\") : \"\";\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/currency.ts","import { Config } from \"./\";\r\nconst CFG = {\r\n\tdevServerUrl: \"https://demo-api.leadliaison.com/v1.0\",\r\n\tserverUrl: \"https://api.leadliaison.com/v1.0\",\r\n\tandroidGcmId: \"56276941492\"\r\n};\r\n\r\nexport function setupConfig() {\r\n\tfor (var field in CFG) {\r\n\t\tvar val = CFG[field];\r\n\t\tConfig[field] = val;\r\n\t}\r\n\tdoSetup();\r\n}\r\n\r\nfunction doSetup(){\r\n\tclass FileTransfer {\r\n\t\tpublic download(source: string, target: string, successCallback: Function, errorCallback: Function, trustAllHosts: boolean, options: any) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsuccessCallback && successCallback({\r\n\t\t\t\t\tisFile: true,\r\n\t\t\t\t\tisDirectory: false,\r\n\t\t\t\t\tname: source.substr(source.lastIndexOf(\"/\") + 1),\r\n\t\t\t\t\tfullPath: source,\r\n\t\t\t\t\tfileSystem: {},\r\n\t\t\t\t\tnativeURL: source\r\n\t\t\t\t});\r\n\t\t\t}, 500)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\twindow[\"FileTransfer\"] = FileTransfer;\r\n\r\n\tif(!window[\"cordova\"]){\r\n\t\tsetTimeout(()=>{window[\"cordova\"] = <any>{\r\n\t\t\t\tfile: {\r\n\t\t\t\t\tdataDirectory: \"D:/\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}, 10);\r\n\t\twindow[\"device\"] = {\r\n\t\t\tplatform: \"Android\",\r\n\t\t\tmodel: \"Note7\",\r\n\t\t\tmanufacturer: \"Google\",\r\n\t\t\tversion: \"5.2\",\r\n\t\t\tuuid: \"ldkcbasdhoaidfyosdvweasadtr\"\r\n\t\t};\r\n\t};\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config/dev.ts","import {Config} from \"./\";\r\nconst CFG = {\r\n\tdevServerUrl: \"https://demo-api.leadliaison.com/v1.0\",\r\n\tserverUrl: \"https://api.leadliaison.com/v1.0\",\r\n\tandroidGcmId: \"56276941492\"\r\n};\r\n\r\nexport function setupConfig(){\r\n\tfor(var field in CFG){\r\n\t\tvar val = CFG[field];\r\n\t\tConfig[field] = val;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/config/prod.ts","export * from \"./form-capture\";\n\n\n// WEBPACK FOOTER //\n// ./src/views/form-capture/index.ts"],"sourceRoot":""}